<?xml version="1.0"?> <!-- -*- nxml -*- -->
<transfer default="chunk">
  <section-def-cats>
    <def-cat n="nom">
      <cat-item tags="n.*"/><!--Falten els altres np (antroponims) que tenen gen i nbr, revisar regles.-->
      <cat-item tags="np.loc.*"/>
    </def-cat>

     <def-cat n="ant">
      <cat-item tags="np.ant.*"/>
    </def-cat>

     <def-cat n="loc">
      <cat-item tags="np.loc.*"/>
    </def-cat>

    <def-cat n="prnpro">
      <cat-item tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="prnref">
      <cat-item tags="prn.pro.ref.*"/>
    </def-cat>

    <def-cat n="sent">
       <cat-item tags="sent"/>
    </def-cat>

    <def-cat n="sent_coma">
       <cat-item tags="cm"/><!-- provem amb la coma EO, per a poder tractar el pro-drop-->
    </def-cat>

    <def-cat n="guio">
       <cat-item tags="guio"/>
    </def-cat>

    <def-cat n="guiocnjcoo">
       <cat-item tags="guio"/>
       <cat-item lemma="y" tags="cnjcoo"/>
       <cat-item lemma="o" tags="cnjcoo"/>
    </def-cat>

    <def-cat n="adj">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.geradj.*"/>
    </def-cat>
    
    <def-cat n="adjADJ"> <!-- únicament adjs, no pp -->
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
    </def-cat>
    
    <def-cat n="unknown"> <!-- unknown words -->
      <cat-item tags=""/>
    </def-cat>

    <def-cat n="el">
      <cat-item lemma="el" tags="det.*"/>
    </def-cat>

    <def-cat n="el_det_ms">
      <cat-item lemma="el" tags="det.def.m.sg"/>
    </def-cat>

    <def-cat n="un_sg">
      <cat-item lemma="un" tags="det.ind.*.sg"/>
    </def-cat>
    <def-cat n="un_pl">
      <cat-item lemma="un" tags="det.ind.*.pl"/>
    </def-cat>
    
    
   <def-cat n="det"><!--Determinants i predeterminants, van anteposats -->
      <cat-item tags="det.dem.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.pos.*"/>
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="det.itg.*"/>
      <cat-item tags="det.ord.*"/>
      <cat-item tags="predet.*"/>
      <cat-item tags="num.*"/> 
    </def-cat>


   <def-cat n="dem">
      <cat-item tags="det.dem.*"/>
    </def-cat>
   <def-cat n="def">
      <cat-item tags="det.def.*"/>
    </def-cat>
   <def-cat n="qnt">
      <cat-item tags="det.qnt.*"/>
    </def-cat>
   <def-cat n="tot">
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="predet.*"/><!--EOes todo-->
    </def-cat>

    <def-cat n="num">
      <cat-item tags="num"/>
      <cat-item tags="num.*"/>
    </def-cat>

    <def-cat n="num_dato">
      <cat-item lemma="1" tags="num.*"/>
      <cat-item lemma="2" tags="num.*"/>
      <cat-item lemma="3" tags="num.*"/>
      <cat-item lemma="4" tags="num.*"/>
      <cat-item lemma="5" tags="num.*"/>
      <cat-item lemma="6" tags="num.*"/>
      <cat-item lemma="7" tags="num.*"/>
      <cat-item lemma="8" tags="num.*"/>
      <cat-item lemma="9" tags="num.*"/>
      <cat-item lemma="10" tags="num.*"/>
      <cat-item lemma="11" tags="num.*"/>
      <cat-item lemma="12" tags="num.*"/>
      <cat-item lemma="13" tags="num.*"/>
      <cat-item lemma="14" tags="num.*"/>
      <cat-item lemma="15" tags="num.*"/>
      <cat-item lemma="16" tags="num.*"/>
      <cat-item lemma="17" tags="num.*"/>
      <cat-item lemma="18" tags="num.*"/>
      <cat-item lemma="19" tags="num.*"/>
      <cat-item lemma="20" tags="num.*"/>
      <cat-item lemma="21" tags="num.*"/>
      <cat-item lemma="22" tags="num.*"/>
      <cat-item lemma="23" tags="num.*"/>
      <cat-item lemma="24" tags="num.*"/>
      <cat-item lemma="25" tags="num.*"/>
      <cat-item lemma="26" tags="num.*"/>
      <cat-item lemma="27" tags="num.*"/>
      <cat-item lemma="28" tags="num.*"/>
      <cat-item lemma="29" tags="num.*"/>
      <cat-item lemma="30" tags="num.*"/>
      <cat-item lemma="31" tags="num.*"/>
    </def-cat>

    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>

    <def-cat n="verbprep_para"> <!-- exclusivamente para el tagger para-->
      <cat-item lemma="parar" tags="vblex.pri.p3.sg"/>
    </def-cat>

    <def-cat n="prpers">
      <cat-item lemma="prpers" tags="prn.*"/>
    </def-cat>

    <def-cat n="tn"><!--EO indefnitis i companyia sense gènere al EO-->
      <cat-item tags="prn.tn.m.*"/>
      <cat-item tags="prn.tn.f.*"/>
      <cat-item tags="prn.tn.mf.*"/>
    </def-cat>
    
    <def-cat n="tn_itg_pos"><!--Aquí no hi entren els pronoms personals, caldrà fer-ne un xunc a part. -->
      <!--<cat-item tags="prn.tn.m.*"/>
      <cat-item tags="prn.tn.f.*"/>
      <cat-item tags="prn.tn.mf.*"/>-->
      <cat-item tags="prn.itg.*"/>
      <cat-item tags="prn.pos.*"/>
      <!--<cat-item tags="prn.tn.*"/>-->
    </def-cat>
    
    <def-cat n="pos"><!-- pel tagger-->
      <cat-item tags="prn.pos.*"/>
    </def-cat>

    <def-cat n="proenc">
      <!--<cat-item tags="prn.enc.*"/>
      <cat-item tags="prn.pro.*"/>-->
      <cat-item lemma="prpers" tags="prn.enc.*"/>
      <cat-item lemma="prpers" tags="prn.pro.*"/>
      <cat-item lemma="se" tags="prn.pro.*"/>
    </def-cat>


    <def-cat n="profort"> <!-- ver regla PRO_FUERTE...-->
      <cat-item lemma="prpers_fort" tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="relatiu"> <!-- EO-->
      <cat-item tags="prn.rel.*"/>
      <cat-item tags="rel.*"/><!-- EOes-->
    </def-cat>

    <def-cat n="relatiu_prep"> <!-- EO-->
      <cat-item tags="rel.*"/>
    </def-cat>

    <def-cat n="enc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>

    <def-cat n="pro">
      <cat-item tags="prn.pro.*"/>
      <cat-item lemma="lo" tags="prn.tn.*"/>
    </def-cat>

    <def-cat n="lo_det">
      <cat-item lemma="lo" tags="prn.tn.*"/>
    </def-cat>

    <def-cat n="verbnm_inf_ger"><!--verb no modal, infinitiu i gerundi -->
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbser.pron.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbhaver.pron.inf"/>
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbser.pron.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbhaver.pron.ger"/>
    </def-cat>

    <def-cat n="verbnm_imp"><!--verb no modal, imperatiu -->
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pron.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pron.imp.*"/>
    </def-cat>

    <def-cat n="verbm"><!--verb modal -->
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="inf_imp">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.imp.*"/>
    </def-cat>

    <def-cat n="verbm_inf_ger"><!--verb modal, infinitiu o gerundi -->
      <cat-item tags="vbmod.inf"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="haber">
      <cat-item tags="vbhaver.*"/>
      <cat-item lemma="haya" tags="n.f.sg"/> <!-- EOes cosas del tagger 'haya ido'-->
    </def-cat>

    <def-cat n="haber_inf">
      <cat-item tags="vbhaver.inf"/>
    </def-cat>

    <def-cat n="ser-pp">
      <cat-item lemma="ser" tags="vbser.pp.*"/>
    </def-cat>

    <def-cat n="verbcj">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.fts.*"/><!-- EOes-->
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.fts.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.fts.*"/><!-- EOes-->
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>
    </def-cat>


    <def-cat n="verb">
      <cat-item tags="vblex.*.*.*"/>
    </def-cat>

    <def-cat n="verbcj2">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.fts.*"/><!-- EOes-->
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>
    </def-cat>

    <def-cat n="pp">
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.pron.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/><!--ATENCIÓ: CANVI -->
    </def-cat>

    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>

    <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>


    <def-cat n="ir_a"> <!-- per a la perífrasi 'voy a dormir' EOes-->
      <cat-item lemma="ir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="adv_preadv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>
    
    <def-cat n="adv_cnjadv">
      <cat-item tags="adv"/>
      <cat-item tags="cnjadv"/>
    </def-cat>

    <def-cat n="adv">
      <cat-item tags="adv"/>
    </def-cat>

    <def-cat n="advment">
      <cat-item tags="adv.ment"/>
    </def-cat>

    <def-cat n="advitg">
      <cat-item tags="adv.itg"/>
    </def-cat>
    
    <def-cat n="mas"> <!-- EOes más -->
      <cat-item lemma="más" tags="adv"/>
      <cat-item lemma="más" tags="preadv"/>
      <cat-item lemma="más" tags="det.qnt.*"/><!-- pel tagger-->
      <cat-item lemma="menos" tags="adv"/>
      <cat-item lemma="menos" tags="preadv"/>
      <cat-item lemma="menos" tags="det.qnt.*"/><!-- pel tagger-->
      <cat-item lemma="mucho más" tags="adv"/>
      <cat-item lemma="mucho menos" tags="adv"/>
    </def-cat>

    <def-cat n="mejor">
      <cat-item lemma="mejor" tags="adj.*"/>
      <cat-item lemma="peor" tags="adj.*"/>
      <cat-item lemma="mayor" tags="adj.*"/>
      <cat-item lemma="menor" tags="adj.*"/>
    </def-cat>

    <def-cat n="no">
      <cat-item lemma="no" tags="adv"/>
    </def-cat>

    <def-cat n="advneg">
      <cat-item lemma="nunca" tags="adv"/>
      <cat-item lemma="jamás" tags="adv"/>
    </def-cat>

    <def-cat n="pronneg">
      <cat-item lemma="nada" tags="prn.*"/>
    </def-cat>

    <def-cat n="cnjcoo">
      <cat-item lemma="y" tags="cnjcoo"/>
      <cat-item lemma="o" tags="cnjcoo"/>
      <cat-item lemma="pero" tags="cnjcoo"/>
    </def-cat>

     <def-cat n="cnjcoopercorregir"> <!-- EO afegit per a corregir errors del tagger, veure regles-->
      <cat-item lemma="que" tags="cnjcoo"/> <!-- ara el tagger prioritza aquest-->
      <cat-item tags="cnjsub"/> <!-- per si de cas-->
      <cat-item lemma="que" tags="prn.rel.*"/> <!-- seria el correcte, en fi ... -->
    </def-cat>

     <def-cat n="cnj">
      <cat-item tags="cnjcoo"/>
      <cat-item tags="cnjsub"/>
      <cat-item tags="cnjadv"/>
    </def-cat>
     <def-cat n="cnjcorregir"><!-- EOes -->
      <cat-item lemma="que" tags="cnjcoo"/>
      <cat-item lemma="que" tags="cnjsub"/>
      <cat-item lemma="que" tags="prn.rel.*"/> <!-- coses del tagger... -->
      <cat-item lemma="que" tags="cnjadv"/>
    </def-cat>

    <def-cat n="forma_manera">
      <cat-item lemma="forma" tags="n.*"/>
      <cat-item lemma="manera" tags="n.*"/>
    </def-cat>

    <def-cat n="n_temps">
      <cat-item lemma="segundo" tags="n.*"/>
      <cat-item lemma="minudo" tags="n.*"/>
      <cat-item lemma="hora" tags="n.*"/>
      <cat-item lemma="día" tags="n.*"/>
      <cat-item lemma="semana" tags="n.*"/>
      <cat-item lemma="mes" tags="n.*"/>
      <cat-item lemma="trimestre" tags="n.*"/>
      <cat-item lemma="semestre" tags="n.*"/>
      <cat-item lemma="año" tags="n.*"/>
      <cat-item lemma="década" tags="n.*"/>
      <cat-item lemma="siglo" tags="n.*"/>
      <cat-item lemma="milenio" tags="n.*"/>
    </def-cat>

    <def-cat n="n_temps_pl">
      <cat-item lemma="segundo" tags="n.*.pl"/>
      <cat-item lemma="minudo" tags="n.*.pl"/>
      <cat-item lemma="hora" tags="n.*.pl"/>
      <cat-item lemma="día" tags="n.*.pl"/>
      <cat-item lemma="semana" tags="n.*.pl"/>
      <cat-item lemma="mes" tags="n.*.pl"/>
      <cat-item lemma="trimestre" tags="n.*.pl"/>
      <cat-item lemma="semestre" tags="n.*.pl"/>
      <cat-item lemma="año" tags="n.*.pl"/>
      <cat-item lemma="década" tags="n.*.pl"/>
      <cat-item lemma="siglo" tags="n.*.pl"/>
      <cat-item lemma="milenio" tags="n.*.pl"/>
      <cat-item lemma="temps" tags="n.*"/> <!-- pot ser tbé singular -->
    </def-cat>

    <def-cat n="nom_da"> <!-- nomoj postulantaj "da" -->
      <cat-item lemma="par" tags="n.*"/>
      <cat-item lemma="decena" tags="n.*"/>
      <cat-item lemma="docena" tags="n.*"/>
      <cat-item lemma="quincena" tags="n.*"/>
      <cat-item lemma="veintena" tags="n.*"/>
      <cat-item lemma="treintena" tags="n.*"/>
      <cat-item lemma="trentena" tags="n.*"/>
      <cat-item lemma="cuarentena" tags="n.*"/>
      <cat-item lemma="cincuentena" tags="n.*"/>
      <cat-item lemma="centenar" tags="n.*"/>
      <cat-item lemma="millar" tags="n.*"/>
      <cat-item lemma="millón" tags="n.*"/>
      <cat-item lemma="millardo" tags="n.*"/>
    </def-cat>

    <def-cat n="por">
      <cat-item lemma="por" tags="pr"/>
    </def-cat>

    <def-cat n="de">
      <cat-item lemma="de" tags="pr"/>
    </def-cat>

    <def-cat n="a">
      <cat-item lemma="a" tags="pr"/>
    </def-cat>

    <def-cat n="estarapuntode"> <!--EO perífrasi-->
      <cat-item lemma="estar# a punto de" tags="vblex.*"/>
    </def-cat>

    <def-cat n="venirde">
      <cat-item lemma="venir# de" tags="vblex.*"/>
    </def-cat>

    <def-cat n="seguir"> <!--EO perífrasi-->
      <cat-item lemma="seguir" tags="vblex.*"/>
      <cat-item lemma="continuar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="parecer"> <!--EO perífrasi-->
      <cat-item lemma="parecer" tags="vblex.*"/>
    </def-cat>

    <def-cat n="acabarde"> <!--EO perífrasi-->
      <cat-item lemma="acabar# de" tags="vblex.*"/>
    </def-cat>

    <def-cat n="dejarde"> <!--EO perífrasi-->
      <cat-item lemma="dejar# de" tags="vblex.*"/>
    </def-cat>

    <def-cat n="volvera"> <!--EO perífrasi-->
      <cat-item lemma="volver# a" tags="vblex.*"/>
    </def-cat>

    <def-cat n="echarse"> <!--EO perífrasi-->
      <cat-item lemma="echar" tags="vblex.*"/>
      <cat-item lemma="poner" tags="vblex.*"/>
    </def-cat>

    <def-cat n="estar"> <!--EO per a la perifrasi estar +  gerundi-->
      <cat-item lemma="estar" tags="vblex.*"/>
    </def-cat>

<!--
    <def-cat n="deberde"> per a la perifrasi deber de  +  infinitiu (conjugat per no agafar el nom)
      <cat-item lemma="deber# de" tags="vblex.cni.*"/>
      <cat-item lemma="deber# de" tags="vblex.fti.*"/>
      <cat-item lemma="deber# de" tags="vblex.ifi.*"/>
      <cat-item lemma="deber# de" tags="vblex.imp.*"/>
      <cat-item lemma="deber# de" tags="vblex.pii.*"/>
      <cat-item lemma="deber# de" tags="vblex.pis.*"/>
      <cat-item lemma="deber# de" tags="vblex.pri.*"/>
      <cat-item lemma="deber# de" tags="vblex.prs.*"/>
    </def-cat>
-->

    <def-cat n="deber"> <!--EO per a la perifrasi deber de  +  infinitiu (conjugat per no agafar el nom)-->
      <cat-item lemma="deber" tags="vblex.cni.*"/>
      <cat-item lemma="deber" tags="vblex.fti.*"/>
      <cat-item lemma="deber" tags="vblex.ifi.*"/>
      <cat-item lemma="deber" tags="vblex.imp.*"/>
      <cat-item lemma="deber" tags="vblex.pii.*"/>
      <cat-item lemma="deber" tags="vblex.pis.*"/>
      <cat-item lemma="deber" tags="vblex.pri.*"/>
      <cat-item lemma="deber" tags="vblex.prs.*"/>
    </def-cat>

    <def-cat n="hayque"> <!--EO per a la perifrasi hay que +  infinitiu-->
      <cat-item lemma="haber# que" tags="vbhaver.*"/>
    </def-cat>

    <def-cat n="hacer">
      <cat-item lemma="hacer" tags="vblex.*"/>
    </def-cat>

    <def-cat n="hecho"> <!-- EO "fakto" en comptes de "farita" -->
      <cat-item lemma="hacer" tags="vblex.pp.m.sg"/>
    </def-cat>

    <def-cat n="vbref2pasivo">
      <cat-item lemma="formar" tags="vblex.*"/>
      <cat-item lemma="usar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="monato">
      <cat-item lemma="enero" tags="n.m.sg"/>
      <cat-item lemma="febrero" tags="n.m.sg"/>
      <cat-item lemma="marzo" tags="n.m.sg"/>
      <cat-item lemma="abril" tags="n.m.sg"/>
      <cat-item lemma="mayo" tags="n.m.sg"/>
      <cat-item lemma="junio" tags="n.m.sg"/>
      <cat-item lemma="julio" tags="n.m.sg"/>
      <cat-item lemma="agosto" tags="n.m.sg"/>
      <cat-item lemma="septiembre" tags="n.m.sg"/>
      <cat-item lemma="octubre" tags="n.m.sg"/>
      <cat-item lemma="noviembre" tags="n.m.sg"/>
      <cat-item lemma="diciembre" tags="n.m.sg"/>
    </def-cat>

  </section-def-cats>

  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="n.unc"/>
      <attr-item tags="np.loc"/>
      <attr-item tags="np.ant"/>
    </def-attr>

    <def-attr n="a_np_acr">
      <attr-item tags="np"/>
      <attr-item tags="acr"/>
    </def-attr>

    <def-attr n="a_adj">          
      <attr-item tags="adj"/>
      <attr-item tags="adj.sint"/>
      <attr-item tags="adj.sint.comp"/>
      <attr-item tags="adj.sint.sup"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vblex.geradj"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbser.geradj"/>
    </def-attr>  


    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="det.itg"/>
      <attr-item tags="det.ord"/>
      <attr-item tags="predet"/>
      <attr-item tags="num"/>
      <attr-item tags="num.ciph"/>
      <attr-item tags="num.percent"/>
    </def-attr>

    <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="num.ciph"/>
      <attr-item tags="num.percent"/>
    </def-attr>

    <def-attr n="a_verb2"> <!-- mirem si és pronominal a la macro tipus_verbs -->
      <attr-item tags="vblex"/>
      <attr-item tags="vblex.pron"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="pron">
      <attr-item tags="pron"/>
    </def-attr>

    <def-attr n="sep">
      <attr-item tags="sep"/>
    </def-attr>

    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
      <attr-item tags="adv.itg"/>
    </def-attr>

    <def-attr n="a_pp">
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vblex.pron.pp"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vblex.sep.pp"/>
      <attr-item tags="vbser.sep.pp"/>
      <attr-item tags="vbmod.sep.pp"/>
      <attr-item tags="vaux.pp"/>
      <attr-item tags="vbhaver.pp"/>
    </def-attr>

    <def-attr n="a_prn">
      <attr-item tags="prn"/>
      <attr-item tags="prn.pro"/>
      <attr-item tags="rel"/><!-- OJO -->
    </def-attr>

    <def-attr n="tipus_prn">
      <attr-item tags="subj"/>
      <attr-item tags="obj"/>
      <attr-item tags="tn"/>
      <attr-item tags="itg"/>
      <attr-item tags="pos"/>
      <attr-item tags="ref"/>
      <attr-item tags="rel"/><!--EO-->
      <attr-item tags="nn"/><!--EO-->
      <attr-item tags="adv"/><!--EO-->
    </def-attr>
    <def-attr n="tipoenc_pro">
      <attr-item tags="ref.p3.mf.sp"/>
      <attr-item tags="p1.mf.pl"/>
      <attr-item tags="p1.mf.sg"/>
      <attr-item tags="p2.mf.pl"/>
      <attr-item tags="p2.mf.sg"/>
      <attr-item tags="p3.f.pl"/>
      <attr-item tags="p3.f.sg"/>
      <attr-item tags="p3.mf.pl"/>
      <attr-item tags="p3.mf.sg"/>
      <attr-item tags="p3.m.pl"/>
      <attr-item tags="p3.m.sg"/>
      <attr-item tags="p3.nt"/>
      <attr-item tags="mf.sg"/>
      <attr-item tags="adv"/>
    </def-attr>
    <def-attr n="pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>

    <def-attr n="cas"> <!--EO-->
      <attr-item tags="nom"/>
      <attr-item tags="nomi2"/>
      <attr-item tags="acc"/>
      <attr-item tags="sense"/>
    </def-attr>

    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="nt"/>
    </def-attr>

    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="nbr2">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="temps">
      <attr-item tags="cni"/>
      <attr-item tags="fti"/>  
      <attr-item tags="fts"/>  
      <attr-item tags="ifi"/>
      <attr-item tags="imp"/>
      <attr-item tags="pii"/>
      <attr-item tags="pis"/>
      <attr-item tags="pri"/>
      <attr-item tags="pres"/>
      <attr-item tags="past"/>
      <attr-item tags="pp2"/>
      <attr-item tags="pp3"/>
      <attr-item tags="gerpast"/>
      <attr-item tags="prs"/>
      <attr-item tags="pp"/><!-- ? -->
      <attr-item tags="ger"/><!-- ? -->
      <attr-item tags="inf"/><!-- ? -->
    </def-attr>



    <def-attr n="neg">
      <attr-item tags="NEG"/>
    </def-attr>  

  </section-def-attrs>
  <section-def-vars>
    <def-var n="treu_ref"/>
    <def-var n="case"/>
    <def-var n="changecase"/>
    <def-var n="lemapos"/>
    <def-var n="nombre"/>
    <def-var n="nombre2"/>
    <def-var n="genere"/>
    <def-var n="concDet"/>
    <def-var n="concAdj"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
    <def-var n="caseFirstWord"/> 
    <def-var n="lema"/>
    <def-var n="EOS"/>
    <def-var n="paraula1"/>
    <def-var n="SVnegatiu"/>
    <def-var n="auxiliar"/>
    <def-var n="tipus_verb"/>
    <def-var n="tipus_verb2"/>
<!-- variables només per depurar i veure per on es passa en executar -->
    <def-var n="debug1"/>
    <def-var n="debug2"/>
  </section-def-vars>

  <section-def-lists>

  <def-list n="detsprep"> <!-- BCN EO per marcar els que no poden anar en acc-->
    <list-item v="pli da"/>
    <list-item v="iom da"/>
    <list-item v="la plimulto da"/>
    <list-item v="tro da"/>
    <list-item v="malpli da"/>
    <list-item v="ne multe da"/>
    <list-item v="sufiĉe da"/>
    <list-item v="ne multe da"/>
    <list-item v="tiom da"/>
    </def-list> 
  
  <def-list n="quien"> <!-- BCN EO per marcar els que no poden anar en acc-->
    <list-item v="quién"/>
    </def-list> 

  <def-list n="quin"> <!-- BCN EO per marcar els que han d'anar en acc (dets int preverbals)-->
    <list-item v="cuál"/>
    </def-list> 

  <def-list n="locual">
    <list-item v="lo cual"/>
    </def-list>

  <def-list n="moviment"> <!-- BCN EO-->
    <list-item v="ir"/>
    <list-item v="añadir"/>
    <list-item v="poner"/>
    <list-item v="sacar"/>
    <list-item v="introducir"/>
    <list-item v="entrar"/>
    <list-item v="caer"/>
    <list-item v="subir"/>
    <list-item v="cruzar"/>
    <list-item v="resbalar"/>
    <list-item v="llegar"/>
    <list-item v="volar"/>
    <list-item v="dirigir"/>
    <list-item v="correr"/>
    <list-item v="caminar"/>
    <list-item v="andar"/>
    <list-item v="avanzar"/>
    <list-item v="salir"/>
    </def-list> 


  <def-list n="agradar"> <!-- BCN EO per a la inversio argumental-->
    <list-item v="agradar"/>
    <list-item v="gustar"/>
    <list-item v="encantar"/>
    <list-item v="complacer"/>
    <list-item v="preocupar"/>
    <list-item v="interesar"/>
    <list-item v="inquietar"/>
    </def-list> 

  <def-list n="volition"> <!-- BCN EO verbs que porten KE -->
    <list-item v="querer"/>
    <list-item v="proponer"/>
    <list-item v="exigir"/>
    <list-item v="reclamar"/>
    <list-item v="indicar"/>
    <list-item v="pedir"/>
    <list-item v="sugerir"/>

<!--  <def-list n="reportingverb"> -->
<!--
    <list-item v="olvidar"/>
    <list-item v="decir"/>
    <list-item v="admitir"/>
    <list-item v="acordar"/>
    <list-item v="decidir"/>
    <list-item v="negar"/>
    <list-item v="explicar"/>
    <list-item v="insistir"/>
    <list-item v="prometer"/>
    <list-item v="recomendar"/>
    <list-item v="sugerir"/>
    <list-item v="mencionar"/>
    <list-item v="pensar"/>
    <list-item v="creer"/>
    <list-item v="esperar"/>
    <list-item v="temer"/>
    <list-item v="suponer"/>
    <list-item v="significar"/>
-->
    </def-list> 

  <def-list n="reportingverb"> <!-- BCN EO verbs que porten KE (no s'utilitza)-->
    <list-item v="olvidar"/>
    <list-item v="decir"/>
    <list-item v="admitir"/>
    <list-item v="acordar"/>
    <list-item v="decidir"/>
    <list-item v="negar"/>
    <list-item v="explicar"/>
    <list-item v="insistir"/>
    <list-item v="prometer"/>
    <list-item v="recomendar"/>
    <list-item v="sugerir"/>
    <list-item v="mencionar"/>
    <list-item v="pensar"/>
    <list-item v="creer"/>
    <list-item v="esperar"/>
    <list-item v="temer"/>
    <list-item v="suponer"/>
    <list-item v="significar"/>
  </def-list>

	<!-- PROVISIONAL -->
    <def-list n="verbs_ref"><!-- se elimina el pronombre reflexivo o se cambia la traducción del verbo al traducir -->
<!-- iĝi -->
      <list-item v="casar"/>
      <list-item v="enamorar"/>
      <list-item v="caracterizar"/>
      <list-item v="acostumbrar"/>
      <list-item v="volver"/>
      <list-item v="convertir"/>
      <list-item v="tornar"/>
<!-- for- -->
      <list-item v="comer"/>
      <list-item v="beber"/>
<!-- aliaj -->
      <list-item v="aprovechar"/>
      <list-item v="acordar"/>
      <list-item v="tratar# de"/>
<!--
      <list-item v="codear# con"/>
      <list-item v="posicionar"/>
      <list-item v="aficionar"/>
      <list-item v="estrenar"/>
      <list-item v="divorciar"/>
      <list-item v="concienciar"/>
      <list-item v="incautar"/>
      <list-item v="despedir# de"/>
      <list-item v="despedir"/>
-->
    </def-list>
  </section-def-lists>


  <section-def-macros>
   
    <def-macro n="tipus_verbs" npar="1"> <!-- tots els verbs passen per aqui -->
      <choose>
        <when>
          <test>
          <in>
         <clip pos="1" side="sl" part="lemh"/>
         <list n="agradar"/>
          </in>
          </test>
          <let>
            <var n="tipus_verb"/>
            <lit-tag v="like"/>
          </let>
        </when>
	<when>
    	<test>
     	 <in>
       	  <clip pos="1" side="sl" part="lemh"/>
       	  <list n="moviment"/>
      	</in>
    	</test>
 	<let>
       <var n="tipus_verb"/>
       <lit-tag v="moviment"/>
       </let>
     </when>

    <when>
    <test>
      <in>
         <clip pos="1" side="sl" part="lemh"/>
         <list n="volition"/>
      </in>
    </test>
    <let>
     <var n="tipus_verb"/>
     <lit-tag v="volition"/>
     </let>
    </when>

	<when>
    	<test>
      	<in>
        <clip pos="1" side="sl" part="lemh"/>
        <list n="reportingverb"/>
      	</in>
    	</test>
	<let>
        <var n="tipus_verb"/>
        <lit-tag v="reportingverb"/>
        </let>
	</when>

        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="a_verb2"/>
              <lit-tag v="vblex.pron"/>
            </equal>
          </test>
          <let>
            <var n="tipus_verb2"/>
            <lit-tag v="pron"/>
          </let>
        </when>

        <otherwise>
          <let>
            <var n="tipus_verb"/>
            <lit-tag v="res"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>


<def-macro n="pli_plej" npar="1">
   <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="lem"/>
              <lit v="más"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="lem"/>
              <lit v="menos"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="malplej"/>
          </let>
        </when>
   </choose>
</def-macro>

<def-macro n="pli_plej2" npar="1">
   <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="lem"/>
              <lit v="mejor"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej bona"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="lem"/>
              <lit v="peor"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej malbona"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="lem"/>
              <lit v="mayor"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej granda"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="lem"/>
              <lit v="menor"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej malgranda"/>
          </let>
        </when>
   </choose>
</def-macro>

 

    <def-macro n="f_bcond" npar="2"><!--Per mirar si el blanc conté o no format. Cal posar aquesta funció en les regles en què desaparegui alguna paraula, per tal de decidir si el blanc de la paraula eliminada s'ha d'eliminar o conservar. Si conté format cal conservar-la, si no en conté cal eliminar-la perquè no apareguin dos espais seguits. -->
      <choose>
	<when>
	  <test>
	    <not>
	      <equal>
		<b pos="1"/>
		<lit v=" "/>
	      </equal>
	    </not>
	  </test>
	  <out>
	    <b pos="1"/>
	  </out>
	</when>     	    
      </choose>
    </def-macro>


	<!-- PROVISIONAL -->
    <def-macro n="control_ref" npar="2"> <!-- macro original de es->fr -->
      <!-- canvia el lema dels verbs ref i elimina el prn si cal-->
      <let>
        <var n="treu_ref"/>
        <lit v=""/>
      </let>
<let>
<var n="debug1"/>
<lit v="entro"/>
</let>
      <choose>
        <!-- prn ref?...-->
        <when>
          <test>
            <or>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="tipoenc_pro"/>
                  <lit-tag v="ref.p3.mf.sp"/>
                </equal>
                <or>
                  <equal>
                    <clip pos="2" side="sl" part="pers"/>
                    <lit-tag v="p3"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </or>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
            </or>
          </test>
          <choose>
            <!-- canvia aquests verbs-->
            <when>
              <test>
                <in caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <list n="verbs_ref"/>
                </in>
              </test>
              <choose>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="casar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lemh"/> <!-- lem -> lemh -->
                    <lit v="geedziĝi"/>
                  </let>
<let>
<var n="debug1"/>
<lit v="hola"/>
</let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="enamorar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="enamiĝi"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="acostumbrar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="kutimiĝi"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="caracterizar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="karakteriziĝi"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="volver"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="fariĝi"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="convertir"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="fariĝi"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="tornar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="fariĝi"/>
                  </let>
                </when>

<!-- for- -->
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="comer"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="formanĝi"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="beber"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="fortrinki"/>
                  </let>
                </when>

<!-- aliaj -->
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="aprovechar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="profiti"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="acordar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="rememori"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="tratar# de"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="temi# pri"/>
                  </let>
                </when>
<!--
		<when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="despedir"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="dire# au revoir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="posicionar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="prendre# position"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="codear# con"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="côtoyer"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="estrenar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="débuter"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="concienciar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="prendre# conscience"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="aficionar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="prendre# goût"/>
                  </let>
                </when>
-->
            <otherwise>
<let>
<var n="debug1"/>
<lit v="otherwise1"/>
</let>
            </otherwise>
              </choose>
              <let>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </let>
<let>
<var n="debug2"/>
<lit v="hola"/>
</let>
            </when>
            <otherwise><!--se cambia la traducción sin quitar el pronombre reflexivo -->
<let>
<var n="debug1"/>
<lit v="otherwise2"/>
</let>
              <choose>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="acordarXXX"/> 	<!-- es tracta a dalt -->
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="rememoriXXX"/>
                  </let>
<let>
<var n="debug1"/>
<lit v="hola-2-1"/>
</let>
                </when>
<!--
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="ilusionar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="réjouir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="agazapar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="tapir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="apelotonar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="agglutiner"/>
                  </let>
                </when>
-->
<otherwise>
<let>
<var n="debug1"/>
<lit v="otherwise3"/>
</let>
</otherwise>
              </choose>
              <let>
                <var n="treu_ref"/>
                <lit v=""/>
              </let>
<let>
<var n="debug2"/>
<lit v="hola-2-2"/>
</let>
<let>
<var n="debug1"/>
<lit v="otherwise4"/>
</let>
            </otherwise>
          </choose>
        </when>
<otherwise>
<let>
<var n="debug1"/>
<lit v="otherwise5"/>
</let>
</otherwise>
      </choose>
    </def-macro>

    <def-macro n="control_ref_aux" npar="3">
      <!-- canvia el lema dels verbs ref i elimina el prn si cal-->
      <let>
        <var n="treu_ref"/>
        <lit v=""/>
      </let>
      <choose>
        <!-- prn ref?...-->
        <when>
          <test>
            <or>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="tipoenc_pro"/>
                  <lit-tag v="ref.p3.mf.sp"/>
                </equal>
                <or>
                  <equal>
                    <clip pos="2" side="sl" part="pers"/>
                    <lit-tag v="p3"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </or>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
            </or>
          </test>
          <choose>
            <!-- canvia aquests verbs-->
            <when>
              <test>
                <in caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <list n="verbs_ref"/>
                </in>
              </test>
              <choose>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="enamorar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="tomber# amoureux"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="aficionar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="prendre# goût"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="incautar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="saisir"/>
                  </let>
                </when>
		<when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="despedir"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="dire# au revoir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="posicionar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="prendre# position"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="estrenar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="débuter"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="concienciar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="prendre# conscience"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="codear# con"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="côtoyer"/>
                  </let>
                </when>
              </choose>
              <let>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </let>
            </when>
            <otherwise>
              <choose>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="acordar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="rappeler"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="ilusionar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="réjouir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="agazapar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="tapir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="apelotonar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="agglutiner"/>
                  </let>
                </when>
              </choose>
              <let>
                <var n="treu_ref"/>
                <lit v=""/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="firstWord" npar="1">
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="sl" part="a_np_acr"/>
	      <lit v=""/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <var n="EOS"/>
		  <lit v="true"/>
		</equal>
	      </test>
	      <modify-case>
		<clip pos="1" side="tl" part="lem"/>
		<lit v="aa"/>
	      </modify-case>
	      <let>
		<var n="caseFirstWord"/>
		<lit v="Aa"/>
	      </let>
	    </when>
	  </choose>
	</when>
	<otherwise>
	  <let>
	    <var n="caseFirstWord"/>
	    <lit v="aa"/>
	  </let>
	</otherwise>
      </choose>
      <let>
	<var n="EOS"/>
	<lit v="false"/>
      </let>
    </def-macro>

    <def-macro n="correccion_lo" npar="1"> <!-- cambia lo<prn><tn><mf> a prpers<prn><pro><p3><m> -->
      <choose>
	<when>
	  <test>
	    <and>
	      <equal>
	        <clip pos="1" side="sl" part="lem"/>
		<lit v="lo"/>
	      </equal>
	      <equal>
	        <clip pos="1" side="sl" part="tipus_prn"/>
		<lit-tag v="tn"/>
	      </equal>
	    </and>
	  </test>
	  <let>
          <clip pos="1" side="tl" part="whole"/>
	  <concat>
	    <lit v="prpers"/>
	    <lit-tag v="prn.obj.p3.m.sg"/>
	  </concat>
	  </let>
	</when>
      </choose>
    </def-macro>


    <def-macro n="default_nombro" npar="0"> <!-- ŝanĝas nombre al sg, se ĝi estas ND aŭ sp -->
      <choose>
	<when>
	  <test>
	    <or>
	      <equal>
	        <var n="nombre"/>
		<lit-tag v="ND"/>
	      </equal>
	      <equal>
	        <var n="nombre"/>
		<lit-tag v="sp"/>
	      </equal>
	      <equal>
	        <var n="nombre"/>
		<lit-tag v=""/>
	      </equal>
	    </or>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
      </choose>
    </def-macro>


    <def-macro n="nombro1" npar="1">
      <let>
	<var n="nombre"/>
	<lit v=""/>
      </let>
      <choose>
	<when>
	  <test>
	    <not>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v=""/>
	      </equal>
	    </not>
<!--
	    <or>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </or>
-->
	  </test>
	  <let>
	    <var n="nombre"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</when>
      </choose>
    </def-macro>

    <def-macro n="nombro2" npar="2">
	<!-- par1 = NOM (prioritata), par2 = DET/ADJ (malprioritata); eliro: nombre -->
	<!-- ĝi ŝanĝas <clip pos="1" side="tl" part="nbr"/> por eventuala konsulto en makrooj nombro3, 4 ktp. -->
      <let>
	<var n="nombre"/>
	<lit v=""/>
      </let>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="nbr"/>
	    </equal>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <clip pos="2" side="tl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <or>
	        <equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="ND"/>
	        </equal>
	        <equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
	        </equal>
	      </or>
	      <or>
	        <equal>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="sg"/>
	        </equal>
	        <equal>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="pl"/>
	        </equal>
	      </or>
	    </and>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="nbr"/>
	    <clip pos="2" side="tl" part="nbr"/>
	  </let>
	  <let>
	    <var n="nombre"/>
	    <clip pos="2" side="tl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <or>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	    </or>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="nombre"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</otherwise>
      </choose>
    </def-macro>

    <def-macro n="nombro3" npar="3"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
	<call-macro n="nombro2">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
    </def-macro>

    <def-macro n="nombro4" npar="4"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
	<call-macro n="nombro3">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="1"/>
	  <with-param pos="4"/>
	</call-macro>
    </def-macro>

    <def-macro n="nombro5" npar="5"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
	<call-macro n="nombro4">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
    </def-macro>

    <def-macro n="nombro6" npar="6"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
	<call-macro n="nombro5">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="1"/>
	  <with-param pos="6"/>
	</call-macro>
    </def-macro>

    <def-macro n="nom_cas" npar="1"> <!-- EO: marca els SN que si són objecte estaran en acusatiu (les regles del t2x s'encarreguen; també marca els dets interrogatius 'quin' per a tractar-los al t2x)-->
	<choose>
  	<when>
    	<test>
	<or>
      	   <in>
         	<clip pos="1" side="tl" part="lem"/>
         	<list n="detsprep"/> <!-- llista de dets amb preposició (quantificadors) -->
      	   </in>
      	   <in>
         	<clip pos="1" side="sl" part="lem"/>
         	<list n="quien"/> <!-- per a pronoms  -->
      	   </in>
	</or>
    	</test>
      	<let>
		<var n="changecase"/>
		<lit-tag v="sense"/>
      	</let>
  	</when>

  	<when>
    	<test>
      	   <in>
         	<clip pos="1" side="sl" part="lem"/>
         	<list n="quin"/> <!-- per a determinats interrogatius (van davant del verb) -->
      	   </in>
    	</test>
      	<let>
		<var n="changecase"/>
		<lit-tag v="nomi2"/>
      	</let>
  	</when>
  	<otherwise>
      	<let>
		<var n="changecase"/>
		<lit-tag v="nom"/>
      	</let>
  	</otherwise>
	</choose>
      	<let>
		<var n="case"/>
		<lit-tag v="nom"/>
      	</let>
    </def-macro>

    <def-macro n="nombre_nom" npar="1">
      <let>
	<var n="nombre"/>
	<lit v=""/>
      </let>
      <choose>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="sl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="sl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <lit-tag v="sp"/>
	  </let>
	</when>
       <when>
	<test>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
          </test>
          <let>
            <var n="nombre"/>
            <lit-tag v="sg"/>
          </let>
        </when>

	<otherwise>
	  <let>
	    <var n="nombre"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</otherwise>
      </choose> 
    </def-macro>

    <def-macro n="nombre_nom2" npar="1">
      <let>
	<var n="nombre2"/>
	<lit v=""/>
      </let>
      <choose>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="sl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="nombre2"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="sl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="nombre2"/>
	    <lit-tag v="sp"/>
	  </let>
	</when>
       <when>
	<test>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
          </test>
          <let>
            <var n="nombre2"/>
            <lit-tag v="sg"/>
          </let>
        </when>

	<otherwise>
	  <let>
	    <var n="nombre2"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</otherwise>
      </choose> 
    </def-macro>

    <def-macro n="set_temps" npar="1">
        <choose>
              <when>  <!-- traduccions a present -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pres"/> <!-- present -->
                </let>
              </when>
              <when>           <!-- traduccions a passat -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
              </when>

              <when>           <!-- traduccions a futur -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
              </when>

              <when>           <!-- traduccions a condicional -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
              </when>

              <when>           <!-- traduccions a gerundi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="ger"/>
                </let>
              </when>
            </choose>
    </def-macro>

    <def-macro n="set_temps2" npar="2">
	    <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
		  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/><!--digué -->
                    </equal>
		</or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
	     </choose>
    </def-macro>

  </section-def-macros> 

  <section-rules>




<!--*************************************** REGLES DE SN ******************************************** -->


<rule comment="REGLA: ANTROPÒNIM (Barcelona)">
      <pattern>
	<pattern-item n="ant"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="1" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="ant" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ART ANTROPÓNIMO (La María - María; se elimina el artículo)">
      <pattern>
	<pattern-item n="def"/>
	<pattern-item n="ant"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="2" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="ant" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ART TOPÓNIMO (Los Pirineos - Pireneoj; se elimina el artículo)">
      <pattern>
	<pattern-item n="def"/>
	<pattern-item n="loc"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="2" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <lit-tag v="np"/>
	      <lit-tag v="loc"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: todo TOPÓNIMO (toda Europa -> la tuta Eŭropo)">
      <pattern>
	<pattern-item n="tot"/>
	<pattern-item n="loc"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="2" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	    </tags>
	    <lu>
	      <lit v="la tuta"/>
	      <lit-tag v="det"/>
	      <lit-tag v="ind"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b/>   
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <lit-tag v="np"/>
	      <lit-tag v="loc"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<!-- KOMENCO DATOJ -->

<rule comment="REGLA: NUM-NUM DE MES (2-3 de juliol -> 2an-3an de julio)">
      <pattern>
        <pattern-item n="num_dato"/>
	<pattern-item n="guio"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: NUM-NUM DE MES DE ANY (2-3 de juliol de 1930 -> 2an-3an de julio 1930)">
      <pattern>
        <pattern-item n="num_dato"/>
	<pattern-item n="guio"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_num"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: NUM DE MES (2 de juliol -> 2an de julio)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: DET NUM DE MES (el 2 de juliol -> la 2an de julio)">
      <pattern>
        <pattern-item n="el_det_ms"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: NUM DE MES DE ANY (2 de juliol de 1930 -> 2an de julio 1930)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: DET NUM DE MES DE ANY (el 2 de juliol de 1930 -> la 2an de julio de 1930)">
      <pattern>
        <pattern-item n="el_det_ms"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_num"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: PREP NUM DE MES (de 2 de juliol -> de 2a de julio)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
          <b pos="1"/>
          <chunk name="dato">
            <tags>
              <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: PREP NUM DE MES DE ANY (de 2 de juliol de 1930 -> de 2a de julio 1930)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
          <b pos="1"/>
          <chunk name="dato">
            <tags>
              <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_num"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<!-- FINO KOMENCO DATOJ -->


<rule comment="REGLA: NOMda DE (millón de -> miliono da)">
      <pattern>
	<pattern-item n="nom_da"/>
	<pattern-item n="de"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   <!--<clip pos="1" side="tl" part="whole"/> Per a compostos: -->
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
 	  <b pos="1"/>
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <lit v="da"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: ART NOM más ADJ (EOes, más -> plej ex: la casa más grande -> la plej granda domo)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="nom"/>
	<pattern-item n="mas"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte --> 
	  <with-param pos="1"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="3"/>
	    <lu>     
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: ART más ADJ (EOes, más -> plej ex: la más grande -> la plej granda)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="mas"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte --> 
	  <with-param pos="1"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="pli_plej">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>

	  </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ART NOM más ADJ de (EOes, más -> plej ex: la casa más grande de -> la plej granda domo el)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="nom"/>
	<pattern-item n="mas"/>
	<pattern-item n="adj"/>
	<pattern-item n="de"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte --> 
	  <with-param pos="1"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="3"/>
	    <lu>     
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
          <b pos="4"/>
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <lit v="el"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: ART más ADJ de (EOes, más -> plej ex: la más grande de -> la plej granda el)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="mas"/>
	<pattern-item n="adj"/>
	<pattern-item n="de"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte --> 
	  <with-param pos="1"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="pli_plej">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	  </chunk>
          <b pos="3"/>
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <lit v="el"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ART mejor (EOes, más -> plej ex: la mejor -> la plej bona)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="mejor"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte --> 
	  <with-param pos="2"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	  </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: LO ADJ (EOes, lo bueno -> tio bona, lo mejor -> tio plej bona)">
      <pattern>
	<pattern-item n="lo_det"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte --> 
	  <with-param pos="2"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <lit-tag v="prn.tn.sg.4"/>
	    </lu> 
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	  </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ART mejor de (EOes, más -> plej ex: la mejor de -> la plej bona el)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="mejor"/>
	<pattern-item n="de"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte --> 
	  <with-param pos="2"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	  </chunk>
          <b pos="2"/>
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <lit v="el"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: LO mejor de (EOes, lo mejor de -> tio plej bona el)">
      <pattern>
	<pattern-item n="lo_det"/>
	<pattern-item n="mejor"/>
	<pattern-item n="de"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte --> 
	  <with-param pos="2"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <lit-tag v="prn.tn.sg.4"/>
	    </lu> 
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	  </chunk>
          <b pos="2"/>
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <lit v="el"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM (EOes ex. los libros, las casas -> la libroj, la domoj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte --> 
	  <with-param pos="1"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>

   <choose>
     <when>   <!-- article indefinit s'elimina -->
      <test>
       <or>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXcierto"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXalguno"/>
        </equal>
       </or>
      </test>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>

<otherwise>           <!-- altres (amb cas)-->

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>     
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



<rule comment="REGLA: DET NUM (EOes, ex. las dos , estos tres -> la du, ĉi tiuj tri)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM (EOes, ex. las dos chicas, estos tres libros -> la du knaboj, ĉi tiuj tri libroj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>-->

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num_nom1" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: QNT DET NOM (EOes, todos los niños-> ĉiuj knaboj; la majoria de los niños -> la plimulto da knaboj)">
      <pattern>
	<pattern-item n="tot"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'todas las niñas : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratius i altres -->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADJ NOM (EO) grans persones -> grandaj homoj">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>	
	<out>  
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM (EOes) el mismo chico; una gran persona -> la sama knabo, granda homo">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/> 
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>  
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/> 
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADJ NOM (EOes) nuestra casa">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out>  
	  <chunk name="adj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET ADV ADJ NOM (EO) la plus grande variété -> la plej granda vario">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
	<call-macro n="pli_plej">
	  <with-param pos="2"/>
	</call-macro>
     </when>
   </choose>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genere"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genere"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET ADV ADJ NOM ADJ (EO) la plus grande variété animale -> la plej granda besta vario">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
	<call-macro n="pli_plej">
	  <with-param pos="2"/>
	</call-macro>
     </when>
   </choose>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genere"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genere"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ (EOes, aquella casa grande, un libro interesante, algunos coches viejos -> tiu granda domo, interesa libro, iuj verdaj aŭtoj)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<out>  
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM-NOM ADJ (EO, aquella ciudad-jardín moderna -> tiu moderna urbo-ĝardeno, para evitar *tiu urbo-moderna ĝardeno)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>       
	    <b pos="2"/>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="3"/>
	    <lu>       
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/> 
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<out>  
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="3"/>
	    <lu>       
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/> 
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ-ADJ (EO, la clase media-alta -> la meza-alta klaso para evitar *la meza klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="whole"/> 
	    </lu>
	    <b pos="4"/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>       
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<out>  
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="whole"/> 
	    </lu>
	    <b pos="4"/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ ADJ-ADJ (EO, la clase socia media-alta -> la meza-alta socia klaso para evitar *la meza socia klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu>   
	      <clip pos="5" side="tl" part="whole"/> 
	    </lu>
	    <b pos="5"/>
	    <lu>   
	      <clip pos="6" side="tl" part="lemh"/> 
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>       
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<out>  
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu>   
	      <clip pos="5" side="tl" part="whole"/> 
	    </lu>
	    <b pos="5"/>
	    <lu>   
	      <clip pos="6" side="tl" part="lemh"/> 
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ-UNK (EO, aquella classe mitjana-alta -> tiu meza-alta klaso, per evitar *tiu meza klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>       
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ ADJ-UNK (EO, aquella classe social mitjana-alta -> tiu meza-alta socia klaso, per evitar *tiu meza socia klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro3">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>   
	      <clip pos="5" side="tl" part="whole"/>
	    </lu>
	    <b pos="5"/>
	    <lu>   
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>       
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>   
	      <clip pos="5" side="tl" part="whole"/>
	    </lu>
	    <b pos="5"/>
	    <lu>   
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ-ADJ-UNK (EO, el diccionari català-valencià-balear -> la kataluna-valencia-baleara vortaro, per evitar *la kataluna-valencia vortaro-baleara)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>   
	      <clip pos="6" side="tl" part="whole"/>
	    </lu>
	    <b pos="6"/>
	    <lu>   
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>       
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>   
	      <clip pos="6" side="tl" part="whole"/>
	    </lu>
	    <b pos="6"/>
	    <lu>   
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ-UNK (EO, classe mitjana-alta -> meza-alta klaso, per evitar *meza klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ ADJ-UNK (EO, classe social mitjana-alta -> meza-alta socia klaso, per evitar *meza socia klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b pos="4"/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ-ADJ-UNK (EO, diccionari català-valencià-balear -> kataluna-valencia-baleara vortaro, per evitar *kataluna-valencia vortaro-baleara)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
	    <b pos="5"/>
	    <lu>   
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM NOM ADJ (EOes, ex. aquellas tres casas pequeñas, los tres libros viejos, todos los coches grandes -> tiuj tri malgrandaj domoj, la tri malnovaj libroj, ĉiuj grandaj aŭtoj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="3"/>
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: QNT DET NOM ADJ (EOes, ex. todos los coches blancos -> ĉiuj blankaj aŭtoj)">
      <pattern>
	<pattern-item n="tot"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratiu (dividim el SN en tot/ĉiu + PP(le ...)-->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	  </chunk>
 	    <b/>
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <lit v="el"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
 	    <b/>
	  <chunk name="det_nom_adj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="2"/>
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADV ADJ (EOes, una niña extremadamente bonita -ekstreme bela knabino )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>-->
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>

	<out>  
	  <chunk name="nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lem"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>         
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>       
  </when>
  <otherwise>
	<out>  
	  <chunk name="det_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lem"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>         
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM ADV ADJ (EO, ex. las dos casas tan altas -> la du domoj tiel altaj - mantenim l'ordre perquè en comparacions hi ha a vegades problemes: otra diez veces más pesada -> #alia dek pli peza fojoj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
	    </lu> 
	    <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
	    <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADV ADJ conj ADJ (EO, una noia molt maca i simpàtica ; una noia increïblement maca i simpàtica -> tre bela kaj simpatia knabino; nekredeble bela kaj simpatia knabino)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>

	<out>  
	  <chunk name="nom_adv_adj_coo_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="5" side="tl" part="whole"/> 
	    </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="6" side="tl" part="lemh"/> 
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu>         
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>       
  </when>
  <otherwise>
	<out>  
	  <chunk name="det_nom_adv_adj_coo_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>   
	      <clip pos="5" side="tl" part="whole"/> 
	    </lu>
	    <b pos="4"/>
	    <lu>   
	      <clip pos="6" side="tl" part="lemh"/> 
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="5"/>
	    <lu>         
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ conj ADJ (EOes, coordinació d'adjectius modificant el mateix nom, ex. una mujer alta y delgada  -> alta kaj maldika virino)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>		
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	    <out> 
	      <chunk name="nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="3" side="tl" part="lem"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="1"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/> 
		</lu>
		<b pos="2"/>
		<lu>   
		  <clip pos="5" side="tl" part="lem"/> 
		  <clip pos="5" side="tl" part="a_adj"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="3"/>
		<lu>       
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
</when>
<otherwise>           <!-- article definit-->
	    <out> 
	      <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
		  <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu>
		<b pos="1"/>
		<lu>   
		  <clip pos="3" side="tl" part="lem"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="2"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/> 
		</lu>
		<b pos="3"/>
		<lu>   
		  <clip pos="5" side="tl" part="lem"/> 
		  <clip pos="5" side="tl" part="a_adj"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="4"/>
		<lu>       
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM NOM ADJ conj ADJ (EOes, coordinació d'ajectius las dos mujeres altas y delgadas -> la du altaj kaj maldikaj virinoj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>		
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	    <out> 
	      <chunk name="nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="3" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
	    <lu>   
	      <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
	    </lu> 
	    <b/>
		<b pos="1"/>
		<lu>   
		  <clip pos="4" side="tl" part="lem"/> 
		  <clip pos="4" side="tl" part="a_adj"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="2"/>
		<lu>
		  <clip pos="5" side="tl" part="whole"/> 
		</lu>
		<b pos="3"/>
		<lu>   
		  <clip pos="6" side="tl" part="lem"/> 
		  <clip pos="6" side="tl" part="a_adj"/>
		  <clip pos="6" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="4"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
</when>
<otherwise>           <!-- article definit-->
	    <out> 
	      <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="3" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
		  <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu>
		<b pos="1"/>
            	<lu>
              	<clip pos="2" side="tl" part="lem"/>
              	<clip pos="2" side="tl" part="a_det"/>
              	<clip pos="2" side="tl" part="nbr"/>
            	</lu>
		<b pos="2"/>
		<lu>   
		  <clip pos="4" side="tl" part="lem"/> 
		  <clip pos="4" side="tl" part="a_adj"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="3"/>
		<lu>
		  <clip pos="5" side="tl" part="whole"/> 
		</lu>
		<b pos="4"/>
		<lu>   
		  <clip pos="6" side="tl" part="lem"/> 
		  <clip pos="6" side="tl" part="a_adj"/>
		  <clip pos="6" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="5"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<!--
x- feia més mal que bé x-
x- canvio els comentaris interiors per x- en comptes de doble guió per qüestions sintàctiques x-
<rule comment="REGLA: DET NOM DE NOM ADJ (EOes)(pertenece a las sreglas de formación de compuestos, en este caso queremos evitar la formación del compuesto ya que tenemos un adjetivo ex. los animales de zonas cálidas -> la besto de varmaj zonoj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!x- assigna cas nominatiu per defecte x-> 
	  <with-param pos="1"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>

   <choose>
     <when>   <!x- article indefinit s'elimina x->
      <test>
       <or>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXcierto"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXalguno"/>
        </equal>
       </or>
      </test>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
	 </chunk>
	    <b pos="1"/>
         <chunk name="de">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
	    <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	  </chunk>
	    <b pos="2"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>

<otherwise>           <!x- altres (amb cas)x->

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
            <b pos="1"/>

            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
	    </chunk>
	    <b pos="2"/>
            <chunk name="de">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
	    <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    </chunk>
	    <b pos="3"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM DE NOM (EOes)(pertenece a ala reglas de formación de compuestos a aprtir de  N+de+N, ex. un libro de consulta -> konsultolibro)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!x- assigna cas nominatiu per defecte x-> 
	  <with-param pos="1"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>

   <choose>
     <when>   <!x- article indefinit s'elimina x->
      <test>
       <or>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXcierto"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXalguno"/>
        </equal>
       </or>
      </test>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <!x-<b pos="1"/> de fet formem un compostx-> 
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>

<otherwise>           <!x- altres (amb cas)x->

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
 <!x-           <b pos="2"/>x->
	    <lu>     
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM DE NOM ADJ (EOes)(pertenece a las reglas de formación de compuestos a partir de  N+de+N, en este caso NO queremos el compuesto)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!x- article indefinit s'eliminax->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
	    </chunk>
	    <b pos="1"/>
         <chunk name="de">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
            <b pos="2"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!x- article definitx->
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>     
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    </chunk>
	    <b pos="1"/>
         <chunk name="de">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
            <b pos="2"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
	    <lu>     
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM NOM DE NOM (EO)(regla de formación de compuestos a partir de  N+de+N), los dos libros de consulta -> la du konsultolibroj">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!x- article indefinit s'eliminax->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
	    <!x-<b pos="2"/>x->
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!x- article definitx->
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>     
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <!x-<b pos="3"/>x->
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: QNT DET NOM DE NOM ADJ (EOes)(pertenece a las rfelgas de formación de compuestos a partir de  N+de+N, en este caso NO queremos que se forme el compuesto)">
      <pattern>
	<pattern-item n="tot"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!x- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinojx->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
	    </chunk>
	    <b pos="1"/>
         <chunk name="de">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
            <b pos="2"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!x- demostratius i altres x->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>     
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    </chunk>
            <b pos="1"/>
         <chunk name="de">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
            <b pos="2"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
	    <lu>     
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: QNT DET NOM DE NOM (EOes)(pertence a las regla de formación  de compuestos a partir de  N+de+N)">
      <pattern>
	<pattern-item n="tot"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!x- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinojx->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
	    <!x-<b pos="2"/>x->
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!x- demostratius i altres x->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>     
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <!x-<b pos="3"/>x->
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM DE NOM (EOes) (pertenece a las relgas de formación de compuestos a partir de  N+de+N)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!x- article indefinit s'eliminax->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/> 
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <!x-<b pos="2"/>x->
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/> 
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
    </when>
<otherwise>           <!x- article definitx->
	<out>  
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/> 
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <!x-<b pos="3"/>x->
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/> 
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
-->

<rule comment="REGLA: NOM (per a col·locar la cua en les multiparaules amb g (EO)">
      <pattern>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   <!--<clip pos="1" side="tl" part="whole"/> Per a compostos: --> 
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ (EOes, sintagmes nominals sense especificadors)">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out> 
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/> 
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM-NOM ADJ (EO, ciutat-jardí moderna -> moderna urbo-ĝardeno, per evitar *urbo-moderna ĝardeno)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>	
	<out> 
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/> 
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
	    <b pos="2"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/> 
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ-ADJ (EO, clase media-alta -> meza-alta klaso para evitar *meza klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out> 
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    <b pos="3"/>
	    <lu>       
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/> 
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ ADJ-ADJ (EO, clase social media-alta -> meza-alta socia klaso para evitar *meza socia klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out> 
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b pos="4"/>
	    <lu>       
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/> 
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADJ ADJ (Federació Anarquista Ibèrica -> Iberia Anarkiisma Federacio)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<out>  
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM ADJ (el gran parc industrial -> la granda industria parko)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/> 
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>  
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/> 
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ ADJ (EOes, sintagmes nominals sense especificadors)">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out> 
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/> 
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
    

<rule comment="REGLA: ADJ NOM ADJ (EO, sintagmes nominals sense especificadors)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>	
	<out> 
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
    

<rule comment="REGLA: NOM ADJ Y ADJ (EOes, sintagmes nominals sense especificadors)">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out> 
	  <chunk name="nom_adj_i_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="4" side="tl" part="lem"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="2"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/> 
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ ADJ ADJ (EO, sintagmes nominals sense especificadors)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out> 
	  <chunk name="nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/> 
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
    
<rule comment="REGLA: DET NOM ADJ ADJ ADJ (les primeres eleccions municipals democràtiques -> la unuaj demokratiaj urbaj elektoj">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<out>  
	  <chunk name="det_nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ, ADJ Y ADJ (els escriptors catalans, gallecs i bascos -> la katalunaj, galegaj kaj eŭskaj verkistoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out> 
	  <chunk name="nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>   
	      <clip pos="6" side="tl" part="lemh"/> 
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/> 
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
    
<rule comment="REGLA: DET NOM ADJ, ADJ Y ADJ (els escriptors catalans, gallecs i bascos -> la katalunaj, galegaj kaj eŭskaj verkistoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>       
	      <clip pos="7" side="tl" part="lemh"/> 
	      <clip pos="7" side="tl" part="a_adj"/>
	      <clip pos="7" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<out>  
	  <chunk name="det_nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/> 
	    </lu> 
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>   
	      <clip pos="7" side="tl" part="lemh"/> 
	      <clip pos="7" side="tl" part="a_adj"/>
	      <clip pos="7" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/> 
	    </lu> 
	    <b/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ, ADJ, ADJ I ADJ (soldats soviétiques, américains, britanniques et français -> sovetiaj, usonaj, britaj kaj francaj soldatoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro5">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	  <with-param pos="6"/>
	  <with-param pos="8"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

	<out>
	  <chunk name="nom_adj_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b/>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="8" side="tl" part="lemh"/>
	      <clip pos="8" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="8" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADJ, ADJ, ADJ I ADJ (les soldats soviétiques, américains, britanniques et français -> la sovetiaj, usonaj, britaj kaj francaj soldatoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro6">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	  <with-param pos="5"/>
	  <with-param pos="7"/>
	  <with-param pos="9"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b/>
            <lu>
              <clip pos="8" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="9" side="tl" part="lemh"/>
	      <clip pos="9" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="9" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b/>
            <lu>
              <clip pos="8" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="9" side="tl" part="lemh"/>
	      <clip pos="9" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="9" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM ADJ ADJ (la primera revista literària flamenca -> la unua flandra literatura revuo)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/> 
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>  
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/> 
	    </lu> 
	    <b pos="4"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/> 
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET ADJ NOM ADJ-ADJ (la deuxième guerre Anglo-néerlandaise -> la dua angla-flandra milito)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro4">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="6"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>       
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
	    <b pos="5"/>
	    <lu>       
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
	    <b pos="5"/>
	    <lu>   
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



<rule comment="REGLA: NOM QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   <!--<clip pos="1" side="tl" part="whole"/> Per a compostos: --> 
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
                <b pos="1"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="1" side="tl" part="nbr"/>
                        <lit-tag v="2"/>
                        </lu>
                        </chunk>

	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM QUE (EOes) el mismo chico; una gran persona -> la sama knabo, granda homo; regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' ">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/> 
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
                <b pos="1"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
                        <lit-tag v="2"/>
                        </lu>
                        </chunk>

	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>  
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/> 
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
                <b pos="1"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
                        <lit-tag v="2"/>
                        </lu>
                        </chunk>

	</out>       
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte --> 
	  <with-param pos="1"/>
	</call-macro> 
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>

   <choose>
     <when>   <!-- article indefinit s'elimina -->
      <test>
       <or>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXcierto"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXalguno"/>
        </equal>
       </or>
      </test>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>

<otherwise>           <!-- altres (amb cas)-->

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>     
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<out>
                <b pos="1"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
	                <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
              		<clip pos="2" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>

	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM QUE (EOes regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>-->

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
	    </lu> 
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num_nom2" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
		<out>
                <b pos="3"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>

	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



<rule comment="REGLA: QNT DET NOM QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu')">
      <pattern>
	<pattern-item n="tot"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratius i altres -->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<out>
                <b pos="3"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	<out>  
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
    </when>
<otherwise>           <!-- article definit-->
	<out>  
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/> 
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<out>
                <b pos="3"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu'  )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="3"/>
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<out>
                <b pos="4"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: QNT DET NOM ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu')">
      <pattern>
	<pattern-item n="tot"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratiu (dividim el SN en tot/ĉiu + PP(le ...)-->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	  </chunk>
 	    <b/>
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <lit v="el"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
 	    <b/>
	  <chunk name="det_nom_adj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="2"/>
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<out>
                <b pos="4"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADV ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu')">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>-->
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>

	<out>  
	  <chunk name="nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lem"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>         
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>       
  </when>
  <otherwise>
	<out>  
	  <chunk name="det_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lem"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>         
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>       
     </otherwise>
      </choose>
	<out>
                <b pos="4"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM ADV ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
	    <lu>   
	      <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
	    </lu> 
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	    <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
	    <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="4"/>
	    <lu>     
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
     </otherwise>
      </choose>
	<out>
                <b pos="5"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ conj ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>		
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	    <out> 
	      <chunk name="nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="3" side="tl" part="lem"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="1"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/> 
		</lu>
		<b pos="2"/>
		<lu>   
		  <clip pos="5" side="tl" part="lem"/> 
		  <clip pos="5" side="tl" part="a_adj"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="3"/>
		<lu>       
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
</when>
<otherwise>           <!-- article definit-->
	    <out> 
	      <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
		  <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu>
		<b pos="1"/>
		<lu>   
		  <clip pos="3" side="tl" part="lem"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="2"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/> 
		</lu>
		<b pos="3"/>
		<lu>   
		  <clip pos="5" side="tl" part="lem"/> 
		  <clip pos="5" side="tl" part="a_adj"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="4"/>
		<lu>       
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
     </otherwise>
      </choose>
	<out>
                <b pos="5"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM NOM ADJ conj ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>		
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
	    <out> 
	      <chunk name="nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="3" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
	    <lu>   
	      <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
	    </lu> 
		<b pos="1"/>
		<lu>   
		  <clip pos="4" side="tl" part="lem"/> 
		  <clip pos="4" side="tl" part="a_adj"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="2"/>
		<lu>
		  <clip pos="5" side="tl" part="whole"/> 
		</lu>
		<b pos="3"/>
		<lu>   
		  <clip pos="6" side="tl" part="lem"/> 
		  <clip pos="6" side="tl" part="a_adj"/>
		  <clip pos="6" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="4"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
</when>
<otherwise>           <!-- article definit-->
	    <out> 
	      <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="3" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
		  <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu>
		<b pos="1"/>
            	<lu>
              	<clip pos="2" side="tl" part="lem"/>
              	<clip pos="2" side="tl" part="a_det"/>
              	<clip pos="2" side="tl" part="nbr"/>
            	</lu>
		<b pos="2"/>
		<lu>   
		  <clip pos="4" side="tl" part="lem"/> 
		  <clip pos="4" side="tl" part="a_adj"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="3"/>
		<lu>
		  <clip pos="5" side="tl" part="whole"/> 
		</lu>
		<b pos="4"/>
		<lu>   
		  <clip pos="6" side="tl" part="lem"/> 
		  <clip pos="6" side="tl" part="a_adj"/>
		  <clip pos="6" side="tl" part="nbr" link-to="3"/>
		  <lit-tag v="4"/>
		</lu> 
		<b pos="5"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
     </otherwise>
      </choose>
	<out>
                <b pos="6"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DE MANERA ADJ (de forma escandalosa -> skandale)">
      <pattern>
        <pattern-item n="de"/>
	<pattern-item n="forma_manera"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="adv"/></tag>
		</tags>
		<lu>   
		  <clip pos="3" side="tl" part="lemh"/> 
	          <lit-tag v="adv"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: DE MANERA ADJ I ADJ (de forma escandalosa i monstruosa -> skandale kaj monstre)">
      <pattern>
        <pattern-item n="de"/>
	<pattern-item n="forma_manera"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="adv"/></tag>
		</tags>
		<lu>   
		  <clip pos="3" side="tl" part="lemh"/> 
	          <lit-tag v="adv"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu>
		<b pos="3"/>   
	    <lu>   
	      <clip pos="4" side="tl" part="whole"/> 
	    </lu>
		<b pos="4"/>   
		<lu>   
		  <clip pos="5" side="tl" part="lemh"/> 
	          <lit-tag v="adv"/>
		  <clip pos="5" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: DE FORMA QUE (de forma que -> tiel ke) (EO)">
      <pattern>
        <pattern-item n="de"/>
	<pattern-item n="forma_manera"/>
	<pattern-item n="cnjcorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
		 <chunk name="adv" case="caseFirstWord">
            		<tags>
            	  	<tag><lit-tag v="adv"/></tag>
            		</tags>
		<lu>
	          <lit v="tiel"/>
                  <lit-tag v="adv"/>
		</lu>   
	      </chunk>
	      <b pos="2"/>
		 <chunk name="cnjsub">
            		<tags>
            	  	<tag><lit-tag v="cnjsub"/></tag>
            		</tags>
		<lu>
	          <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
		</lu>   
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: DE FORMA A INF (de forma a fer -> por fari)">
      <pattern>
        <pattern-item n="de"/>
	<pattern-item n="forma_manera"/>
	<pattern-item n="a"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="4"/>
        </call-macro>
	    <out>
		 <chunk name="pr" case="caseFirstWord">
            		<tags>
            	  	<tag><lit-tag v="PREP"/></tag>
            		</tags>
		<lu>
	          <lit v="por"/>
                  <lit-tag v="pr"/>
		</lu>   
	      </chunk>
	      <b pos="3"/>
                  <chunk name="inf">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="sl" part="temps"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: A EL INF (al encontrar -> trovinte)">
      <pattern>
        <pattern-item n="a"/>
	<pattern-item n="el_det_ms"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>          	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
	    <out>
                  <chunk name="inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
	              <tag><lit-tag v="gerpast"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
	              <lit-tag v="gerpast"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 

<rule comment="REGLA: A EL INF (al haber encontrado -> trovinte)">
      <pattern>
        <pattern-item n="a"/>
	<pattern-item n="el_det_ms"/>
	<pattern-item n="haber_inf"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>          	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
	    <out>
                  <chunk name="inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
	              <tag><lit-tag v="gerpast"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="sep"/>
	              <lit-tag v="gerpast"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 





<rule comment="REGLA: ADJECTIU (quan no acompanya res o va amb desconeguda) (EOes)">
      <pattern>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: PARTICIPI (quan no acompanya res o va amb desconeguda) (EOes)">
      <pattern>
	<pattern-item n="pp"/>
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PP"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu> 
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: MÁS ADJECTIU QUE ('más/menos grande que - ') (EOes)">
      <pattern>
	<pattern-item n="mas"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="adj_comparatiu" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><clip pos="2" side="sl" part="nbr"/></tag>
	          <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="whole"/> 
		</lu> 
		<b pos="1"/>
		<lu>   
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
	          <clip pos="2" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu>
		<b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
		</lu>   
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: MÁS ADV QUE ('más/menos grande que - ') (EOes)">
      <pattern>
	<pattern-item n="mas"/>
	<pattern-item n="adv"/>
	<pattern-item n="cnjcorregir"/>
      </pattern>
      <action>          	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="adv"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="whole"/> 
		</lu> 
		<b pos="1"/>
		<lu>   
		  <clip pos="2" side="tl" part="lemh"/> 
	          <clip pos="2" side="tl" part="a_adv"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu>
		<b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
		</lu>   
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: MEJOR QUE ('mayor/menor que - pli granda/pli malgranda ol') (EOes)">
      <pattern>
	<pattern-item n="mejor"/>
	<pattern-item n="cnjcorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="adj_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SA"/></tag>
	           <tag><clip pos="1" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_adj"/>
	          <clip pos="1" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="1" side="tl" part="lemq"/> 
		</lu> 
		<b pos="1"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
		</lu>   
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: MEJOR NOM QUE ('mayor/menor libertad que - pli granda/pli malgranda libereco ol') (EOes)">
      <pattern>
	<pattern-item n="mejor"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="nom_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SN"/></tag>
	           <tag><clip pos="2" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_adj"/>
	          <clip pos="1" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="1" side="tl" part="lemq"/> 
		</lu> 
		<b pos="1"/>
		<lu>   
	          <clip pos="2" side="tl" part="lemh"/> 
	          <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
	          <clip pos="2" side="tl" part="nbr"/>
	          <lit-tag v="4"/>
	          <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
		</lu>   
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: MEJOR NOM ADJ QUE ('mayor/menor libertad individual que - pli granda/pli malgranda libereco ol') (EOes)">
      <pattern>
	<pattern-item n="mejor"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="nom_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SN"/></tag>
	           <tag><clip pos="2" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_adj"/>
	          <clip pos="1" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="1" side="tl" part="lemq"/> 
		</lu> 
		<b pos="1"/>
		<lu>   
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
	          <clip pos="3" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu>
		<b pos="2"/>
		<lu>   
	          <clip pos="2" side="tl" part="lemh"/> 
	          <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
	          <clip pos="2" side="tl" part="nbr"/>
	          <lit-tag v="4"/>
	          <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
		</lu>   
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: EL MEJOR DE ('el mayor/menor de - la plej granda/plej malgranda el') (EOes)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="mejor"/>
	<pattern-item n="de"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="det_adj_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SA"/></tag>
	           <tag><clip pos="2" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
	        <lu>
	          <clip pos="1" side="tl" part="lem"/> 
	          <clip pos="1" side="tl" part="a_det"/>
	          <clip pos="1" side="tl" part="nbr"/>
	          <lit-tag v="4"/>
	        </lu> 
                <b pos="1"/>
		<lu>   
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
	          <clip pos="2" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu> 
	      </chunk>
	      <b pos="2"/>
	      <chunk name="pr">
	        <tags>
	          <tag><lit-tag v="PREP"/></tag>
	        </tags>
	        <lu>
	          <lit v="el"/>
	          <lit-tag v="pr"/>
	        </lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<!--
Ne funkcias sufiĉe bone: ekz. "el mayor productor de maiz del mundo"
Necesus io simila al "EL MEJOR NOM DE EL", tamen tio fuŝus la analizon de la dua SN
<rule comment="REGLA: EL MEJOR NOM DE ('la mayor/menor libertad de - la plej granda/plej malgranda libereco el') (EOes)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="mejor"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="det_nom_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SN"/></tag>
	           <tag><clip pos="3" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
	        <lu>
	          <clip pos="1" side="tl" part="lem"/> 
	          <clip pos="1" side="tl" part="a_det"/>
	          <clip pos="1" side="tl" part="nbr"/>
	          <lit-tag v="4"/>
	        </lu> 
                <b pos="1"/>
		<lu>   
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
	          <clip pos="2" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu> 
		<b pos="2"/>
		<lu>   
	          <clip pos="3" side="tl" part="lemh"/> 
	          <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
	          <clip pos="3" side="tl" part="nbr"/>
	          <lit-tag v="4"/>
	          <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	      <b pos="3"/>
	      <chunk name="pr">
	        <tags>
	          <tag><lit-tag v="PREP"/></tag>
	        </tags>
	        <lu>
	          <lit v="el"/>
	          <lit-tag v="pr"/>
	        </lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: EL MEJOR NOM ADJ DE ('la mayor/menor libertad individual que - la plej granda/plej malgranda libereco el') (EOes)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="mejor"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="de"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="det_nom_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SN"/></tag>
	           <tag><clip pos="3" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
	        <lu>
	          <clip pos="1" side="tl" part="lem"/> 
	          <clip pos="1" side="tl" part="a_det"/>
	          <clip pos="1" side="tl" part="nbr"/>
	          <lit-tag v="4"/>
	        </lu> 
                <b pos="2"/>
		<lu>   
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
	          <clip pos="2" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu> 
		<b pos="2"/>
		<lu>   
		  <clip pos="4" side="tl" part="lemh"/> 
		  <clip pos="4" side="tl" part="a_adj"/>
	          <clip pos="4" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="4" side="tl" part="lemq"/> 
		</lu>
		<b pos="3"/>
		<lu>   
	          <clip pos="3" side="tl" part="lemh"/> 
	          <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
	          <clip pos="3" side="tl" part="nbr"/>
	          <lit-tag v="4"/>
	          <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	      <b pos="4"/>
	      <chunk name="pr">
	        <tags>
	          <tag><lit-tag v="PREP"/></tag>
	        </tags>
	        <lu>
	          <lit v="el"/>
	          <lit-tag v="pr"/>
	        </lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 
-->


<rule comment="REGLA: MÁS NOM QUE ('más/menos libertad que - pli/malpli da libereco ol') (EOes)">
      <pattern>
	<pattern-item n="mas"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="nom_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SN"/></tag>
	           <tag><clip pos="2" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="whole"/> 
		</lu> 
		<b/>
                <lu>
                  <lit v="da"/>
                  <lit-tag v="pr"/>
                </lu>
		<b pos="1"/>
		<lu>   
	          <clip pos="2" side="tl" part="lemh"/> 
	          <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
	          <clip pos="2" side="tl" part="nbr"/>
	          <lit-tag v="nom"/>
	          <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
		</lu>   
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: MÁS NOM ADJ QUE ('más/menos libertad individual que - pli/malpli da individua libereco ol') (EOes)">
      <pattern>
	<pattern-item n="mas"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="nom_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SN"/></tag>
	           <tag><clip pos="2" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="whole"/> 
		</lu> 
		<b/>
                <lu>
                  <lit v="da"/>
                  <lit-tag v="pr"/>
                </lu>
		<b pos="1"/>
		<lu>   
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
	          <clip pos="3" side="sl" part="nbr"/>
	          <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu>
		<b pos="2"/>
		<lu>   
	          <clip pos="2" side="tl" part="lemh"/> 
	          <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
	          <clip pos="2" side="tl" part="nbr"/>
	          <lit-tag v="nom"/>
	          <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
		</lu>   
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


<rule comment="REGLA: ADV QUE ('más/menos que - ') (EOes)">
      <pattern>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="cnjcorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
                  <chunk name="adv">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
		<b pos="1"/>
                 <lu>
                        <lit v="ol"/>
                        <lit-tag v="cnjcoo"/>
		</lu>   
                  </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 

<rule comment="REGLA: DETERMINANT (perquè no doni error si va davant de desconegudes i no es pot assignar nombre) (EO)">
      <pattern>
	<pattern-item n="det"/>
      </pattern>
      <action>        	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <choose>
     <when>   <!-- article indefinit s'elimina -->
      <test>
       <or>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXcierto"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXalguno"/>
        </equal>
       </or>
      </test>

    </when>

<otherwise>

	<out>  
	  <chunk name="det" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="DET"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu> 
	  </chunk>
	</out>  
     </otherwise>
      </choose>

	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <!-- *************************************** REGLES DE SV *********************************************** -->

<rule comment="REGLA: , VERBhecho QUE (únicament per corregir al tagger quan s'equivoca amb FAKTO i amb KE) (EO)">
      <pattern>
	<pattern-item n="sent_coma"/>
	<pattern-item n="hecho"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>

        <out>
	  <chunk name="cm">
	    <tags>
	      <tag><lit-tag v="sent"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	   <b pos="1"/>
           <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="m"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
                <lit v="fakto"/>
		<lit-tag v="n"/>
		<lit-tag v="sg"/>
	        <lit-tag v="4"/>
            </lu>
           </chunk>
	   <b pos="2"/>
	 <chunk name="relatiu">
            <tags>
            <tag><lit-tag v="SNrelatiu"/></tag>
            <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
                <lit v="kiu"/>
		<lit-tag v="prn"/>
		<lit-tag v="rel"/>
		<lit-tag v="sg"/>
		<lit-tag v="2"/>
            </lu>
          </chunk>
          </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



<rule comment="REGLA: VERB QUE ( únicament per corregir al tagger quan s'equivoca amb el KE) (EOes)">
      <pattern>
	<pattern-item n="verb"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		<b pos="1"/>
		 <chunk name="cnjsub">
            		<tags>
            	  	<tag><lit-tag v="cnjsub"/></tag>
            		</tags>
            		<lu>
              		<lit v="ke"/>
			<lit-tag v="cnjsub"/>
            		</lu>
          		</chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERB ADV QUE ( únicament per corregir al tagger quan s'equivoca amb el KE) (EOes)">
      <pattern>
	<pattern-item n="verb"/>
	<pattern-item n="adv"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		<b pos="1"/>
		  <chunk name="adv">
		    <tags>
		      <tag><lit-tag v="ADV"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		<b pos="2"/>
		 <chunk name="cnjsub">
            		<tags>
            	  	<tag><lit-tag v="cnjsub"/></tag>
            		</tags>
            		<lu>
              		<lit v="ke"/>
			<lit-tag v="cnjsub"/>
            		</lu>
          		</chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERB COMA ADV COMA QUE ( únicament per corregir al tagger quan s'equivoca amb el KE) (EOes)">
      <pattern>
	<pattern-item n="verb"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adv_cnjadv"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		<b pos="1"/>
                 <chunk name="cm">
                        <tags>
                        <tag><lit-tag v="sent"/></tag>
                        </tags>
                        <lu>
                        <lit v=","/>
                        <lit-tag v="cm"/>
                        </lu>
                        </chunk>
		<b pos="2"/>
		  <chunk name="adv">
		    <tags>
		      <tag><lit-tag v="ADV"/></tag>
		    </tags>
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu>
		  </chunk>
                <b pos="3"/>
                 <chunk name="cm">
                        <tags>
                        <tag><lit-tag v="sent"/></tag>
                        </tags>
                        <lu>
                        <lit v=","/>
                        <lit-tag v="cm"/>
                        </lu>
                        </chunk>

		<b pos="4"/>
		 <chunk name="cnjsub">
            		<tags>
            	  	<tag><lit-tag v="cnjsub"/></tag>
            		</tags>
            		<lu>
              		<lit v="ke"/>
			<lit-tag v="cnjsub"/>
            		</lu>
          		</chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: VERBestar + GERUNDI + QUE (per corregir el ke) (estar diciendo que  EOes)">
      <pattern>
	<pattern-item n="estar"/>
	<pattern-item n="ger"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>

                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBestar + ADV + GERUNDI + QUE (per corregir el ke) (estar siempre diciendo que EOes)">
      <pattern>
	<pattern-item n="estar"/>
	<pattern-item n="adv"/>
	<pattern-item n="ger"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out> 
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
 	          <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>

                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: VERBestar_a_punto_de + INF + QUE (per corregir el ke) (estar a punto de que EOes)">
      <pattern>
	<pattern-item n="estarapuntode"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>

                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBacabarde + INF + QUE (per corregir el ke) (acabar de EO)">
      <pattern>
	<pattern-item n="acabarde"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>


                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBestar + GERUNDI (está cantando > kantas, EOes)">
      <pattern>
	<pattern-item n="estar"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBestar + ADV + GERUNDI (estar siempre/constantemente cantando EOes -> ĉiam kantas)">
      <pattern>
	<pattern-item n="estar"/>
	<pattern-item n="adv"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out> 
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
 	          <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="VERBvenirde + INF (vengo de hacer -> mi ĵus faris)">
      <pattern>
	<pattern-item n="venirde"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>

            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
	<choose>
              <when> <!-- korekto: je viens de faire -> mi ĵus faras -> mi ĵus faris -->
                <test>
                    <equal>
                      <clip pos="1" side="tl" part="temps"/>
                      <lit-tag v="pres"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
              </when>
	</choose>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBestar_a_punto_de + INF (está a punto de venir -> estas venonta EOes)">
      <pattern>
	<pattern-item n="estarapuntode"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: HABER VERBvolvera + INF (volver a EOes)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="volvera"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
	    <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="denove"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
                  </chunk>
            </out>
	  <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
	  </let>
      </action>
    </rule>

<rule comment="REGLA: VERBvolvera + INF (volver a EOes)">
      <pattern>
	<pattern-item n="volvera"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="denove"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="denove"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
			<tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: HABER VERBacabarde + INF (acabar de EOes)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="acabarde"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>


                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
	    <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
                  </chunk>
            </out>
	  <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
	  </let>
      </action>
    </rule>

<rule comment="REGLA: VERBacabarde + INF (acabar de EOes)">
      <pattern>
	<pattern-item n="acabarde"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
			<tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: HABER VERBdejarde + INF (dejar de EOes)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="dejarde"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>


                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>

	    <out>
                  <chunk name="verb_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉesi"/>
                      <lit-tag v="vblex"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
            </out>
	  <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
	  </let>
      </action>
    </rule>

<rule comment="REGLA: VERBdejarde + INF (dejar de EOes)">
      <pattern>
	<pattern-item n="dejarde"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉesi"/>
                      <lit-tag v="vblex"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>

                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
			<tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉesi"/>
                      <lit-tag v="vblex"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: HABER VERBparecer + INF (parecer EOes)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="parecer"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>


                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>

	    <out>
                  <chunk name="verb_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉesi"/>
                      <lit-tag v="vblex"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
            </out>
	  <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
	  </let>
      </action>
    </rule>

<rule comment="REGLA: VERBparecer + INF (parecer EOes)">
      <pattern>
	<pattern-item n="parecer"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <lit v="ŝajni"/>
                      <lit-tag v="vblex"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>

                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
			<tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <lit v="ŝajni"/>
                      <lit-tag v="vblex"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBseguir + GER (sigue siendo EOes)">
      <pattern>
	<pattern-item n="seguir"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="duaxre"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="daŭre"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
			<tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBecharse + INF (echarse a cantar/ponerse a cantar EOes)">
      <pattern>
	<pattern-item n="echarse"/>
	<pattern-item n="a"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="3" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
			<tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>

                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<!--
<rule comment="REGLA: VERBdeberde + INF (deber de + inf EOes)">
      <pattern>
	<pattern-item n="deberde"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="eble"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->

<rule comment="REGLA: VERBdeber + DE + INF (deber + de + inf -> debe de comer -> eble manĝas)">
      <pattern>
	<pattern-item n="deber"/>
	<pattern-item n="de"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="eble"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBhayque + INF (hay que + inf EOes)">
      <pattern>
	<pattern-item n="hayque"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <out>
		 <chunk name="prpers" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><lit-tag v="subj"/></tag>
                      <tag><lit-tag v="p1"/></tag>
                      <tag><lit-tag v="mf"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                    </tags>
		    <lu>
                      <lit v="oni"/>
                      <lit-tag v="prn"/>
                      <lit-tag v="tn"/>
                      <lit-tag v="sg"/>
                      <lit-tag v="nom"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		<b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: IR + A + INF (ir a ller -> tuj legos; se traduce a futuro EOes)">
      <pattern>
	<pattern-item n="ir_a"/>
	<pattern-item n="a"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <let>
          <clip pos="3" side="tl" part="temps"/>
          <lit-tag v="fti"/>
        </let>
                <out>

	  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="ADV"/></tag>
                    </tags>
		    <lu>
                      <lit v="tuj"/>
                      <lit-tag v="adv"/>
                    </lu>
	  </chunk>
	  <b/>
	  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERB + ADJ + INF (el ADJ passa a ADV: siempre es interesante leer -> ĉiam estas interese legi EOes)">
      <pattern>
	<pattern-item n="verbcj2"/>
	<pattern-item n="adjADJ"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_adj_inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
	        <b pos="1"/>
                <chunk name="adv">
                        <tags>
                        <tag><lit-tag v="adv"/></tag>
                        </tags>
                        <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="adv"/>
                        </lu>
		</chunk>

                <b pos="2"/>

	    <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="3" side="tl" part="temps"/></tag>
	    </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="sep"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
	    </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: VERB + ADV + ADJ + INF (el ADJ passa a ADV: es muy interesante leer ->  estas tre interese legi EOes)">
      <pattern>
	<pattern-item n="verbcj2"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adjADJ"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
	        <b pos="1"/>


                <chunk name="adv">
                        <tags>
                        <tag><lit-tag v="adv"/></tag>
                        </tags>
	    		<lu>
	      		<clip pos="2" side="tl" part="lem"/>
	      		<clip pos="2" side="tl" part="a_adv"/>
	    		</lu>
	    		<b/>
                        <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="adv"/>
                        </lu>
		</chunk>

                <b pos="2"/>

	    <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="4" side="tl" part="temps"/></tag>
	    </tags>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="sep"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
	    </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="REGLA: VERBhaber + VERBser-pp + PP (kompleksa pasivo: ha estat llegit - estis legita ; forfalas unu helpverbo) (EO)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="ser-pp"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: VERBhaber + VERBser-pp + PP + POR (kompleksa pasivo: ha estat llegit per - estis legita de; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="ser-pp"/>
	<pattern-item n="pp"/>
	<pattern-item n="por"/>
      </pattern>
      <action>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
        <out>
          <b pos="3"/> <!-- ŝanĝo al DE-->
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
        </out>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: VERBhaber + VERBser-pp + PP + POR + INF (kompleksa pasivo: ha estat llegit per riure - estis legita por ridi; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="ser-pp"/>
	<pattern-item n="pp"/>
	<pattern-item n="por"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
        <out>
          <b pos="3"/> <!-- ŝanĝo al POR-->
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
          <b pos="4"/>
	  <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="5" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_verb"/>
	      <clip pos="5" side="tl" part="sep"/>
	      <clip pos="5" side="tl" part="temps" link-to="3"/>
	      <clip pos="5" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
        </out>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: VERBhaber + VERBser-pp + PP + ADV + POR (kompleksa pasivo: ha estat llegit també per - estis legita ankaŭ de; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="ser-pp"/>
	<pattern-item n="pp"/>
	<pattern-item n="adv"/>
	<pattern-item n="por"/>
      </pattern>
      <action>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
        <out>
          <b pos="3"/>
	  <chunk name="adv">
	    <tags>
	      <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="4" side="tl" part="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lem"/>
	      <clip pos="4" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
          <b pos="4"/> <!-- ŝanĝo al DE-->
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
        </out>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: VERBhaber + VERBser-pp + PP + ADV + POR + INF (kompleksa pasivo: ha estat llegit també per riure - estis legita ankaŭ por ridi; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="ser-pp"/>
	<pattern-item n="pp"/>
	<pattern-item n="adv"/>
	<pattern-item n="por"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
        <out>
          <b pos="3"/>
	  <chunk name="adv">
	    <tags>
	      <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="4" side="tl" part="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lem"/>
	      <clip pos="4" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
          <b pos="4"/> <!-- ŝanĝo al POR-->
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
          <b pos="5"/>
	  <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="6" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/> 
	      <clip pos="6" side="tl" part="a_verb"/>
	      <clip pos="6" side="tl" part="sep"/>
	      <clip pos="6" side="tl" part="temps" link-to="3"/>
	      <clip pos="6" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
        </out>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>






    <rule comment="REGLA: ADV ADJECTIU ('muy/poco//bastante//increiblemente grande - ') (EOes)">
      <pattern>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>          	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	    <out>
	      <chunk name="adv_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><clip pos="2" side="sl" part="nbr"/></tag>
	          <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="whole"/> 
		</lu> 
		<b pos="1"/>
		<lu>   
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
	          <clip pos="2" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 

    <rule comment="REGLA: VERB conjugat ( pinto ) (EO)">
      <pattern>
	<pattern-item n="verbcj"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>

                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PRON VERB reflexiu ( me caso ) (EO)">
	<!-- de moment també entren coses com "le caso" com si fossin reflexives -->
      <pattern>
<!-- Perquè no entri ni en broma -->
<pattern-item n="prnpro"/>
<pattern-item n="prnpro"/>
<pattern-item n="prnpro"/>
<pattern-item n="prnpro"/>
	<pattern-item n="prnpro"/>
	<pattern-item n="verbcj"/>
      </pattern>
      <action>    	
<let>
<var n="debug1"/>
<lit v="en regla"/>
</let>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="control_ref">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
<b pos="1"/>		<!-- PROVIZORE, ĉar en la malnova versio aperis blanko kaj tiel evidentiĝas kio ŝanĝiĝas kaj kio ne ŝanĝiĝas per ĉi tiu nova regulo -->
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="sl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<!--
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
-->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
<!--
No sé com, però això fa que la segona paraula de la frase no surti en majúscula
-->
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PRON VERB ( lo como -> manĝas lin ) ">
      <pattern>
	<pattern-item n="pro"/>
	<pattern-item n="verbcj"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="correccion_lo">
          <with-param pos="1"/>
        </call-macro>
	<call-macro n="nombro1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="sl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
		  <chunk name="pro_obj">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="tl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PARA + INF (EOes regla exlusivamente para error del tagger">
      <pattern>
	<pattern-item n="verbprep_para"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

	<out>
	  <chunk name="por" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
	</chunk>
	<b pos="1"/>
          <chunk name="verb_inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="sl" part="pers"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
	 </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: PARA INF_IMP + ENCL + ENCL + INF (EOes exclusivamente para el tagger- )">
      <pattern>
	<pattern-item n="verbprep_para"/>
        <pattern-item n="inf_imp"/>
        <pattern-item n="enc"/>
        <pattern-item n="enc"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

	<out>
          <chunk name="por" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
        </chunk>
        <b pos="1"/>
	</out>
        <out> <!-- primer pintem els vebrs -->
          <chunk name="verb_enc_inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="sl" part="pers"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
             <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="sep"/>
              <clip pos="5" side="tl" part="temps"/>
              <clip pos="5" side="tl" part="lemq"/>
             </lu>

          </chunk>
         <b/>
        </out>

                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="4" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="4" side="sl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="gen"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
	              <clip pos="4" side="tl" part="lem"/>
		      <clip pos="4" side="tl" part="a_prn"/>
		      <clip pos="4" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="4" side="sl" part="pers"/>
		      <clip pos="4" side="tl" part="gen"/>
		      <clip pos="4" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
     <!-- Si el primer clitic és SE: l'eliminem; si no el fem objecte indirecte (eliminem les formes SE ja que estadísticament sembla justificat, la majoria de vegades són benefactius, etc...-->

          <choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                      <clip pos="3" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: objecte indirecte (passa a 'subj' per agafar nominatiu i s'afegeix la prep 'al') -->
                <let>
                  <clip pos="3" side="tl" part="tipus_prn"/>
                  <lit-tag v="subj"/>
                </let>
                <out>
                  <b pos="2"/>
                  <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SP"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="3" side="sl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PARA INF_IMP + ENCL + INF (EOes; exclusivamente para el tagger poderlos comprar; EO- )">
      <pattern>
        <pattern-item n="verbprep_para"/>
        <pattern-item n="inf_imp"/>
        <pattern-item n="enc"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="por" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
        </chunk>
        <b pos="1"/>
        </out>
        <out> <!-- primer pintem els vebrs -->
          <chunk name="verb_enc_inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="sl" part="pers"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
             <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
             </lu>

          </chunk>
        </out>

          <choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                      <clip pos="3" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: objecte indirecte (passa a 'subj' per agafar nominatiu i s'afegeix la prep 'al') -->
                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="3" side="sl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                    </tags>
                    <b pos="3"/>
                    <lu>
	              <clip pos="3" side="tl" part="lem"/>
		      <clip pos="3" side="tl" part="a_prn"/>
		      <clip pos="3" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="3" side="sl" part="pers"/>
		      <clip pos="3" side="tl" part="gen"/>
		      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: VERB conjugat + INF (quería cantar; EOes)">
      <pattern>
	<pattern-item n="verbcj"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <!--<call-macro n="tipus_verb2">
          <with-param pos="2"/>
        </call-macro>-->
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

	<out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
	    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    

    <rule comment="REGLA: HABER + PP (él ha leído aquel libro -> Li legis tiun libron; traducido a pasado) (EOes)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="pp"/> 
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
	              <tag><lit-tag v="gerpast"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="haya"/><!--TAGGER-->
                    </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="prs"/></tag>
                      <tag><lit-tag v="p3"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

	    <otherwise>
	    <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fts"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
		  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/><!--digué -->
                    </equal>
		</or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
	     </choose>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: HABER + PP + QUE (ha dicho que -> diris ke;  para corregir el KE) (EOes)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="pp"/> 
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>

                </out>
          </when>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="haya"/><!--TAGGER-->
                    </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="prs"/></tag>
                      <tag><lit-tag v="p3"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>

                </out>
          </when>
	    <otherwise>
	    <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
	     </choose>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>

                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: VERB conjugat + INF + QUE (quería decir que; EOes)">
      <pattern>
	<pattern-item n="verbcj"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <!--<call-macro n="tipus_verb2">
          <with-param pos="2"/>
        </call-macro>-->
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

	<out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="sl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><var n="tipus_verb2"/></tag>

                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
	    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="2"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>
                </out>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: HAVER + PP + INF (ha decidido marchar -> decidis marŝi ) (EOes)">
      <pattern>
	<pattern-item n="haber"/>
	<pattern-item n="pp"/> 
	<pattern-item n="inf"/> 
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
          </when>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="haya"/><!--TAGGER-->
                    </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="prs"/></tag>
                      <tag><lit-tag v="p3"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
          </when>
	    <otherwise>
	    <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
	     </choose>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>




    <rule comment="REGLA: PROCLITIC PROCLITIC VERB conj (se le dijo -> oni diris al li; se lo dijo -> diris ĝin al li; me lo dijo -> diris ĝin al mi')">
      <pattern>
	<pattern-item n="proenc"/>
	<pattern-item n="proenc"/>
	<pattern-item n="verbcj"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
          <choose>
              <when>  <!-- mirem si el primer pronom és SE -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
               <choose>
                <when>  <!-- mirem si el segon pronom és me/te/le/nos/os -->
                  <test>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                  </test>
		  <out> <!-- se le dijo -> oni diris al li -->
		    <chunk name="prn" case="caseFirstWord">
		      <tags>
		        <tag><lit-tag v="SN"/></tag>
		        <tag><lit-tag v="tn"/></tag>
		        <tag><lit-tag v="sg"/></tag>
		        <tag><lit-tag v="nom"/></tag>
		      </tags>
		      <lu>
		        <lit v="oni"/>
		        <lit-tag v="prn"/>
		        <lit-tag v="tn"/>
		        <lit-tag v="3"/>
		        <lit-tag v="4"/>
		      </lu>
		    </chunk>
		    <b pos="2"/>
                    <chunk name="verbcj">
                      <tags>
                        <tag><lit-tag v="SV"/></tag>
                        <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                        <tag><clip pos="3" side="sl" part="temps"/></tag>
                        <tag><clip pos="3" side="tl" part="pers"/></tag>
                        <tag><clip pos="3" side="tl" part="nbr"/></tag>
		        <tag><var n="tipus_verb"/></tag>
		        <tag><var n="tipus_verb2"/></tag>
                      </tags>
                      <lu>
                        <clip pos="3" side="tl" part="lemh"/>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="sep"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="lemq"/>
                      </lu>
		    </chunk>
		    <b pos="1"/>
                    <!-- poso directe perquè si és indirecte, sovint pot funcionar amb directe, però no al revés -->
		    <chunk name="pro_obj">
		      <tags>
		        <tag><lit-tag v="SN"/></tag>
		        <tag><lit-tag v="obj"/></tag>
		        <tag><clip pos="2" side="sl" part="pers"/></tag>
		        <tag><clip pos="2" side="tl" part="gen"/></tag>
		        <tag><clip pos="2" side="tl" part="nbr"/></tag>
		      </tags>
		      <lu>
	                <clip pos="2" side="tl" part="lem"/>
		        <clip pos="2" side="tl" part="a_prn"/>
		        <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
		        <clip pos="2" side="sl" part="pers"/>
		        <clip pos="2" side="tl" part="gen"/>
		        <clip pos="2" side="tl" part="nbr"/>
		      </lu>
		    </chunk>
<!-- amb objecte indirecte
		    <chunk name="pro_indirecte">
		      <tags>
		        <tag><lit-tag v="SP"/></tag>
		        <tag><lit-tag v="subj"/></tag>
		        <tag><clip pos="2" side="sl" part="pers"/></tag>
		        <tag><clip pos="2" side="tl" part="gen"/></tag>
		        <tag><clip pos="2" side="tl" part="nbr"/></tag>
		      </tags>
		      <lu>
		        <lit v="al"/>
		        <lit-tag v="pr"/>
		      </lu>
		      <b pos="1"/>
		      <lu>
	                <clip pos="2" side="tl" part="lem"/>
		        <clip pos="2" side="tl" part="a_prn"/>
		        <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
		        <clip pos="2" side="sl" part="pers"/>
		        <clip pos="2" side="tl" part="gen"/>
		        <clip pos="2" side="tl" part="nbr"/>
		      </lu>
		    </chunk>
-->
		  </out>
		</when>
		<otherwise>
		<out> <!-- se lo dijo -> diris ĝin al mi -->
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="sl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
		  </chunk>
		  <b pos="2"/>
		  <chunk name="pro_directe">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="gen"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="2" side="tl" part="lem"/>
		      <clip pos="2" side="tl" part="a_prn"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="2" side="sl" part="pers"/>
		      <clip pos="2" side="tl" part="gen"/>
		      <clip pos="2" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
		  <b pos="1"/>
		  <chunk name="pro_indirecte">
		    <tags>
		      <tag><lit-tag v="SP"/></tag>
		      <tag><lit-tag v="subj"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="3" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="al"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <lit v="prpers"/>
		      <lit-tag v="prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="3" side="sl" part="nbr"/>
		    </lu>
		  </chunk>
		</out>
                </otherwise>
               </choose>
              </when>
              <otherwise>
		<out> <!-- me lo dijo -> diris ĝin al mi -->
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="sl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
		  </chunk>
		  <b pos="2"/>
		  <chunk name="pro_directe">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="gen"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="2" side="tl" part="lem"/>
		      <clip pos="2" side="tl" part="a_prn"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="2" side="sl" part="pers"/>
		      <clip pos="2" side="tl" part="gen"/>
		      <clip pos="2" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
		  <b pos="1"/>
		  <chunk name="pro_indirecte">
		    <tags>
		      <tag><lit-tag v="SP"/></tag>
		      <tag><lit-tag v="subj"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="al"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
		</out>
              </otherwise>
            </choose>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PROCLITIC PROCLITIC (me los; te los; se la EOes)">
      <pattern>
	<pattern-item n="proenc"/>
	<pattern-item n="proenc"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
          <choose>
              <when>  <!-- mirem si és SE -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
		<out>
		  <chunk name="prn" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><lit-tag v="tn"/></tag>
		      <tag><lit-tag v="sg"/></tag>
		      <tag><lit-tag v="nom"/></tag>
		    </tags>
		    <lu>
		      <lit v="oni"/>
		      <lit-tag v="prn"/>
		      <lit-tag v="tn"/>
		      <lit-tag v="3"/>
		      <lit-tag v="4"/>
		    </lu>
		  </chunk>
		  <b pos="1"/>
		  <chunk name="pro_directe">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="gen"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="2" side="tl" part="lem"/>
		      <clip pos="2" side="tl" part="a_prn"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="2" side="sl" part="pers"/>
		      <clip pos="2" side="tl" part="gen"/>
		      <clip pos="2" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
		</out>
              </when>
              <otherwise>
		<out>
		  <chunk name="pro_directe" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="gen"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="2" side="tl" part="lem"/>
		      <clip pos="2" side="tl" part="a_prn"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="2" side="sl" part="pers"/>
		      <clip pos="2" side="tl" part="gen"/>
		      <clip pos="2" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
		</out>
                <let>
                  <clip pos="1" side="tl" part="tipus_prn"/>
                  <lit-tag v="subj"/>
                </let>
		<out>
		  <b pos="1"/>
		  <chunk name="pro_indirecte">
		    <tags>
		      <tag><lit-tag v="SP"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="al"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="1" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
        </otherwise>
      </choose>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PRO_FUERTE PROCLITIC (a mi me, a ella le, ... regla para simplirficar el clitic doubling EOes 'a mi me' -> min)">
      <pattern>
	<pattern-item n="profort"/>
	<pattern-item n="proenc"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
		<out>
		  <chunk name="pro_directe" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
		</out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PRO_FUERTE ADV PROCLITIC (a mi me, a ella le, ... regla para simplirficar el clitic doubling EOes 'a mi no me' -> min ne)">
      <pattern>
	<pattern-item n="profort"/>
	<pattern-item n="adv"/>
	<pattern-item n="proenc"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
		<out>

          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
	 <b pos="1"/>

		  <chunk name="pro_directe">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
		    </lu>
		  </chunk>

		</out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PRO_FUERTE PROCLITIC (a mi)">
      <pattern>
	<pattern-item n="profort"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
		<out>
		  <chunk name="pro_obj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
		</out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PRO_FUERTE PROCLITIC PROCLITIC (a mi me lo, a ella se los, ... regla para simplificar el clitic doubling EOes 'a mi me lo' -> lin al mi )">
      <pattern>
	<pattern-item n="profort"/>
	<pattern-item n="proenc"/>
	<pattern-item n="proenc"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
		<out>
		  <chunk name="pro_directe" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="3" side="sl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="gen"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="3" side="tl" part="lem"/>
		      <clip pos="3" side="tl" part="a_prn"/>
		      <clip pos="3" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="3" side="sl" part="pers"/>
		      <clip pos="3" side="tl" part="gen"/>
		      <clip pos="3" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
		    <b pos="1"/>
                  <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SP"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                  </chunk>

		</out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PROCLITIC (EO)">
      <pattern>
	<pattern-item n="proenc"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

          <choose>
              <when>  <!-- mirem si és SE o EN per no fer res-->
                <test>
		  <or>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="adv"/>
                    </equal>
		  </or>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: el traduim) -->	
		<out>
		  <chunk name="pro_obj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		   <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
		   </lu>

		  </chunk>
		</out>
	</otherwise>
	</choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: INF_IMP + ENCL + ENCL + INF (haver-los de comprar; poder-los comprar; voler-los comprar; deixa'l llegir. El clític passa al final EO- )">
      <pattern>
        <pattern-item n="inf_imp"/>
        <pattern-item n="enc"/>
        <pattern-item n="enc"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out> <!-- primer pintem els vebrs -->
          <chunk name="verb_enc_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="sl" part="pers"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
             <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
             </lu>

          </chunk>
         <b/>
        </out>

                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="3" side="sl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
	              <clip pos="3" side="tl" part="lem"/>
		      <clip pos="3" side="tl" part="a_prn"/>
		      <clip pos="3" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="3" side="sl" part="pers"/>
		      <clip pos="3" side="tl" part="gen"/>
		      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
     <!-- Si el primer clitic és SE: l'eliminem; si no el fem objecte indirecte (eliminem les formes SE ja que estadísticament sembla justificat, la majoria de vegades són benefactius, etc...-->

          <choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                      <clip pos="2" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: objecte indirecte (passa a 'subj' per agafar nominatiu i s'afegeix la prep 'al') -->
                <let>
                  <clip pos="2" side="tl" part="tipus_prn"/>
                  <lit-tag v="subj"/>
                </let>
                <out>
                  <b pos="1"/>
                  <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SP"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="sl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: INF_IMP + ENCL + INF (EOes; poderlos comprar; EO- )">
      <pattern>
        <pattern-item n="inf_imp"/>
        <pattern-item n="enc"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out> <!-- primer pintem els vebrs -->
          <chunk name="verb_enc_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="sl" part="pers"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps" link-to="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
             <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
             </lu>

          </chunk>
        </out>

          <choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                      <clip pos="2" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: objecte indirecte (passa a 'subj' per agafar nominatiu i s'afegeix la prep 'al') -->
                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="sl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <b pos="1"/>
                    <lu>
	              <clip pos="2" side="tl" part="lem"/>
		      <clip pos="2" side="tl" part="a_prn"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="2" side="sl" part="pers"/>
		      <clip pos="2" side="tl" part="gen"/>
		      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: VERBMOD + ENCL + INF (haver-los de comprar EO- )">
      <pattern>
	<pattern-item n="verbm"/> 
	<pattern-item n="enc"/> 
	<pattern-item n="inf"/> 
      </pattern>
      <action>              	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="imp"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="temps"/>
	      <lit-tag v="inf"/>
	    </let>
	  </when>
	</choose>
	<choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                        <clip pos="2" side="sl" part="lem"/>
                        <lit v="es"/><!--és 'sp' -->
                      </equal>
                </test>

	<out>
	  <chunk name="mod_x" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	      <tag><clip pos="1" side="sl" part="pers"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>      
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>	  
            <b pos="1"/>
             <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
             </lu>

	  </chunk>
	</out>  
             </when>
<otherwise>
	<out>
	  <chunk name="mod_enc_x" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	      <tag><clip pos="1" side="sl" part="pers"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>      
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>	  
            <b pos="1"/>
             <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
             </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu> 
	  </chunk>
	</out>  
	</otherwise>
	</choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: VERBMOD + ENCL (per quan va davant desconegudes, perquè no peti: poder-ho xxx - )">
      <pattern>
	<pattern-item n="verbm"/> 
	<pattern-item n="enc"/> 
      </pattern>
      <action>              	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="imp"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="temps"/>
	      <lit-tag v="inf"/>
	    </let>
	  </when>
	</choose>
	<choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                        <clip pos="2" side="sl" part="lem"/>
                        <lit v="es"/><!--és 'sp' -->
                      </equal>
                </test>

	<out>
	  <chunk name="mod_x" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	      <tag><clip pos="1" side="sl" part="pers"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>      
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>	  
	  </chunk>
	</out>  
             </when>
<otherwise>
	<out>
	  <chunk name="mod_enc_x" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	      <tag><clip pos="1" side="sl" part="pers"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>      
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>	  
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu> 
	  </chunk>
	</out>  
	</otherwise>
	</choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule><!--VERBMOD + ENCL + ENCL (per quan va davant desconegudes, perquè almenys no peti: poder-los-ho xxx - )-->
      <pattern>
	<pattern-item n="verbm"/> 
	<pattern-item n="enc"/> 
	<pattern-item n="enc"/> 
      </pattern>
      <action>              	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="imp"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="temps"/>
	      <lit-tag v="inf"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="mod_enc_enc_x" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	      <tag><clip pos="1" side="sl" part="pers"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu> 
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu> 
	  </chunk>
	</out>      
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI + POR -> querido por -> amata de">
      <pattern>
	<pattern-item n="pp"/> 
	<pattern-item n="por"/> 
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <lit-tag v="vblex.pp"/>
	      <clip pos="1" side="sl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>    
	    </lu>
            <b pos="1"/> <!-- ŝanĝo al DE-->
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI + ADV + POR -> querido también por -> amata ankaŭ de">
      <pattern>
	<pattern-item n="pp"/> 
	<pattern-item n="adv"/> 
	<pattern-item n="por"/> 
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <lit-tag v="vblex.pp"/>
	      <clip pos="1" side="sl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
          <b pos="1"/>
	  <chunk name="adv">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="2" side="tl" part="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
          <b pos="2"/> <!-- ŝanĝo al DE-->
	  <chunk name="pr">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI (perquè no enviï gènere ni nombre quan va sol (per tal que no doni error). Caldrà posar-lo tb en les regles d'adjectiu">
      <pattern>
	<pattern-item n="pp"/> 
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <lit-tag v="vblex.pp"/>
	      <clip pos="1" side="sl" part="nbr"/>
	      <clip pos="1" side="tl" part="cas" link-to="4"/>
	      <clip pos="1" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: VERBinf no conjugat (perquè posi bé la cua en multiparaules)">
      <pattern>
	<pattern-item n="inf"/> 
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>     
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>

	<out>
	  <chunk name="inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>
	      <clip pos="1" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<!--
    <rule comment="REGLA: VERBger no conjugat (perquè posi bé la cua en multiparaules)">
      <pattern>
	<pattern-item n="ger"/> 
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>

	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lemh"/> 
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lemh"/>
	      <lit v="be able to"/>
	    </let>
	    <let>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vbmod"/>
	    </let>
	  </when>
	</choose>	    
	<out>
	  <chunk name="ger" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="sl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="sep"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
-->

    <rule comment="REGLA: VERBger no conjugat (perquè posi bé la cua en multiparaules)">
      <pattern>
	<pattern-item n="ger"/> 
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="ger" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="sl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="sep"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <!-- reglas de pasivas reflejas -->

    <rule comment="REGLA: REF + VERB tipo a pasiva (se usa -> estas uzata)">
      <pattern>
	<pattern-item n="prnref"/>
	<pattern-item n="vbref2pasivo"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
		      <lit-tag v="vbser"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="ppres"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- *** duoblaj neoj *** -->

    <rule comment="NO VERBconj ADVNEG ( no canta nunca -> neniam kantas )">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="verbcj"/>
	<pattern-item n="advneg"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="sl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO VERBhaber ADVNEG + PP (no ha nunca leído - neniam legis ; es tradueix per passat) (EO)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="haber"/>
	<pattern-item n="advneg"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <!-- <clip pos="4" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj_perifB">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
		    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <!-- <clip pos="4" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="NO PRON VERBconj ADVNEG ( no lo canta nunca -> neniam kantas ĝin )">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="pro"/>
	<pattern-item n="verbcj"/>
	<pattern-item n="advneg"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
	<call-macro n="nombro1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
        <call-macro n="correccion_lo">
          <with-param pos="2"/>
        </call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="4" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="4" side="tl" part="lem"/>
	              <clip pos="4" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="sl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="1"/>
	  <chunk name="prn_nosubj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_prn"/>
	      <clip pos="2" side="tl" part="tipus_prn"/>
	      <clip pos="2" side="tl" part="pers"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	    </lu>
	  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO PRON VERBhaber ADVNEG + PP (no lo ha nunca leído - neniam legis ĝin ; es tradueix per passat) (EO)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="pro"/>
	<pattern-item n="haber"/>
	<pattern-item n="advneg"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="correccion_lo">
          <with-param pos="2"/>
        </call-macro>
	<call-macro n="nombro1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="4" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="4" side="tl" part="lem"/>
	              <clip pos="4" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <!-- <clip pos="5" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		    <b pos="1"/>
	  <chunk name="prn_nosubj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_prn"/>
	      <clip pos="2" side="tl" part="tipus_prn"/>
	      <clip pos="2" side="tl" part="pers"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	    </lu>
	  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="4" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="4" side="tl" part="lem"/>
	              <clip pos="4" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="2"/>
                  <chunk name="verbcj_perifB">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                    </lu>
		    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <!-- <clip pos="5" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		    <b pos="1"/>
	  <chunk name="prn_nosubj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_prn"/>
	      <clip pos="2" side="tl" part="tipus_prn"/>
	      <clip pos="2" side="tl" part="pers"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	    </lu>
	  </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="NO VERBconj PRONNEG ( ne chante nada -> kantas nenion )">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="verbcj"/>
	<pattern-item n="pronneg"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="sl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="2"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO VERBhaber PRONNEG + PP (no ha nunca leído - neniam legis ; es tradueix per passat) (EO)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="haber"/>
	<pattern-item n="pronneg"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <!-- <clip pos="4" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="2"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perifB" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
		    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <!-- <clip pos="4" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="3"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="NO VERBconj ADVNEG PRONNEG ( no canta nunca nada -> neniam kantas ion )">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="verbcj"/>
	<pattern-item n="advneg"/>
	<pattern-item n="pronneg"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="sl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="3"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO VERBhaber ADVNEG PRONNEG PP (n'a jamais rien lu - neniam legis ion ; es tradueix per passat) (EO)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="haber"/>
	<pattern-item n="advneg"/>
	<pattern-item n="pronneg"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <!-- <clip pos="5" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="4"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj_perifB">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
		    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <!-- <clip pos="5" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="4"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <!--********************************** HACER + TIEMPO ********************************************* -->

    <rule comment="VERBhacer NUM NOMtemps (fa tres setmanes -> antaŭ tri semajnoj)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="num"/>
	<pattern-item n="n_temps"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
            	<lu>
              	<clip pos="2" side="tl" part="lem"/>
              	<clip pos="2" side="tl" part="a_num"/>
              	<clip pos="2" side="tl" part="nbr"/>
	        <lit-tag v="nom"/>
            	</lu>
		<b pos="2"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhacer MAS DE NUM NOMtemps (fa menys de tres setmanes -> antaŭ malpli tri semajnoj)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="mas"/>
	<pattern-item n="de"/>
	<pattern-item n="num"/>
	<pattern-item n="n_temps"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="5"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
	    <lu>
              <clip pos="2" side="tl" part="lem"/>
	      <lit-tag v="adv"/>
	    </lu>
		<b pos="2"/>
	    <lu>
	      <lit v="ol"/>
	      <lit-tag v="cnjcoo"/>
	    </lu>
		<b pos="3"/>
            	<lu>
              	<clip pos="4" side="tl" part="lem"/>
              	<clip pos="4" side="tl" part="a_num"/>
              	<clip pos="4" side="tl" part="nbr"/>
	        <lit-tag v="nom"/>
            	</lu>
		<b pos="4"/>
		<lu>       
		  <clip pos="5" side="tl" part="lemh"/> 
		  <clip pos="5" side="tl" part="a_nom"/>
		  <clip pos="5" side="tl" part="gen"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="5" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhacer QNT NOMtemps (fa algunes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="qnt"/>
	<pattern-item n="n_temps"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
            	<lu>
	        <clip pos="2" side="tl" part="lem"/> 
	        <clip pos="2" side="tl" part="a_det"/>
	        <clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="nom"/>
            	</lu>
		<b pos="2"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhacer IND NOMtemps (fa una setmana -> antaŭ unu semajno)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="un_sg"/>
	<pattern-item n="n_temps"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
	    <lu>
	      <lit v="unu"/>
	      <lit-tag v="num.sg.nom"/>
	    </lu>
		<b pos="2"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhacer IND NOMtemps (fa unes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="un_pl"/>
	<pattern-item n="n_temps"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
	    <lu>
	      <lit v="kelka"/>
	      <lit-tag v="det.qnt.pl.nom"/>
	    </lu>
		<b pos="2"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhacer NOMtemps (fa setmanes -> antaŭ semajnoj)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="n_temps_pl"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
		<lu>       
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <!-- idem + que -->

    <rule comment="VERBhacer NUM NOMtemps (fa tres setmanes -> antaŭ tri semajnoj)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="num"/>
	<pattern-item n="n_temps"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
            	<lu>
              	<clip pos="2" side="tl" part="lem"/>
              	<clip pos="2" side="tl" part="a_num"/>
              	<clip pos="2" side="tl" part="nbr"/>
	        <lit-tag v="nom"/>
            	</lu>
		<b pos="2"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhacer MAS DE NUM NOMtemps (fa menys de tres setmanes -> antaŭ malpli tri semajnoj)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="mas"/>
	<pattern-item n="de"/>
	<pattern-item n="num"/>
	<pattern-item n="n_temps"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="5"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
	    <lu>
              <clip pos="2" side="tl" part="lem"/>
	      <lit-tag v="adv"/>
	    </lu>
		<b pos="2"/>
	    <lu>
	      <lit v="ol"/>
	      <lit-tag v="cnjcoo"/>
	    </lu>
		<b pos="3"/>
            	<lu>
              	<clip pos="4" side="tl" part="lem"/>
              	<clip pos="4" side="tl" part="a_num"/>
              	<clip pos="4" side="tl" part="nbr"/>
	        <lit-tag v="nom"/>
            	</lu>
		<b pos="4"/>
		<lu>       
		  <clip pos="5" side="tl" part="lemh"/> 
		  <clip pos="5" side="tl" part="a_nom"/>
		  <clip pos="5" side="tl" part="gen"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="5" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhacer QNT NOMtemps (fa algunes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="qnt"/>
	<pattern-item n="n_temps"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
            	<lu>
	        <clip pos="2" side="tl" part="lem"/> 
	        <clip pos="2" side="tl" part="a_det"/>
	        <clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="nom"/>
            	</lu>
		<b pos="2"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhacer IND NOMtemps (fa una setmana -> antaŭ unu semajno)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="un_sg"/>
	<pattern-item n="n_temps"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
	    <lu>
	      <lit v="unu"/>
	      <lit-tag v="num.sg.nom"/>
	    </lu>
		<b pos="2"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhacer IND NOMtemps (fa unes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="un_pl"/>
	<pattern-item n="n_temps"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
	    <lu>
	      <lit v="kelka"/>
	      <lit-tag v="det.qnt.pl.nom"/>
	    </lu>
		<b pos="2"/>
		<lu>       
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhacer NOMtemps (fa setmanes -> antaŭ semajnoj)">
      <pattern>
	<pattern-item n="hacer"/>
	<pattern-item n="n_temps_pl"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
		<lu>       
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <!--************************************ ALTRES ************************************************ -->

    <rule comment="UNK">
      <pattern>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="unknown" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="unknown"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: ADV">
      <pattern>
	<pattern-item n="adv_preadv"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="1" side="tl" part="neg"/></tag>		
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADV ITG">
      <pattern>
	<pattern-item n="advitg"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="a_adv"/></tag>	
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: PRONOM tònic/interrogatiu/possessiu EO"> 
      <pattern>
	<pattern-item n="tn_itg_pos"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

	<out>
	  <chunk name="prn_int" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_prn"/>
	      <clip pos="1" side="tl" part="tipus_prn"/>
	      <clip pos="1" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: PRONOM indefinit i companyia (EO)"> 
      <pattern>
	<pattern-item n="tn"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

	<out>
	  <chunk name="prn_nosubj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_prn"/>
	      <clip pos="1" side="tl" part="tipus_prn"/>
	      <clip pos="1" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: PRONOM relatiu EO"> 
      <pattern>
	<pattern-item n="relatiu"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
  <choose>
     <when>   <!-- identificamos 'lo que' para reglas t2x-->
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="lo que"/>
        </equal>
      </test>
	<out>
	  <chunk name="prn" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SNloque"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_prn"/>
	      <clip pos="1" side="tl" part="tipus_prn"/>
	      <clip pos="1" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	  </chunk>
	</out>
	</when>
	<otherwise>      


	<out>
	  <chunk name="prn" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SNrelatiu"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_prn"/>
	      <clip pos="1" side="tl" part="tipus_prn"/>
	      <clip pos="1" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu> 
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: PREP + PRONOM relatiu EO( dels quals, pels que, als que ...)"> 
      <pattern>
	<pattern-item n="prep"/>
	<pattern-item n="relatiu_prep"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<out>
          <chunk name="pr" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
	  <b pos="1"/>
	  <chunk name="prn">
	    <tags>
	      <tag><lit-tag v="SNrelatiu"/></tag>
              <tag><lit-tag v="rel"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_prn"/>
              <lit-tag v="rel"/>
	      <clip pos="2" side="tl" part="nbr" link-to="3"/>
  	      <lit-tag v="4"/>
	    </lu> 
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: PRN personal">
      <pattern>
	<pattern-item n="prpers"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="prpers" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><clip pos="1" side="tl" part="pers"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>  
	      <clip pos="1" side="tl" part="a_prn"/>  
	      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/> 
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	    </lu> 
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
    

 <rule comment="REGLA: CNJ">
      <pattern>
	<pattern-item n="cnj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="cnj" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="tags"/></tag>		
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

 <rule comment="REGLA: de">
      <pattern>
	<pattern-item n="de"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="de" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


 <rule comment="REGLA: al">
      <pattern>
	<pattern-item n="a"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="al" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: PREP">
      <pattern>
	<pattern-item n="prep"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule> <!-- REGLA: reset variables, hem afegit la coma per al pro-drop (cal veure el reset de variablesi EO)-->
      <pattern>
	<pattern-item n="sent"/>
      </pattern>
      <action>
	<let>
	  <var n="nombre"/>
	  <lit-tag v="sg"/>
	</let>
	<let>
	  <var n="genere"/>
	  <lit-tag v="m"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=";"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=","/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=":"/>
		  </equal>
		</or>
	      </not>
	    </test>	      
	    <let>
	      <var n="EOS"/>
	      <lit v="true"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="punt">
	    <tags>
	      <tag><lit-tag v="sent"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    
    <rule> <!-- REGLA: sent_coma (hem afegit regla per a la coma per al pro-drop (no l'imcloem a l'anterior per no fer el reset de variables EO))-->
      <pattern>
	<pattern-item n="sent_coma"/>
      </pattern>
      <action>
	<out>
	  <chunk name="cm">
	    <tags>
	      <tag><lit-tag v="sent"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

<rule comment="REGLA: COMA QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="sent_coma"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <let><var n="case"/><lit-tag v="nom"/></let>

	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

   <choose>
     <when>
      <test>
     	 <in>
       	  <clip pos="2" side="sl" part="lem"/>
       	  <list n="locual"/>
      	</in>
      </test>
        <let><clip pos="2" side="tl" part="lem"/><lit v="kio"/></let> 
     </when>
     <otherwise>
        <let><clip pos="2" side="tl" part="lem"/><lit v="kiu"/></let> 
     </otherwise>
   </choose>

   <choose>
     <when>
      <test>
       <equal>
        <clip pos="2" side="sl" part="nbr"/>
        <lit-tag v="pl"/>
        </equal>
      </test>
        <let><var n="nombre"/><lit-tag v="pl"/></let>
     </when>
     <otherwise>
        <let><var n="nombre"/><lit-tag v="sg"/></let>
     </otherwise>
   </choose>

	<out>
          <chunk name="cm">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>

                <b pos="1"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <var n="nombre"/>
                        <lit-tag v="2"/>
                        </lu>
                        </chunk>

	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


  </section-rules>
</transfer>
