<?xml version="1.0" encoding="UTF-8"?>

<!-- -*- nxml -*- -->
<transfer>

  
  <section-def-cats>

    <def-cat n="cnj">
	<cat-item tags="cnjcoo"/>
	<cat-item tags="cnjsub"/>
	<cat-item tags="cnjadv"/>
    </def-cat>
    
    <def-cat n="proclise">
      <cat-item tags="prn.itg.*"/>
      <cat-item tags="adv.itg"/>
      <cat-item tags="cnjsub"/>
      <cat-item tags="rel.*"/>
      <cat-item tags="adv"/>
      <cat-item tags="ij"/>
      <cat-item tags="cnjcoo"/>
      <cat-item tags="pr"/>
      <cat-item tags="cnjadv"/>
    </def-cat>

    
    <def-cat n="categorias">
	    <cat-item lemma="antes" tags="adv"/>
	    <cat-item lemma="ayeri" tags="adv"/>
	    <cat-item lemma="entós" tags="adv"/>
	    <cat-item lemma="daquella" tags="adv"/>
	    <cat-item lemma="cuantayá" tags="adv"/>
	    <cat-item lemma="abenayá" tags="adv"/>
	    <cat-item lemma="cuando" tags="cnjadv"/>
	    <cat-item lemma="cuándo" tags="adv.*"/>
    </def-cat>
    
    <def-cat n="categorias2">
	    <cat-item tags="prn.tn.*"/>
	    <cat-item tags="np.*"/>
    </def-cat>
    
    <def-cat n="nom">
      <cat-item tags="n.*"/>
    </def-cat>
     <def-cat n="en">
      <cat-item lemma="en" tags="pr"/>
	</def-cat>

     <def-cat n="de">
      <cat-item lemma="de" tags="pr"/>
	</def-cat>

    <def-cat n="bueno_malo">
		<cat-item lemma="bono" tags="adv"/>
		<cat-item lemma="bonu" tags="adj.*"/>
		<cat-item lemma="malu" tags="n.*"/>
		<cat-item lemma="malu" tags="adj.*"/>
	</def-cat>
     	

	<def-cat n="sustantivo_temporal">
      <cat-item lemma="segundu" tags="n.*"/>	
      <cat-item lemma="minutu" tags="n.*"/>	  
      <cat-item lemma="hora" tags="n.*"/>	  
      <cat-item lemma="día" tags="n.*"/>
	  <cat-item lemma="selmana" tags="n.*"/>
      <cat-item lemma="mes" tags="n.*"/>
	  <cat-item lemma="añu" tags="n.*"/>
      <cat-item lemma="década" tags="n.*"/>	
      <cat-item lemma="lustru" tags="n.*"/>		  
      <cat-item lemma="siglu" tags="n.*"/>	
      <cat-item lemma="tiempu" tags="n.*"/>		
      <cat-item lemma="ratu" tags="n.*"/>		
      <cat-item lemma="temporada" tags="n.*"/>			  
	</def-cat>
    <!-- sustantivos temporales -->	
	
	
    <def-cat n="que">
      <cat-item tags="rel.nn.*"/>
    </def-cat>
   <!--relativo "que" -->
   
   <def-cat n="nun">
	   <cat-item lemma="nun" tags="adv"/>
	   <cat-item lemma="non" tags="adv"/>

   </def-cat>
    
   <def-cat n="y">
      <cat-item lemma="y" tags="cnjcoo"/>	
      <cat-item lemma="ya" tags="cnjcoo"/>	  
      <cat-item lemma="anque" tags="cnjadv"/>	
      <cat-item lemma="pero" tags="cnjcoo"/>	
      <cat-item lemma="pero" tags="n.*"/>	
      <cat-item lemma="nin" tags="cnjcoo"/>	
   </def-cat>	
   <!-- 'y' y derivados -->	
	
    <def-cat n="detnt">
      <cat-item tags="detnt"/>
    </def-cat>
    <!-- determinante neutro -->

	<def-cat n="adjnt">
      <cat-item tags="adj.nt.*"/>
    </def-cat>		
    <!-- adjetivo neutro -->
	
    <def-cat n="tener">
	    <cat-item lemma="tener" tags="vblex.*"/>
    </def-cat>
    <!--verbo deber -->
    
	<def-cat n="adj_det_num_nom">
      <cat-item tags="adj.*"/>
      <cat-item tags="det.*"/>
	  <cat-item tags="num.*"/>
     <cat-item tags="n.*"/>
    </def-cat>	

    <def-cat n="nomp">
      <cat-item tags="np.ant"/>
    </def-cat>
    <def-cat n="nploc">
      <cat-item tags="np.loc"/>
    </def-cat>
    <def-cat n="det">
      <cat-item tags="det.*"/>
    </def-cat>
    <def-cat n="def">
      <cat-item tags="det.def.*"/>
    </def-cat>
    <def-cat n="pos">
      <cat-item tags="det.pos.*"/>
    </def-cat>
	<def-cat n="posmf">
      <cat-item tags="det.pos.mf.*"/>
    </def-cat>
    <def-cat n="predet">
      <cat-item tags="predet.*"/>
    </def-cat>
    <def-cat n="adjec">
      <cat-item tags="adj.*"/>
      <cat-item tags="vblex.pp.*"/>
    </def-cat>
    <def-cat n="adj">
      <cat-item tags="adj.*"/>
    </def-cat>
    <def-cat n="adv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>
    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>
    <def-cat n="cuyo">
      <cat-item tags="rel.aa.*"/>
    </def-cat>
    <def-cat n="prn">
      <cat-item tags="prn.tn.*"/>
      <cat-item tags="prn.itg.*"/>
    </def-cat>
    <def-cat n="prnenc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>
    <def-cat n="prnpro">
      <cat-item tags="prn.pro.*"/>
    </def-cat>
    <def-cat n="encpro">
	    <cat-item tags="prn.pro.*"/>
	    <cat-item tags="prn.enc.*"/>
    </def-cat>
	    
    <def-cat n="plus">
	    <cat-item tags="vblex.pis.*"/>
	    <cat-item tags="vbser.pis.*"/>
	    <cat-item tags="vbhaver.pis.*"/>
    </def-cat>
    
    <def-cat n="verb">
      <cat-item tags="vblex.*"/>
      <cat-item tags="vbser.*"/>
      <cat-item tags="vbhaver.*"/>
    </def-cat>
    <def-cat n="verbir">
      <cat-item lemma="dir" tags="vblex.*"/>
      <cat-item lemma="volver" tags="vblex.*"/>
      <cat-item lemma="acostumar" tags="vblex.*"/>
    </def-cat>
    <def-cat n="verbter">
      <cat-item lemma="tar" tags="vblex.*"/>
    </def-cat>
    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
    </def-cat>

 <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
    </def-cat>
    <def-cat n="ppmsg">
      <cat-item tags="vblex.pp.m.sg"/>
      <cat-item tags="vbser.pp.m.sg"/>
      <cat-item tags="vbhaver.pp.m.sg"/>
    </def-cat>
    <def-cat n="pmp">
      <cat-item tags="vblex.pmp.*"/>
      <cat-item tags="vbser.pmp.*"/>
      <cat-item tags="vbhaver.pmp.*"/>
    </def-cat>
    <def-cat n="lquest">
      <cat-item tags="lquest"/>
    </def-cat>
    <def-cat n="num">
      <cat-item tags="num.*"/>
    </def-cat>
     <def-cat n="sent">
       <cat-item tags="sent"/>
     </def-cat>
  </section-def-cats>
  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
    </def-attr>
    <def-attr n="a_nomp">
      <attr-item tags="np.ant"/>
    </def-attr>
    <def-attr n="a_nploc">
      <attr-item tags="np.loc"/>
    </def-attr>
    <def-attr n="a_det">
      <attr-item tags="det.def"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.dem"/>
      <attr-item tags="det.pos"/>
    </def-attr>
    <def-attr n="a_predet">
      <attr-item tags="predet"/>
    </def-attr>
    <def-attr n="a_adjec">
      <attr-item tags="adj.ind"/>
      <attr-item tags="adj.sup"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj"/>
      <attr-item tags="vblex.pp"/>
    </def-attr>
    <def-attr n="a_adj">
      <attr-item tags="adj.ind"/>
      <attr-item tags="adj.sup"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj"/>
    </def-attr>
    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
    </def-attr>
    <def-attr n="a_prep">
      <attr-item tags="pr"/>
    </def-attr>
    <def-attr n="a_prn">
      <attr-item tags="prn.tn.p1"/>
      <attr-item tags="prn.tn.p2"/>
      <attr-item tags="prn.tn.p3"/>
      <attr-item tags="prn.tn"/>
      <attr-item tags="prn.tn.ref.p3"/>
      <attr-item tags="prn.tn.pos"/>
      <attr-item tags="prn.itg"/>
    </def-attr>
    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
    </def-attr>
    <def-attr n="a_inf">
      <attr-item tags="vblex.inf"/>
      <attr-item tags="vbser.inf"/>
      <attr-item tags="vbhaver.inf"/>
    </def-attr>
    <def-attr n="a_lquest">
      <attr-item tags="lquest"/>
    </def-attr>
    <def-attr n="a_num">
      <attr-item tags="num"/>
    </def-attr>
    <def-attr n="a_prnenc">
      <attr-item tags="prn.enc"/>
      <attr-item tags="prn.enc.ref"/>
    </def-attr>
    <def-attr n="a_prnpro">
      <attr-item tags="prn.pro"/>
      <attr-item tags="prn.pro.ref"/>
    </def-attr>
    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="GD"/>
      <attr-item tags="nt"/>
    </def-attr>
    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>
    <def-attr n="persona">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>
    <def-attr n="temps">
      <attr-item tags="inf"/>
      <attr-item tags="ger"/>
      <attr-item tags="pp"/>
      <attr-item tags="pri"/>
      <attr-item tags="ifi"/>
      <attr-item tags="pii"/>
      <attr-item tags="fti"/>
      <attr-item tags="cni"/>
      <attr-item tags="prs"/>
      <attr-item tags="pis"/>
      <attr-item tags="fts"/>
      <attr-item tags="imp"/>
      <attr-item tags="pmp"/>
    </def-attr>

    
  </section-def-attrs>
  <section-def-vars>
    <def-var n="uno"/>
    <def-var n="genero"/>
    <def-var n="numero"/>
    <def-var n="concDet"/>
    <def-var n="concAdj"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
  </section-def-vars>
  <section-def-macros>
  
 <def-macro n="f_bcond" npar="2"><!--Per mirar si el blanc conté o no format -->
     	<choose>
     	  <when>
     	    <test>
     	      <not>
     	        <equal>
     	          <b pos="1"/>
     	          <lit v=" "/>
     	        </equal>
              </not>
     	    </test>
            <out>
              <b pos="1"/>
            </out>
          </when>     	    
     	</choose>
     </def-macro>

    
    <def-macro n="f_concord1" npar="1">
      <choose>
<!--To determine value of variables of gender and
                 number and propagate to other rules.  Variables are
                 not used again in this rule -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
<!-- If word has GD or ND, we try to assign the
              gender or number of the previous rule. If there is no
              value for the gender or number variable from previous
              rules, gender will be masculine and number singular.-->
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="genero"/>
                  <lit-tag v="f"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="f"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="numero"/>
                  <lit-tag v="pl"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
    </def-macro>


    <def-macro n="f_concord2" npar="2">

	<choose>
        <when>
          <test>
            <!-- do the main and second parameter gender agree?-->
            <and>
              <or>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal caseless="yes">
                  <!-- do the main and second parameter number agree?-->
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
          <!-- there is gender and number agreement-->
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
          <!-- there isn't gender and number agreement-->
        </otherwise>
      </choose>

      <choose>
        <when>
          <test>
            <!-- Propagate the main parameter gender if it has been modified during the translation -->
            <and>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal caseless="yes">
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal caseless="yes">
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal caseless="yes">
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal caseless="yes">
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>

      <choose>
        <when>
          <test>
            <!-- Propagate the main parameter number if it has been modified during the translation -->
            <and>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal caseless="yes">
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal caseless="yes">
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal caseless="yes">
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal caseless="yes">
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
            </when>
          </choose>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </when>
      </choose>

      <choose>
        <when>
          <test>
            <!-- Which is the rule general gender? -->
            <equal caseless="yes">
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="nt"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="nt"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="nt"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="nt"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>

      <choose>
        <when>
          <!-- Which is the rule general number? -->
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="2" side="sl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>

      <choose>
        <!-- Determine gender and number value if they are undetermined -->
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>

      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>

      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>

      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>

    </def-macro>



    <def-macro n="f_concord3" npar="3">
      <choose>
<!-- Look if in source language there is concordance between first and second element -->
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Look if in source language there is concordance between second and third element -->
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concSegundo"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concSegundo"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Propagate the main parameter gender if it has been modified during the translation -->
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
<!-- Propagate the main parameter number if it has been modified during the translation -->
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
<!-- Determine the rule general gender. Priority order: main, second and third element -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="3" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="3" side="sl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Determine the rule general number. Priority order: main, second and third element -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="2" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="3" side="sl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Assign values to GD and ND -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>
    <def-macro n="f_concord4" npar="4">
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concSegundo"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concSegundo"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concTercero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concTercero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="4" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="4" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="4" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concTercero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="4" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="4" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="4" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concTercero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="4" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="4" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>
  </section-def-macros>
  <section-rules>
    
    
    <rule>
<!-- REGLA 0: DETERMINANT -->
      <pattern>
        <pattern-item n="det"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 1: NOM -->
      <pattern>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_nom"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 2: ADJECTIU -->
      <pattern>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_adj"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 3: PRONOM -->
<!--Special case, macro f_concord1 
is not applicable because gender and number cannot be taken from previous rules -->
      <pattern>
        <pattern-item n="prn"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="GD"/>
              </equal>
            </test>
            <let>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </let>
          </when>
          <when>
            <test>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
            </test>
            <let>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </let>
          </when>
        </choose>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_prn"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 1: NUMERAL-->
      <pattern>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
	
    <rule>
		<!-- REGLA 4b: DET_POS NOM -->
      <pattern>
        <pattern-item n="posmf"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 4: DETERMINANT NOM -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
	  <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>

<!-- REGLA 5: NOM ADJECTIU-->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
		<choose>
			  <when>
				<test>
				  <equal>
					<clip pos="2" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>
				</test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adj"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>				
			</when>
			<otherwise>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adj"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>
			</otherwise>
		</choose>
      </action>
    </rule>
	
	
	<rule>
<!-- REGLA 5b: NOM ADJECTIU-->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="y"/>
        <pattern-item n="adjec"/>		
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>		  
        </call-macro>
		<choose>
			<when>
				<test>
				<and>
				  <equal>
					<clip pos="2" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>
				  <equal>
					<clip pos="4" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>				  
				</and>
				</test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adj"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				  <b pos="2"/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				  <b pos="3"/>
				  <lu>
					<clip pos="4" side="tl" part="lem"/>
					<clip pos="4" side="tl" part="a_adj"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
				  </lu>				  
				</out>				
			</when>		
			  <when>
				<test>
				  <equal>
					<clip pos="2" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>
				</test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adj"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				  <b pos="2"/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				  <b pos="3"/>
				  <lu>
					<clip pos="4" side="tl" part="lem"/>
					<clip pos="4" side="tl" part="a_adj"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
				  </lu>				  
				</out>				
			</when>
			  <when>
				<test>
				  <equal>
					<clip pos="4" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>
				</test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adj"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				  <b pos="2"/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				  <b pos="3"/>
				  <lu>
					<clip pos="4" side="tl" part="lem"/>
					<clip pos="4" side="tl" part="a_adj"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
				  </lu>				  
				</out>					  			
			</when>			
			<otherwise>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_nom"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_adj"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				  <b pos="2"/>
				  <lu>
					<clip pos="3" side="tl" part="whole"/>
				  </lu>
				  <b pos="3"/>
				  <lu>
					<clip pos="4" side="tl" part="lem"/>
					<clip pos="4" side="tl" part="a_adj"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
				  </lu>				  
				</out>		
			</otherwise>
		</choose>
      </action>
    </rule>	
	
    <rule>
<!-- REGLA 6: ADJECTIU NOM -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
		<choose>
			  <when>
				<test>
				  <equal>
					<clip pos="1" side="sl" part="gen"/>
					<lit-tag v="nt"/>
				  </equal>
				</test>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_adj"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_nom"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>				
			</when>
			<otherwise>
				<out>
				  <lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_adj"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				  </lu>
				  <b pos="1"/>
				  <lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_nom"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				  </lu>
				</out>
			</otherwise>
		</choose>
      </action>
    </rule>
	
	

    <rule>
<!-- REGLA 7: DET NOM ADJECTIU-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 8: DET ADJECTIU NOM-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 9: PREDET DET NOM-->
      <pattern>
        <pattern-item n="predet"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_predet"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_det"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 9: PREDET DET NOM ADJECTIU-->
      <pattern>
        <pattern-item n="predet"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_predet"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_det"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lem"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 10: DETERMINANT ADJECTIU-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 11: ADJECTIU NOM ADJECTIU-->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_adj"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 12: DET ADJECTIU NOM ADJECTIU -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lem"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 13: NOM ADVERBI ADJECTIU-->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_nom"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adv"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 14: DET NOM ADVERBI ADJECTIU -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adv"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lem"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 15: DET ADVERBI NOM-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adv"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adv"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 16: NUMERAL NOM -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 17: NUMERAL ADJECTIU -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 18: NUMERAL NOM ADJECTIU -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 19: NUMERAL ADJECTIU NOM -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 21: DET NUMERAL NOM -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_num"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    
    
    
  
    <rule>  
 

<!--REGRA EGV01: V (verbos sen enclíticos)
canté pola nueche-> he cantado por la noche (si es pasado pongo el compuesto)
comería pola nueche -> comería por la noche
cantara unes canciones guapes -> había cantado unas canciones bonitas
Nun canté pola nueche -> No he cantado por la noche

-->
      <pattern>
        <pattern-item n="verb"/>
      </pattern>
      <action>
        <choose>
          
          
          <when>
            <test>
              <equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="pis"/>
              </equal>
            </test>
            <out>
              <lu>
		<get-case-from pos="1">
                <lit v="haber"/>
		</get-case-from> 
                <lit-tag v="vbhaver.pii"/>
                <clip pos="1" side="sl" part="persona"/>
                <clip pos="1" side="sl" part="nbr"/>
              </lu>
              <b/>
              <lu>
                <clip pos="1" side="tl" part="lem"/>
                <clip pos="1" side="sl" part="a_verb"/>
                <lit-tag v="pp"/>
                <lit-tag v="m"/>
                <lit-tag v="sg"/>
              </lu>
            </out>
          </when>         

	  
	  <when>
		  <test>
			  <equal>
				  <clip pos="1" side="sl" part="temps"/>
				  <lit-tag v="ifi"/>
			  </equal>
		  </test>
		  <out>
			  <lu>
				  
				  <get-case-from pos="1">		  
				  <lit v="haber"/>
			  	  </get-case-from> 
				  <lit-tag v="vbhaver.pri"/>
				  <clip pos="1" side="sl" part="persona"/>
				  <clip pos="1" side="sl" part="nbr"/>
			  </lu>
			  <b/>
			  <lu>
				  <clip pos="1" side="tl" part="lem"/>
				  <clip pos="1" side="sl" part="a_verb"/>
				  <lit-tag v="pp"/>
				  <lit-tag v="m"/>
				  <lit-tag v="sg"/>
			  </lu>
		  </out>
          </when>         
          <otherwise>
            
    	    <out>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
		<clip pos="1" side="tl" part="persona"/>
		<clip pos="1" side="tl" part="gen"/>
		<clip pos="1" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </out>  
          </otherwise>

        </choose>     

      </action>
    </rule>
   
    
    <!--REGRA EGV01b2: V (verbos sen enclíticos)
	
    que cantara bien -> Que cantara bien 

    Si cantara bien, pagáben-y más -> Si cantara bien, le pagaban más
    
    -->
    
    <rule>  
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		  
				    
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <clip pos="2" side="tl" part="temps"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </out>  
	    </action>
    </rule>
    
	
    <!--REGRA EGV01b3: V (verbos sen enclíticos)
    diz que cantara bien -> dice que había cantado bien
    pregunta si cantara bien -> pregunta si había cantado bien
    Nun diz que cantara bien -> No dice que había cantado bien
    -->
    
    <rule>  
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
					    <equal>
						    <clip pos="3" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    <equal>
						    <clip pos="1" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
				    	   </and>
				    </test>
				    <out>
					    <lu>
						    
						    <get-case-from pos="1">		  
							    <lit v="haber"/>
						    </get-case-from> 
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>      
			    
			    <when>
				    <test>
					    <equal>
						    <clip pos="3" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
				    </test>
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>      
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lemh"/>
						    <clip pos="3" side="tl" part="a_verb"/>
						    <clip pos="3" side="tl" part="temps"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
						    <clip pos="3" side="tl" part="lemq"/>
					    </lu>
				    </out>  
			    </otherwise>
			    
		    </choose>     
		    
	    </action>
    </rule>

    
    <!--REGRA EGV01b3a: V (verbos sen enclíticos)
	      Preguntó si la neña cantara bien->  Ha preguntado si la niña había cantado bien
    Nun preguntó si la neña cantara bien ->  No ha preguntado si la niña había cantado bien
    Preguntaríes si la neña cantara bien -> Preguntarías si la niña había cantado bien
    Nun preguntaríes si la neña cantara bien -> No preguntarías si la niña había cantado bien
    -->
    <rule>
    <pattern>
	    <pattern-item n="verb"/>
	    <pattern-item n="cnj"/>
	    <pattern-item n="adj_det_num_nom"/>
	    <pattern-item n="adj_det_num_nom"/>
	    <pattern-item n="plus"/>
    </pattern>
    <action>
	    <choose>
		    
		    <when>
			    <test>
				    <equal>
					    <clip pos="1" side="sl" part="temps"/>
					    <lit-tag v="ifi"/>
				    </equal>
			    </test>
			    <out>
				    <lu>
					    
					    <get-case-from pos="1">		  
						    <lit v="haber"/>
					    </get-case-from> 
					    <lit-tag v="vbhaver.pri"/>
					    <clip pos="1" side="sl" part="persona"/>
					    <clip pos="1" side="sl" part="nbr"/>
				    </lu>
				    <b/>
				    <lu> <get-case-from pos="2">	
					    <clip pos="1" side="tl" part="lem"/>
				    </get-case-from> 
					    <clip pos="1" side="sl" part="a_verb"/>
					    <lit-tag v="pp"/>
					    <lit-tag v="m"/>
					    <lit-tag v="sg"/>
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu>
				    <b/>
				    
				    <lu>
				    <clip pos="3" side="tl" part="whole"/>
			    	    </lu>
				    <b/>
				    <lu>
					    <clip pos="4" side="tl" part="whole"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="haber"/>
					    <lit-tag v="vbhaver.pii"/>
					    <clip pos="5" side="sl" part="persona"/>
					    <clip pos="5" side="sl" part="nbr"/>
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="5" side="tl" part="lem"/>
					    <clip pos="5" side="sl" part="a_verb"/>
					    <lit-tag v="pp"/>
					    <lit-tag v="m"/>
					    <lit-tag v="sg"/>
				    </lu>
			    </out>
		    </when>         
		    <otherwise>
			    
			    <out>
				    <lu>
					    <clip pos="1" side="tl" part="lemh"/>
					    <clip pos="1" side="tl" part="a_verb"/>
					    <clip pos="1" side="tl" part="temps"/>
					    <clip pos="1" side="tl" part="persona"/>
					    <clip pos="1" side="tl" part="gen"/>
					    <clip pos="1" side="tl" part="nbr"/>
					    <clip pos="1" side="tl" part="lemq"/>
				    </lu>
				    <b/>
				   
				    <lu>
					    <clip pos="2" side="tl" part="whole"/>
				    </lu>
				    <b/>
				    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
				    <b/>
				    
				    <lu>
					    <clip pos="4" side="tl" part="whole"/>
				    </lu>
				    <b/>
				    <lu>
					    <lit v="haber"/>
					    <lit-tag v="vbhaver.pii"/>
					    <clip pos="5" side="sl" part="persona"/>
					    <clip pos="5" side="sl" part="nbr"/>
				    </lu>
				    <b/>
				    <lu>
					    <clip pos="5" side="tl" part="lem"/>
					    <clip pos="5" side="sl" part="a_verb"/>
					    <lit-tag v="pp"/>
					    <lit-tag v="m"/>
					    <lit-tag v="sg"/>
				    </lu>
			    </out>  
		    </otherwise>
		    
	    </choose>     
	    
    </action>
</rule>
   
    
    <!--REGRA EGV01b3: V (verbos sen enclíticos)
	      Si la neña cantara bien-> Si la niña cantara @bien

    
    -->
    
    <rule>  
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		   
				    
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
				    </out>  
	
	    </action>
    </rule>
    
    
    
    <!--REGRA EGV01b3b: V (verbos sen enclíticos)
    Preguntó si María cantara bien->    Ha preguntado si María había cantado bien
    Nun preguntó si María cantara bien->  No ha preguntado si María había cantado bien
    Preguntaríes si María cantara bien ->  Preguntarías si María había cantado bien
    
    
    -->
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="plus"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <equal>
						    <clip pos="1" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
				    </test>
				    <out>
					    <lu>
						    
						    <get-case-from pos="1">		  
							    <lit v="haber"/>
						    </get-case-from> 
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu> <get-case-from pos="2">	
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from> 
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>         
			    <otherwise>
				    
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="lemh"/>
						    <clip pos="1" side="tl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="gen"/>
						    <clip pos="1" side="tl" part="nbr"/>
						    <clip pos="1" side="tl" part="lemq"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <clip pos="2" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>  
			    </otherwise>
			    
		    </choose>     
		    
	    </action>
    </rule>
    
    
    <!--REGRA EGV01b3: V (verbos sen enclíticos)
	      si María cantara bien->  si María cantara bien
    Que María cantara bien, ye posible -> Que María cantara bien, es posible
    
    -->
    
    <rule>  
	    <pattern>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    
		    
		    <out>
			    <lu>
				    <clip pos="1" side="tl" part="whole"/>
			    </lu>
			    <b/>
			    <lu>
				    <clip pos="2" side="tl" part="whole"/>
			    </lu>
			    <b/>
			    <lu>
				    <clip pos="3" side="tl" part="whole"/>
			    </lu>
		    </out>  
		    
	    </action>
    </rule>
    
    
    
    
    <!--REGRA EGV01b: V (verbos sen enclíticos)
    Antes dixi esto -> Antes dije esto
    Ayeri canté la Traviata -> Ayer canté la Traviata
    Cuando canté, tiráronme agua enriba -> Cuando canté, me han tirado agua 
    ¿cuándo cantó María? ->¿cuándo cantó María?
    y dixi esto -> y he dicho esto(el y no entra en "categorias" se hace como el verbo solo)
    -->
    
    <rule>  
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="verb"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <equal>
						    <clip pos="2" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
				    </test>
				    <out>
					    <lu>
						    <clip pos="1" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="2" side="sl" part="persona"/>
						    <clip pos="2" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="2" side="tl" part="lem"/>
						    <clip pos="2" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>      

				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="persona"/>
							<clip pos="2" side="tl" part="gen"/>
							<clip pos="2" side="tl" part="nbr"/>
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>

	
	<!--REGRA EGV01b02: (conj,adv,etc) + verbo + enc
	y comí-yos -> y les he comido
	Ayeri comiólu-> Ayeri le comió
	Antes comióse -> Antes se comió
	y comíase -> y se comía
	Antes cómilo -> Antes cómelo 
	-->
	
	<rule>
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="verb"/>
			<pattern-item n="prnenc"/>
		</pattern>
		<action>
			<choose>
				<when>
					<test>
						<and>
							<equal>
								<clip pos="2" side="sl" part="temps"/>
								<lit-tag v="pis"/>
					    		</equal>
							<equal>
								<clip pos="3" side="sl" part="a_prnenc"/>
								<lit-tag v="prn.enc.ref"/>
							</equal>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out>
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="2">
								<clip pos="3" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.pro.ref"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="2">
								<lit v="haber"/>
							</get-case-from>
							
							<lit-tag v="vbhaver.pii"/>
							<clip pos="2" side="sl" part="persona"/>
							<clip pos="2" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
					    </lu>
					  
					</out>
				</when>
				
				<when>
					<test>
						<and>
							<equal>
								<clip pos="3" side="sl" part="a_prnenc"/>
								<lit-tag v="prn.enc.ref"/>
							</equal>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out>
						<lu>
						<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="2">
								<clip pos="3" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.pro.ref"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="3">
								<clip pos="2" side="tl" part="lem"/>
							</get-case-from>
							<clip pos="2" side="sl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="persona"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>    
						
					</out>
				</when>
				
				
				<when>
					<test>
						<and>
							<equal>
								<clip pos="2" side="sl" part="temps"/>
								<lit-tag v="pis"/>
					    		</equal>
							<equal>
								<clip pos="3" side="sl" part="lem"/>
								<lit v="lu"/>
							</equal>
							<equal>
								<clip pos="3" side="sl" part="gen"/>
								<lit-tag v="nt"/>
							</equal>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							
							<get-case-from pos="2">
								<lit v="lo"/>
							</get-case-from>
							<lit-tag v="prn.pro"/>
							<clip pos="3" side="tl" part="persona"/>
							<lit-tag v="nt"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							
							<get-case-from pos="2">
								<lit v="haber"/>
							</get-case-from>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="2" side="sl" part="persona"/>
							<clip pos="2" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
					    </lu>
						
					</out>
				</when>
				
				
				<when>
					<test>
						<and>
							
							<equal>
								<clip pos="3" side="sl" part="lem"/>
								<lit v="lu"/>
							</equal>
							<equal>
								<clip pos="3" side="sl" part="gen"/>
								<lit-tag v="nt"/>
							</equal>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							
							<get-case-from pos="2">
								<lit v="lo"/>
							</get-case-from>
							<lit-tag v="prn.pro"/>
							<clip pos="3" side="tl" part="persona"/>
							<lit-tag v="nt"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="3">
								<clip pos="2" side="tl" part="lem"/>
							</get-case-from>
							<clip pos="2" side="sl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="persona"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>    
						
					</out>
				</when>
				
				<when>
					<test>
						<and>
							<equal>
								<clip pos="2" side="sl" part="temps"/>
								<lit-tag v="pis"/>
					    		</equal>
							<equal>
								<clip pos="3" side="sl" part="lem"/>
								<lit v="lu"/>
							</equal>
							
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							
							<get-case-from pos="2">
								<lit v="le"/>
							</get-case-from>
							<lit-tag v="prn.pro"/>
							<clip pos="3" side="tl" part="persona"/>
							<lit-tag v="mf"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							
							<get-case-from pos="2">
								<lit v="haber"/>
							</get-case-from>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="2" side="sl" part="persona"/>
							<clip pos="2" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
					    </lu>
						
					</out>
				</when>
				
				
				
			
				<when>
					<test>
						<and>
							
							<equal>
								<clip pos="3" side="sl" part="lem"/>
								<lit v="lu"/>
							</equal>
							
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							
							<get-case-from pos="2">
								<lit v="le"/>
							</get-case-from>
							<lit-tag v="prn.pro"/>
							<clip pos="3" side="tl" part="persona"/>
							<lit-tag v="mf"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="3">
								<clip pos="2" side="tl" part="lem"/>
							</get-case-from>
							<clip pos="2" side="sl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="persona"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>    
						
					</out>
				</when>
				
				
				<when>
					<test>
						<and>
							<equal>
								<clip pos="2" side="sl" part="temps"/>
								<lit-tag v="pis"/>
					    		</equal>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="2">
								<clip pos="3" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.pro"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							
							<get-case-from pos="2">
								<lit v="haber"/>
							</get-case-from>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="2" side="sl" part="persona"/>
							<clip pos="2" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
						
						
					</out>
				</when>
				
				
				<when>
					<test>
						<and>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="2" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="2">
								<clip pos="3" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.pro"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="3">
								<clip pos="2" side="tl" part="lem"/>
							</get-case-from>
							<clip pos="2" side="sl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="persona"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>    
						
					</out>
				</when>
				
				
				<when>
					<test>
						
							<equal>
								<clip pos="2" side="sl" part="temps"/>
								<lit-tag v="pis"/>
							</equal>
							
					</test>
					<out> 
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<mlu>
						<lu>
							
							<get-case-from pos="2">
								<lit v="haber"/>
							</get-case-from>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="2" side="sl" part="persona"/>
							<clip pos="2" side="sl" part="nbr"/>
						</lu>
						<lu>
							<get-case-from pos="2">
								<clip pos="3" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.enc"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						</mlu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
						
						
					</out>
				</when>
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<mlu>
							
							<lu>
								<clip pos="2" side="tl" part="lemh"/>
								<clip pos="2" side="sl" part="a_verb"/>
								<clip pos="2" side="tl" part="temps"/>
								<clip pos="2" side="tl" part="persona"/>
								<clip pos="2" side="tl" part="nbr"/>
							</lu>
							<lu>
								<clip pos="3" side="tl" part="lem"/>
								<clip pos="3" side="tl" part="a_prnenc"/>
								<clip pos="3" side="tl" part="persona"/>
								<clip pos="3" side="tl" part="gen"/>
								<clip pos="3" side="tl" part="nbr"/>
								<clip pos="2" side="tl" part="lemq"/>
							</lu>
						</mlu>
					</out>  
				</otherwise>
			</choose>     
		</action>
	</rule>

	
	<!--REGRA EGV01b2: V (verbos sen enclíticos)
	Ayeri yo canté-> Ayer yo canté
	y María cantó -> y María ha cantado
	Mañana el cantará -> Mañana el cantará 
	
	-->
	
	<rule>  
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="categorias2"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				
				
				<when>
					<test>
						<equal>
							<clip pos="3" side="sl" part="temps"/>
							<lit-tag v="pis"/>
						</equal>
					</test>
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<lit v="haber"/>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="3" side="sl" part="persona"/>
							<clip pos="3" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="lem"/>
							<clip pos="3" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					</out>
				</when>      
				
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<clip pos="3" side="tl" part="temps"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>
	

	
	<!--REGRA EGV01b02: (conj,adv,etc) + verbo + enc
	y yo comí-yos -> y yo les he comido 
	Ayeri María comiólu-> Ayeri María le comió
	Antes Juan mordióse -> Antes Juan se mordió
	Antes tu cómilo -> Antes tu cómelo
	-->
	
	<rule>
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="categorias2"/>
			<pattern-item n="verb"/>
			<pattern-item n="prnenc"/>
		</pattern>
		<action>
			<choose>
				<when>
					<test>
						<and>
							<equal>
								<clip pos="3" side="sl" part="temps"/>
								<lit-tag v="pis"/>
							</equal>
							<equal>
								<clip pos="4" side="sl" part="a_prnenc"/>
								<lit-tag v="prn.enc.ref"/>
							</equal>
							<not><equal>
									<clip pos="3" side="sl" part="temps"/>
									<lit-tag v="inf"/>
								</equal></not>
							<not><equal>
									<clip pos="3" side="sl" part="temps"/>
									<lit-tag v="ger"/>
								</equal></not>
							<not><equal>
									<clip pos="3" side="sl" part="temps"/>
									<lit-tag v="imp"/>
								</equal></not>
						</and>
					</test>
					<out>
						<lu>
							<clip pos="1" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="sl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="3">
								<clip pos="4" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.pro.ref"/>
							<clip pos="4" side="tl" part="persona"/>
							<clip pos="4" side="tl" part="gen"/>
							<clip pos="4" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="3">
								<lit v="haber"/>
							</get-case-from>
							
							<lit-tag v="vbhaver.pii"/>
							<clip pos="3" side="sl" part="persona"/>
							<clip pos="3" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="lem"/>
							<clip pos="3" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="4" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						<b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="3">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="3" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <clip pos="3" side="tl" part="temps"/>
							    <clip pos="3" side="tl" part="persona"/>
							    <clip pos="3" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="3" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="4" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="4" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						<b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="3" side="sl" part="persona"/>
							    <clip pos="3" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lem"/>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="4" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="4" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="3" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <clip pos="3" side="tl" part="temps"/>
							    <clip pos="3" side="tl" part="persona"/>
							    <clip pos="3" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="3" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="4" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						   <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="3" side="sl" part="persona"/>
							    <clip pos="3" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lem"/>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="4" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						   <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="3" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <clip pos="3" side="tl" part="temps"/>
							    <clip pos="3" side="tl" part="persona"/>
							    <clip pos="3" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="3" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						   <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="3">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="3">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="3" side="sl" part="persona"/>
							    <clip pos="3" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lem"/>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="3" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						   <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="3">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="gen"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="3" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <clip pos="3" side="tl" part="temps"/>
							    <clip pos="3" side="tl" part="persona"/>
							    <clip pos="3" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						   <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    <lu>
								    
								    <get-case-from pos="3">
									    <lit v="haber"/>
								    </get-case-from>
								    <lit-tag v="vbhaver.pii"/>
								    <clip pos="3" side="sl" part="persona"/>
								    <clip pos="3" side="sl" part="nbr"/>
							    </lu>
							    <lu>
								    <get-case-from pos="3">
									    <clip pos="4" side="tl" part="lem"/>
								    </get-case-from>
								    <lit-tag v="prn.enc"/>
								    <clip pos="4" side="tl" part="persona"/>
								    <clip pos="4" side="tl" part="gen"/>
								    <clip pos="4" side="tl" part="nbr"/>
							    </lu>
						    </mlu>
						    <b/>
						    <lu>
							    <clip pos="3" side="tl" part="lem"/>
							    <clip pos="3" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    <otherwise>
					    
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    
							    <lu>
								    <clip pos="3" side="tl" part="lemh"/>
								    <clip pos="3" side="sl" part="a_verb"/>
								    <clip pos="3" side="tl" part="temps"/>
								    <clip pos="3" side="tl" part="persona"/>
								    <clip pos="3" side="tl" part="nbr"/>
							    </lu>
							    <lu>
								    <clip pos="4" side="tl" part="lem"/>
								    <clip pos="4" side="tl" part="a_prnenc"/>
								    <clip pos="4" side="tl" part="persona"/>
								    <clip pos="4" side="tl" part="gen"/>
								    <clip pos="4" side="tl" part="nbr"/>
								    <clip pos="3" side="tl" part="lemq"/>
							    </lu>
						    </mlu>
					    </out>  
				    </otherwise>
			    </choose>     
		    </action>
	    </rule>
	    
	

	    
	    
	    <!--REGRA EGV01b04: 
	    y el neñu comió-yos -> y el niño les ha comido
	    Antes María comiólu->  Antes María le comió
	    Antes el perru mordióse -> Antes el perru se mordió
	    Antes un neñu comíalo -> Antes un neñu lo comía
	    -->
	    
	    <rule>
		    <pattern>
			    <pattern-item n="categorias"/>
			    <pattern-item n="adj_det_num_nom"/>
			    <pattern-item n="adj_det_num_nom"/>
			    <pattern-item n="verb"/>
			    <pattern-item n="prnenc"/>
		    </pattern>
		    <action>
			    <choose>
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="4" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <lit v="haber"/>
							    </get-case-from>
							    
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="4" side="sl" part="persona"/>
							    <clip pos="4" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lem"/>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="5" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <clip pos="4" side="tl" part="temps"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="4" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="4" side="sl" part="persona"/>
							    <clip pos="4" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lem"/>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <clip pos="4" side="tl" part="temps"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="4" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="4" side="sl" part="persona"/>
							    <clip pos="4" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lem"/>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="5" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <clip pos="4" side="tl" part="temps"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="4" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="4">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="4" side="sl" part="persona"/>
							    <clip pos="4" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lem"/>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="4" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="4">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="gen"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="4" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <clip pos="4" side="tl" part="temps"/>
							    <clip pos="4" side="tl" part="persona"/>
							    <clip pos="4" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    <lu>
								    
								    <get-case-from pos="4">
									    <lit v="haber"/>
								    </get-case-from>
								    <lit-tag v="vbhaver.pii"/>
								    <clip pos="4" side="sl" part="persona"/>
								    <clip pos="4" side="sl" part="nbr"/>
							    </lu>
							    <lu>
								    <get-case-from pos="4">
									    <clip pos="5" side="tl" part="lem"/>
								    </get-case-from>
								    <lit-tag v="prn.enc"/>
								    <clip pos="5" side="tl" part="persona"/>
								    <clip pos="5" side="tl" part="gen"/>
								    <clip pos="5" side="tl" part="nbr"/>
							    </lu>
						    </mlu>
						    <b/>
						    <lu>
							    <clip pos="4" side="tl" part="lem"/>
							    <clip pos="4" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    <otherwise>
					    
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    
							    <lu>
								    <clip pos="4" side="tl" part="lemh"/>
								    <clip pos="4" side="sl" part="a_verb"/>
								    <clip pos="4" side="tl" part="temps"/>
								    <clip pos="4" side="tl" part="persona"/>
								    <clip pos="4" side="tl" part="nbr"/>
							    </lu>
							    <lu>
								    <clip pos="5" side="tl" part="lem"/>
								    <clip pos="5" side="tl" part="a_prnenc"/>
								    <clip pos="5" side="tl" part="persona"/>
								    <clip pos="5" side="tl" part="gen"/>
								    <clip pos="5" side="tl" part="nbr"/>
								    <clip pos="4" side="tl" part="lemq"/>
							    </lu>
						    </mlu>
					    </out>  
				    </otherwise>
			    </choose>     
		    </action>
	    </rule>
	
	    
	    
	    <!--REGRA EGV01b05: 
	    Ayeri el neñu tontu comió-yos -> Ayer el neñu tontu les comió
	    Antes el perru grande mordióse -> Antes el perru grande se mordió
	    y el perru grande mordióse -> y el perro grande se ha mordido
	    Antes un neñu grande comíalo -> Antes un neñu grande lo comía
	    -->
	    
	    <rule>
		    <pattern>
			    <pattern-item n="categorias"/>
			    <pattern-item n="adj_det_num_nom"/>
			    <pattern-item n="adj_det_num_nom"/>
			    <pattern-item n="adj_det_num_nom"/>
			    <pattern-item n="verb"/>
			    <pattern-item n="prnenc"/>
		    </pattern>
		    <action>
			    <choose>
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="5" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <lit v="haber"/>
							    </get-case-from>
							    
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="6" side="sl" part="a_prnenc"/>
								    <lit-tag v="prn.enc.ref"/>
							    </equal>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro.ref"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="6">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <clip pos="5" side="tl" part="temps"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="5" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="6" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="gen"/>
								    <lit-tag v="nt"/>
							    </equal>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						   
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="lo"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <lit-tag v="nt"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="6">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <clip pos="5" side="tl" part="temps"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="5" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <equal>
								    <clip pos="6" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
					    </out>
				    </when>
				    
				    
				    
				    
				    <when>
					    <test>
						    <and>
							    
							    <equal>
								    <clip pos="6" side="sl" part="lem"/>
								    <lit v="lu"/>
							    </equal>
							    
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="le"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <lit-tag v="mf"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="6">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <clip pos="5" side="tl" part="temps"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <equal>
								    <clip pos="5" side="sl" part="temps"/>
								    <lit-tag v="pis"/>
							    </equal>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    
							    <get-case-from pos="5">
								    <lit v="haber"/>
							    </get-case-from>
							    <lit-tag v="vbhaver.pii"/>
							    <clip pos="5" side="sl" part="persona"/>
							    <clip pos="5" side="sl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    <and>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="inf"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="ger"/>
								    </equal></not>
							    <not><equal>
									    <clip pos="5" side="sl" part="temps"/>
									    <lit-tag v="imp"/>
								    </equal></not>
						    </and>
					    </test>
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="5">
								    <clip pos="6" side="tl" part="lem"/>
							    </get-case-from>
							    <lit-tag v="prn.pro"/>
							    <clip pos="6" side="tl" part="persona"/>
							    <clip pos="6" side="tl" part="gen"/>
							    <clip pos="6" side="tl" part="nbr"/>
						    </lu>
						    <b/>
						    <lu>
							    <get-case-from pos="6">
								    <clip pos="5" side="tl" part="lem"/>
							    </get-case-from>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <clip pos="5" side="tl" part="temps"/>
							    <clip pos="5" side="tl" part="persona"/>
							    <clip pos="5" side="tl" part="nbr"/>
						    </lu>    
						    
					    </out>
				    </when>
				    
				    
				    <when>
					    <test>
						    
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    
					    </test>
					    <out> 
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    <lu>
								    
								    <get-case-from pos="5">
									    <lit v="haber"/>
								    </get-case-from>
								    <lit-tag v="vbhaver.pii"/>
								    <clip pos="5" side="sl" part="persona"/>
								    <clip pos="5" side="sl" part="nbr"/>
							    </lu>
							    <lu>
								    <get-case-from pos="5">
									    <clip pos="6" side="tl" part="lem"/>
								    </get-case-from>
								    <lit-tag v="prn.enc"/>
								    <clip pos="6" side="tl" part="persona"/>
								    <clip pos="6" side="tl" part="gen"/>
								    <clip pos="6" side="tl" part="nbr"/>
							    </lu>
						    </mlu>
						    <b/>
						    <lu>
							    <clip pos="5" side="tl" part="lem"/>
							    <clip pos="5" side="sl" part="a_verb"/>
							    <lit-tag v="pp"/>
							    <lit-tag v="m"/>
							    <lit-tag v="sg"/>
						    </lu>
						    
						    
					    </out>
				    </when>
				    <otherwise>
					    
					    <out>
						    <lu>
							    <clip pos="1" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="2" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="3" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <lu>
							    <clip pos="4" side="sl" part="whole"/>
						    </lu>
						    <b/>
						    <mlu>
							    
							    <lu>
								    <clip pos="5" side="tl" part="lemh"/>
								    <clip pos="5" side="sl" part="a_verb"/>
								    <clip pos="5" side="tl" part="temps"/>
								    <clip pos="5" side="tl" part="persona"/>
								    <clip pos="5" side="tl" part="nbr"/>
							    </lu>
							    <lu>
								    <clip pos="6" side="tl" part="lem"/>
								    <clip pos="6" side="tl" part="a_prnenc"/>
								    <clip pos="6" side="tl" part="persona"/>
								    <clip pos="6" side="tl" part="gen"/>
								    <clip pos="6" side="tl" part="nbr"/>
								    <clip pos="5" side="tl" part="lemq"/>
							    </lu>
						    </mlu>
					    </out>  
				    </otherwise>
			    </choose>     
		    </action>
	    </rule>
	
	<!--REGRA EGV01c: V (verbos sen enclíticos)
	Cuando la mio prima cantó-> Cuando mi prima cantó
	Cuando’l sacerdote cantó -> Cuando el sacerdote cantó
	Y el sacerdote cantó -> Y el sacerdote ha cantado
	
	-->
	
	<rule>  
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				
				
				<when>
					<test>
						<equal>
							<clip pos="4" side="sl" part="temps"/>
							<lit-tag v="pis"/>
						</equal>
					</test>
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<lit v="haber"/>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="4" side="sl" part="persona"/>
							<clip pos="4" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="lem"/>
							<clip pos="4" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					</out>
				</when>      
				
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<clip pos="4" side="tl" part="temps"/>
							<clip pos="4" side="tl" part="persona"/>
							<clip pos="4" side="tl" part="gen"/>
							<clip pos="4" side="tl" part="nbr"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>
	
	

	<!--REGRA EGV01c: V (verbos sen enclíticos)
	Cuando’l sacerdote tontu cantó> Cuando el sacerdote tonto cantó
	y el sacerdote tontu cantó -> 	y el sacerdote tonto ha cantado
	-->
	
	<rule>  
		<pattern>
			<pattern-item n="categorias"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="adj_det_num_nom"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				
				
				<when>
					<test>
						<equal>
							<clip pos="5" side="sl" part="temps"/>
							<lit-tag v="pis"/>
						</equal>
					</test>
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<lit v="haber"/>
							<lit-tag v="vbhaver.pii"/>
							<clip pos="5" side="sl" part="persona"/>
							<clip pos="5" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="5" side="tl" part="lem"/>
							<clip pos="5" side="sl" part="a_verb"/>
							<lit-tag v="pp"/>
							<lit-tag v="m"/>
							<lit-tag v="sg"/>
						</lu>
					</out>
				</when>      
				
				<otherwise>
					
					<out>
						<lu>
							<clip pos="1" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="whole"/>
						</lu>
						<b/>
						<lu>
							<clip pos="5" side="tl" part="lemh"/>
							<clip pos="5" side="tl" part="a_verb"/>
							<clip pos="5" side="tl" part="temps"/>
							<clip pos="5" side="tl" part="persona"/>
							<clip pos="5" side="tl" part="gen"/>
							<clip pos="5" side="tl" part="nbr"/>
							<clip pos="5" side="tl" part="lemq"/>
						</lu>
					</out>  
				</otherwise>
				
			</choose>     
			
		</action>
	</rule>
	
	
	
	
    
    
<!--REGRA EGV02: V+ENC 
cómi-yos->cómeles
comí-yos->les he comido
comiólu-> le ha comido
cómese->se come
comióse -> se ha comido
cómilo -> cómelo
comelo -> comerlo
comentándo-yos -> comentándoles

-->

  <rule>
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
         <choose>
		 
		 
		 <when>
			 <test>
				 <and>
					 <equal>
						 <clip pos="2" side="sl" part="a_prnenc"/>
						 <lit-tag v="prn.enc.ref"/>
					 </equal>
					 <equal>
						<clip pos="1" side="sl" part="temps"/>
						<lit-tag v="ifi"/>
					 </equal>
					 <not><equal>
							 <clip pos="1" side="sl" part="temps"/>
							 <lit-tag v="inf"/>
						 </equal></not>
					 <not><equal>
							 <clip pos="1" side="sl" part="temps"/>
							 <lit-tag v="ger"/>
						 </equal></not>
					 <not><equal>
							 <clip pos="1" side="sl" part="temps"/>
							 <lit-tag v="imp"/>
						 </equal></not>
				 </and>
			 </test>
			 <out>
				 <lu>
					 <get-case-from pos="1">
						 <clip pos="2" side="tl" part="lem"/>
					 </get-case-from>
					 <lit-tag v="prn.pro.ref"/>
					 <clip pos="2" side="tl" part="persona"/>
					 <clip pos="2" side="tl" part="gen"/>
					 <clip pos="2" side="tl" part="nbr"/>
				 </lu>
				 <b/>
				 <lu>
					 <get-case-from pos="2">
						 <lit v="haber"/>
			  	  	</get-case-from>
					 <lit-tag v="vbhaver.pri"/>
					 <clip pos="1" side="sl" part="persona"/>
					 <clip pos="1" side="sl" part="nbr"/>
				 </lu>
				 <b/>
				 <lu>
					 <clip pos="1" side="tl" part="lem"/>
					 <clip pos="1" side="sl" part="a_verb"/>
					 <lit-tag v="pp"/>
					 <lit-tag v="m"/>
					 <lit-tag v="sg"/>
              			</lu>
			 </out>
		 </when>


          <when>
            <test>
              <and>
                <equal>
                  <clip pos="2" side="sl" part="a_prnenc"/>
                  <lit-tag v="prn.enc.ref"/>
                </equal>
                <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="inf"/>
                </equal></not>
                <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ger"/>
                </equal></not>
                <not><equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="imp"/>
              </equal></not>
              </and>
            </test>
          <out>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro.ref"/>
              <clip pos="2" side="tl" part="persona"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="1" side="sl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="persona"/>
              <clip pos="1" side="tl" part="nbr"/>
                </lu>    
  
            </out>
          </when>

	  
	  <when>
		  <test>
			  <and>
				  <equal>
					  <clip pos="1" side="sl" part="temps"/>
					  <lit-tag v="ifi"/>
				  </equal>
				  
				  <equal>
					  <clip pos="2" side="sl" part="lem"/>
					  <lit v="lu"/>
				  </equal>
				  <equal>
					  <clip pos="2" side="sl" part="gen"/>
					  <lit-tag v="nt"/>
				  </equal>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="inf"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="ger"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="imp"/>
					  </equal></not>
			  </and>
		  </test>
		  <out> 
			  <lu>
				  
				  <get-case-from pos="1">
					  <lit v="lo"/>
				  </get-case-from>
				  <lit-tag v="prn.pro"/>
				  <clip pos="2" side="tl" part="persona"/>
				  <lit-tag v="nt"/>
				  <clip pos="2" side="tl" part="nbr"/>
			  </lu>
			  <b/>
			  <lu>
				  <get-case-from pos="2">
				  <lit v="haber"/>
			  	  </get-case-from>
				  <lit-tag v="vbhaver.pri"/>
				  <clip pos="1" side="sl" part="persona"/>
				  <clip pos="1" side="sl" part="nbr"/>
			  </lu>
			  <b/>
			  <lu>
				  <clip pos="1" side="tl" part="lem"/>
				  <clip pos="1" side="sl" part="a_verb"/>
				  <lit-tag v="pp"/>
				  <lit-tag v="m"/>
				  <lit-tag v="sg"/>
              			</lu>
			  
		  </out>
          </when>

            <when>
            <test>
              <and>

		 <equal>
                 <clip pos="2" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
	       <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="nt"/>
                </equal>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal></not>
              </and>
            </test>
            <out> 
              <lu>
              
                   <get-case-from pos="1">
		<lit v="lo"/>
             </get-case-from>
             <lit-tag v="prn.pro"/>
             <clip pos="2" side="tl" part="persona"/>
             <lit-tag v="nt"/>
            <clip pos="2" side="tl" part="nbr"/>
	    </lu>
              <b/>
              <lu>
                <get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="1" side="sl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>    
              
            </out>
          </when>
	  
	  
	  <when>
		  <test>
			  <and>
				  <equal>
					  <clip pos="1" side="sl" part="temps"/>
					  <lit-tag v="ifi"/>
					  </equal>
				  <equal>
					  <clip pos="2" side="sl" part="lem"/>
					  <lit v="lu"/>
				  </equal>
				  
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="inf"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="ger"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="imp"/>
					  </equal></not>
			  </and>
		  </test>
		  <out> 
			  <lu>
				  
				  <get-case-from pos="1">
					  <lit v="le"/>
				  </get-case-from>
				  <lit-tag v="prn.pro"/>
				  <clip pos="2" side="tl" part="persona"/>
				  <lit-tag v="mf"/>
				  <clip pos="2" side="tl" part="nbr"/>
			  </lu>
			  <b/>
			  <lu>
				  <get-case-from pos="2">
					  <lit v="haber"/>
				  </get-case-from>
				  <lit-tag v="vbhaver.pri"/>
				  <clip pos="1" side="sl" part="persona"/>
				  <clip pos="1" side="sl" part="nbr"/>
			  </lu>
			  <b/>
			  <lu>
				  <clip pos="1" side="tl" part="lem"/>
				  <clip pos="1" side="sl" part="a_verb"/>
				  <lit-tag v="pp"/>
				  <lit-tag v="m"/>
				  <lit-tag v="sg"/>
              			</lu>
			  
		  </out>
          </when>

          <when>
            <test>
              <and>

		 <equal>
                 <clip pos="2" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
	       
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal></not>
              </and>
            </test>
            <out> 
              <lu>
              
                   <get-case-from pos="1">
		<lit v="le"/>
             </get-case-from>
             <lit-tag v="prn.pro"/>
             <clip pos="2" side="tl" part="persona"/>
             <lit-tag v="mf"/>
            <clip pos="2" side="tl" part="nbr"/>
	    </lu>
              <b/>
              <lu>
                <get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="1" side="sl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>    
              
            </out>
          </when>
	  
	  
	  <when>
		  <test>
			  <and>
				  <equal>
					  <clip pos="1" side="sl" part="temps"/>
					  <lit-tag v="ifi"/>
					  </equal>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="inf"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="ger"/>
					  </equal></not>
				  <not><equal>
						  <clip pos="1" side="sl" part="temps"/>
						  <lit-tag v="imp"/>
					  </equal></not>
			  </and>
		  </test>
		  <out> 
			  <lu>
				  <get-case-from pos="1">
					  <clip pos="2" side="tl" part="lem"/>
				  </get-case-from>
				  <lit-tag v="prn.pro"/>
				  <clip pos="2" side="tl" part="persona"/>
				  <clip pos="2" side="tl" part="gen"/>
				  <clip pos="2" side="tl" part="nbr"/>
			  </lu>
			  <b/>
			  <lu>
				  <get-case-from pos="2">
					  <lit v="haber"/>
				  </get-case-from>
				  <lit-tag v="vbhaver.pri"/>
				  <clip pos="1" side="sl" part="persona"/>
				  <clip pos="1" side="sl" part="nbr"/>
			  </lu>
			  <b/>
			  <lu>
				  <clip pos="1" side="tl" part="lem"/>
				  <clip pos="1" side="sl" part="a_verb"/>
				  <lit-tag v="pp"/>
				  <lit-tag v="m"/>
				  <lit-tag v="sg"/>
              			</lu>
			  
		  </out>
          </when>

          <when>
            <test>
              <and>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal></not>
              </and>
            </test>
            <out> 
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <b/>
              <lu>
                <get-case-from pos="2">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="1" side="sl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>    
              
            </out>
          </when>

          <otherwise>

    	    <out>
              <mlu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="sl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="persona"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prnenc"/>
                  <clip pos="2" side="tl" part="persona"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </mlu>
            </out>  
          </otherwise>
        </choose>     
      </action>
    </rule>
    
 
 
    
    
    <!--REGRA EGV02a: V+ENC 
    preguntó-y si cantara bien ->  le ha preguntado si había cantado bien   
    preguntaríes-yos que vieran ellí -> les preguntarías que habían visto allí
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="prnenc"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="2" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="2" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>  
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>    
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    <mlu>
						    <lu>
							    <clip pos="1" side="tl" part="lemh"/>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <clip pos="1" side="tl" part="temps"/>
							    <clip pos="1" side="tl" part="persona"/>
							    <clip pos="1" side="tl" part="nbr"/>
						    </lu>
						    <lu>
							    <clip pos="2" side="tl" part="lem"/>
							    <clip pos="2" side="tl" part="a_prnenc"/>
							    <clip pos="2" side="tl" part="persona"/>
							    <clip pos="2" side="tl" part="gen"/>
							    <clip pos="2" side="tl" part="nbr"/>
							    <clip pos="1" side="tl" part="lemq"/>
						    </lu>
					    </mlu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lemh"/>
						    <clip pos="4" side="tl" part="a_verb"/>
						    <clip pos="4" side="tl" part="temps"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
						    <clip pos="4" side="tl" part="lemq"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
   
    
    <!--REGRA EGV02a2: V+ENC 
    preguntó-y si la neña cantara bien ->   le ha preguntado si la niña había cantado bien
    preguntaríes-yos si la neña cantara bien -> les preguntarías si la niña había cantado bien
    preguntaríase si la neña comiera bien ->   se preguntaría si la niña había comido bien 
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="prnenc"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="2" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="2" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>  
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>    
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    <mlu>
						    <lu>
							    <clip pos="1" side="tl" part="lemh"/>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <clip pos="1" side="tl" part="temps"/>
							    <clip pos="1" side="tl" part="persona"/>
							    <clip pos="1" side="tl" part="nbr"/>
						    </lu>
						    <lu>
							    <clip pos="2" side="tl" part="lem"/>
							    <clip pos="2" side="tl" part="a_prnenc"/>
							    <clip pos="2" side="tl" part="persona"/>
							    <clip pos="2" side="tl" part="gen"/>
							    <clip pos="2" side="tl" part="nbr"/>
							    <clip pos="1" side="tl" part="lemq"/>
						    </lu>
					    </mlu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lemh"/>
						    <clip pos="6" side="tl" part="a_verb"/>
						    <clip pos="6" side="tl" part="temps"/>
						    <clip pos="6" side="tl" part="persona"/>
						    <clip pos="6" side="tl" part="gen"/>
						    <clip pos="6" side="tl" part="nbr"/>
						    <clip pos="6" side="tl" part="lemq"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
 
    
    <!--REGRA EGV02a3: V+ENC 
    preguntó-y si María cantara bien ->      le ha preguntado si María había cantado bien
    preguntaríes-yos si María cantara bien ->     les preguntarías si María había cantado bien 
    preguntaríase si María comiera bien ->       se preguntaría si María había comido bien
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="verb"/>
		    <pattern-item n="prnenc"/>
		    <pattern-item n="cnj"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="plus"/>
	    </pattern>
	    <action>
		    <choose>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="2" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="2" side="sl" part="a_prnenc"/>
							    <lit-tag v="prn.enc.ref"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out>
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro.ref"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="nt"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>  
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    
						    <get-case-from pos="1">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>    
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="1" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="haber"/>
						    </get-case-from>
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="1" side="sl" part="persona"/>
						    <clip pos="1" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="1" side="tl" part="lem"/>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="inf"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="ger"/>
							    </equal></not>
						    <not><equal>
								    <clip pos="1" side="sl" part="temps"/>
								    <lit-tag v="imp"/>
							    </equal></not>
					    </and>
				    </test>
				    <out> 
					    <lu>
						    <get-case-from pos="1">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="sl" part="a_verb"/>
						    <clip pos="1" side="tl" part="temps"/>
						    <clip pos="1" side="tl" part="persona"/>
						    <clip pos="1" side="tl" part="nbr"/>
					    </lu>   
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					  
					    <lu>
						    <lit v="haber"/>
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
				    </out>
			    </when>
			    
			    <otherwise>
				    
				    <out>
					    <mlu>
						    <lu>
							    <clip pos="1" side="tl" part="lemh"/>
							    <clip pos="1" side="sl" part="a_verb"/>
							    <clip pos="1" side="tl" part="temps"/>
							    <clip pos="1" side="tl" part="persona"/>
							    <clip pos="1" side="tl" part="nbr"/>
						    </lu>
						    <lu>
							    <clip pos="2" side="tl" part="lem"/>
							    <clip pos="2" side="tl" part="a_prnenc"/>
							    <clip pos="2" side="tl" part="persona"/>
							    <clip pos="2" side="tl" part="gen"/>
							    <clip pos="2" side="tl" part="nbr"/>
							    <clip pos="1" side="tl" part="lemq"/>
						    </lu>
					    </mlu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="whole"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="whole"/>
					    </lu>
					    <b/>
					  
					    <lu>
						    <clip pos="5" side="tl" part="lemh"/>
						    <clip pos="5" side="tl" part="a_verb"/>
						    <clip pos="5" side="tl" part="temps"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
						    <clip pos="5" side="tl" part="lemq"/>
					    </lu>
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
 
    
    <!--REGRA EGV02b1: categorias(cuando,cuándo, ayeri etc..) + ENC + Verbo  
    Cuando lu llamé ->  Cuando le llamé
    Cuando-yos debía ->  Cuando les debía 
    Cuando-yos debió ->  Cuando les debió
    Cuando se bebió el agua ->  Cuando se bebió el agua
    ¿Cuando lo comió? -> Cuando lo comió
    Cuando los comería -> Cuando les comería
    Cuando-y cantara -> Cuando le había cantado
    Cuando nun-yos debió -> Cuando no les ha debido
    Cuando nun-yos debía ->  Cuando no les debía
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="2" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
		
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
		
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="2" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="3" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
		
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    

    
    <!--REGRA EGV02b2: categorias(cuando,cuándo, ayeri etc..) + ENC + Verbo  
    Cuando yo lu llamé ->   Cuando yo le llamé
    Cuando María-yos cantaba ->   Cuando María les cantaba
    Cuando Juan-yos cantó ->   Cuando Juan les cantó
    Cuando Juan se bebió l'agua ->    Cuando Juan se bebió el agua
    Cuando María-y cantara -> Cuando María le había cantado
    Cuando Juan nun-yos cantó -> Cuando Juan no les ha cantado
    Cuando María nun-yos cantaba -> Cuando María no les cantaba
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					   
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="4" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    <!--REGRA EGV02b3
    Cuando'l sacerdote lu llamó -> Cuando el sacerdote le llamó 
    Cuando los neños cantaben ->  Cuando los niños cantaban
    Cuando el neñu-yos cantó ->  Cuando el niño les cantó
    Cuando el neñu nun-yos cantó -> Cuando el niño no les ha cantado
    Cuando los neños nun cantaben -> Cuando los niños no cantaban 
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="5" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    <!--REGRA EGV02b4
    Cuando'l sacerdote altu lu llamó ->  Cuando el sacerdote alto le llamó
    Cuando los neños rubios cantaben -> Cuando los niños rubios cantaban 
    Cuando el neñu altu-yos cantó ->  Cuando el niño alto les cantó
    Cuando el neñu altu nun-yos cantó -> Cuando el niño alto no les ha cantado 
    Cuando los neños rubios nun cantaben -> Cuando los niños rubios no cantaban
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="categorias"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="6" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>

    <!--REGRA EGV02b: proclise + ENC + Verbo  
    Nun lu llamé ->  No le  he llamado 
    Que-yos debía -> Que les debía
    Que-yos debió ->  Que les ha debido
    Nun se bebió el agua -> No se ha bebido el agua
    Nun lo comió -> No lo ha comido
    Nun los comería -> No les comería
    Nun cantara -> No había cantado
    el sacerdote nun lo comió -> El sacerdote no lo ha comido 
    el sacerdote nun lo bebería -> el sacerdote no lo bebería 
    -->
    
  <rule>
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="2" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="3">
							    <clip pos="2" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <clip pos="2" side="tl" part="gen"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="3" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="2" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
				
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="2" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="2">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="2" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="3" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="3" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="3" side="sl" part="persona"/>
						    <clip pos="3" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu><b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
 
    <!--REGRA EGV02ba: proclise + ENC + Verbo  
    Lo que María-yos debía ->  Lo que María les debía
    Lo que yo-y debí -> Lo que yo le he debido 
    Pero tu te bebisti el agua -> Pero tú te has bebido el agua
    Lo que tu-yos contaras ->  Lo que tú les habías contado
    Pero tu nun te bebisti el agua -> Pero tú no te has bebido el agua 
    Lo que María nun-yos debía ->  Lo que María no les debía
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="categorias2"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <clip pos="3" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="4" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="3" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="3" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="3">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="3" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="4" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="4" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="4" side="sl" part="persona"/>
						    <clip pos="4" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="4" side="tl" part="lem"/>
						    <clip pos="4" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    
    <!--REGRA EGV02ba: proclise + ENC + Verbo  
     Lo que'l neñu-yos debía ->    Lo que el niño les debía 
    Lo que'l sacerdote te mercó -> Lo que el sacerdote te ha comprado
    Pero la neña te bebió el agua -> Pero la niña te ha bebido el agua 
    Lo que'l neñu-yos contara ->  Lo que el niño les había contado
    Lo que'l neñu nun-yos debía ->  Lo que el niño no les debía
    Lo que'l sacerdote nun te mercó -> Lo que el sacerdote no te ha comprado
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <clip pos="4" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <clip pos="4" side="tl" part="gen"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="4" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="5" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="4" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="4" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="4">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="4" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="5" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="5" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="5" side="sl" part="persona"/>
						    <clip pos="5" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="5" side="tl" part="lem"/>
						    <clip pos="5" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
    <!--REGRA EGV02ba2: proclise + ENC + Verbo  
    Lo que'l neñu rubiu-yos debía ->  Lo que el niño rubio les debía
    Lo que'l sacerdote altu te mercó -> Lo que el sacerdote alto te ha comprado 
    Pero la neña rubia te bebió el agua ->  Pero la niña rubia te ha bebido el agua 
    Lo que'l neñu rubiu-yos contara ->  Lo que el niño rubio les había contado
    Lo que'l neñu rubiu nun-yos contó -> Lo que el niño rubio no les ha contado
    Lo que'l neñu rubiu nun-yos debía -> Lo que el niño rubio no les debía 
    -->
    
    <rule>
	    <pattern>
		    <pattern-item n="proclise"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="adj_det_num_nom"/>
		    <pattern-item n="encpro"/>
		    <pattern-item n="verb"/>
		    
	    </pattern>
	    <action>
		    <choose>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal caseless="yes">
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="-y"/>
						    </equal>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    
					    <equal caseless="yes">
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="-y"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <clip pos="5" side="tl" part="lem"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <clip pos="5" side="tl" part="gen"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
					    </lu>    
					    
				    </out>
			    </when>
			    
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    <and>
						    
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="gen"/>
							    <lit-tag v="m"/>
						    </equal>
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="le"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="mf"/>
						    <clip pos="5" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="ifi"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    <and>
						    <equal>
							    <clip pos="6" side="sl" part="temps"/>
							    <lit-tag v="pis"/>
						    </equal>
						    <equal>
							    <clip pos="5" side="sl" part="lem"/>
							    <lit v="lu"/>
						    </equal>
						    
					    </and>
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    
					    <equal>
						    <clip pos="5" side="sl" part="lem"/>
						    <lit v="lu"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="5">
							    <lit v="lo"/>
						    </get-case-from>
						    <lit-tag v="prn.pro"/>
						    <clip pos="5" side="tl" part="persona"/>
						    <lit-tag v="nt"/>
						    <clip pos="6" side="tl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
				    </out>
			    </when>
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="6" side="sl" part="temps"/>
						    <lit-tag v="pis"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pii"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <when>
				    <test>
					    
					    <equal>
						    <clip pos="6" side="sl" part="temps"/>
						    <lit-tag v="ifi"/>
					    </equal>
					    
				    </test>
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    <get-case-from pos="6">
							    <lit v="haber"/>
						    </get-case-from>
						    
						    <lit-tag v="vbhaver.pri"/>
						    <clip pos="6" side="sl" part="persona"/>
						    <clip pos="6" side="sl" part="nbr"/>
					    </lu>
					    <b/>
					    <lu>
						    <clip pos="6" side="tl" part="lem"/>
						    <clip pos="6" side="sl" part="a_verb"/>
						    <lit-tag v="pp"/>
						    <lit-tag v="m"/>
						    <lit-tag v="sg"/>
					    </lu>
					    
				    </out>
			    </when>
			    
			    
			    <otherwise>
				    
				    <out>
					    <lu>
						    
						    <clip pos="1" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="2" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="3" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="4" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="5" side="tl" part="whole"/>
						    
						    
					    </lu>
					    <b/>
					    <lu>
						    
						    <clip pos="6" side="sl" part="whole"/>
						    
					    </lu>    
					    
				    </out>  
			    </otherwise>
		    </choose>     
	    </action>
    </rule>
    
    
 <!--REGRA EGV03: V+ENC+ENC
cómese-yos->se les come
mercómelo->me lo compró
-->
    <rule>
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <choose>
         
        
          <when>
            <test>
              <and>
              <equal>
                 <clip pos="3" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
		
                <equal>
                  <clip pos="2" side="sl" part="a_prnenc"/>
                  <lit-tag v="prn.enc.ref"/>
                </equal>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal></not>
              </and>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro.ref"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <b/>
               <lu>
              
                   <get-case-from pos="1">
		<lit v="le"/>
             </get-case-from>
             <lit-tag v="prn.pro"/>
             <clip pos="3" side="tl" part="persona"/>
             <lit-tag v="mf"/>
            <clip pos="3" side="tl" part="nbr"/>
	    </lu>
              <b/>
              <lu>
                <get-case-from pos="3">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="1" side="sl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>    
              
            </out>
          </when>

          <when>
            <test>
              <and>
                <equal>
                  <clip pos="2" side="sl" part="a_prnenc"/>
                  <lit-tag v="prn.enc.ref"/>
                </equal>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal></not>
              </and>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro.ref"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <b/>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
              <b/>
              <lu>
                <get-case-from pos="3">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="1" side="sl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>    
              
            </out>
          </when>
          
            <when>
            <test>
              <and>
		 <equal>
                 <clip pos="3" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
              
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal></not>
              </and>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <b/>
             <lu>
              
                   <get-case-from pos="1">
		<lit v="le"/>
             </get-case-from>
             <lit-tag v="prn.pro"/>
             <clip pos="3" side="tl" part="persona"/>
             <lit-tag v="mf"/>
            <clip pos="3" side="tl" part="nbr"/>
	    </lu>
              <b/>
              <lu>
                <get-case-from pos="3">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="1" side="sl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>    
              
            </out>
          </when>

          <when>
            <test>
              <and>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal></not>
                <not><equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal></not>
              </and>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <b/>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
              <b/>
              <lu>
                <get-case-from pos="3">
                  <clip pos="1" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="1" side="sl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>    
              
            </out>
          </when>         
          
	  <otherwise>
	    <out>
              <mlu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="sl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="persona"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prnenc"/>                  
                  <clip pos="2" side="tl" part="persona"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_prnenc"/>              
                  <clip pos="3" side="tl" part="persona"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </mlu>
            </out>  
          </otherwise>
        </choose>
      </action>
    </rule>



<!--REGRA EGV03b: proclise + ENC + ENC + Verbo  
Que me lu comió -> Que me le comió
Nun te-y debía -> No te le debía
-->

  <rule>
      <pattern>
	<pattern-item n="proclise"/>
	<pattern-item n="prnpro"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="verb"/>
        
      </pattern>
      <action>
         <choose>

             <when>
            <test>
              
                 <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="-y"/>
                </equal>
       
            </test>
          <out>
	 <lu>
              
                <clip pos="1" side="tl" part="whole"/>
              
             
            </lu><b/>
	    <lu>
              
                <clip pos="2" side="tl" part="whole"/>
              
             
            </lu><b/>
            <lu>
              <get-case-from pos="4">
                <clip pos="3" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="persona"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              
              <clip pos="4" side="sl" part="whole"/>
            </lu>    
  
            </out>
          </when>

          <otherwise>

    	    <out>
               <lu>
            
                <clip pos="1" side="tl" part="whole"/>
          
             
            </lu><b/>
	    <lu>
            
                <clip pos="2" side="tl" part="whole"/>
          
             
            </lu><b/>
            <lu>
	        <get-case-from pos="3">
		<lit v="le"/>
               </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="persona"/>
              <lit-tag v="mf"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              
              <clip pos="4" side="sl" part="whole"/>
      
                </lu>    
  
            </out>  
          </otherwise>
        </choose>     
      </action>
    </rule>




    <!--REGRA EGV04: ir/vir + inf = ir/venir + a + inf 
	    voi comer -> voy a comer
	-->
    <rule>
      <pattern>
        <pattern-item n="verbir"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
	      <get-case-from pos="2">
              <lit v="a"/>
	      </get-case-from>
	      <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </out>
        </action>
      </rule>

      
      <!--REGRA EGV05: ir/vir + inf + enc 
		voi comelo -> lo voy a comer	  
	  -->
      <!--está por facer con ir/vir en pmp-->
      <rule>
        <pattern>
          <pattern-item n="verbir"/>
		  <pattern-item n="inf"/>
          <pattern-item n="prnenc"/>
        </pattern>
        <action>
          <choose>
            <when>
              <test>
                <and>
                  <equal>
                    <clip pos="3" side="sl" part="a_prnenc"/>
                    <lit-tag v="prn.enc.ref"/>
                  </equal>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/>
                    </equal></not>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/>
                    </equal></not>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="imp"/>
                    </equal></not>
                </and>
              </test>
              <out>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.pro.ref"/>
                  <clip pos="3" side="tl" part="persona"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                  <clip pos="1" side="tl" part="whole"/>
                </get-case-from>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <lit v="a"/>
                  </get-case-from>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
            </lu> 
              </out>
            </when>
            <when>
              <test>
                <and>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/>
                    </equal></not>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/>
                    </equal></not>
                  <not><equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="imp"/>
                    </equal></not>
                </and>
              </test>
              <out>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="persona"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="whole"/>
                  </get-case-from>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <lit v="a"/>
                  </get-case-from>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
              </out>
            </when>
          <otherwise>
              <out>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <lit v="a"/>
                  </get-case-from>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="sl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="persona"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <clip pos="3" side="tl" part="a_prnenc"/>
                    <clip pos="3" side="tl" part="persona"/>
                    <clip pos="3" side="tl" part="gen"/>
                    <clip pos="3" side="tl" part="nbr"/>
                    <clip pos="3" side="tl" part="lemq"/>
                  </lu>
              </mlu>
              </out>  
            </otherwise>
          </choose>     
        </action>
    </rule>
    
    
    <!--REGRA EGV06: ir/vir + enc + inf -->
    <!--está por facer con ir/vir en pmp-->
    <rule>
      <pattern>
        <pattern-item n="verbir"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <choose>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="sl" part="a_prnenc"/>
                <lit-tag v="prn.enc.ref"/>
              </equal>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="inf"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ger"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="imp"/>
                </equal></not>
            </and>
          </test>
          <out>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro.ref"/>
              <clip pos="2" side="tl" part="persona"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="whole"/>
              </get-case-from>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu> 
          </out>
        </when>
        <when>
          <test>
            <and>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="inf"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ger"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="imp"/>
                </equal></not>
            </and>
          </test>
          <out>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="persona"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="whole"/>
              </get-case-from>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </out>
        </when>
        <otherwise>
          <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <mlu>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="sl" part="a_verb"/>
                <clip pos="3" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <clip pos="2" side="tl" part="a_prnenc"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </out>  
        </otherwise>
      </choose>     
    </action>
    </rule>
    
    <!--REGRA EGV07: ir/vir + inf + enc +enc 
		voi contátelo -> te lo voy a contar
	-->
    <!--está por facer con ir/vir en pmp-->
    <rule>
      <pattern>
        <pattern-item n="verbir"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <choose>
        <when>
          <test>
            <and>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="inf"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ger"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="imp"/>
                </equal></not>
            </and>
          </test>
          <out>
            <lu>
              <get-case-from pos="1">
                <clip pos="3" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="persona"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="4" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="persona"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="whole"/>
              </get-case-from>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </out>
        </when>
        <otherwise>
          <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <mlu>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="sl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <clip pos="3" side="tl" part="a_prnenc"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <lu>
                <clip pos="4" side="tl" part="lem"/>
                <clip pos="4" side="tl" part="a_prnenc"/>
                <clip pos="4" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </out>  
        </otherwise>
      </choose>     
    </action>
    </rule>
    
    <!--REGRA EGV08: ir/vir + enc + enc + inf  -->
    <!--está por facer con ir/vir en pmp-->
    <rule>
      <pattern>
        <pattern-item n="verbir"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <choose>
        <when>
          <test>
            <and>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="inf"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ger"/>
                </equal></not>
              <not><equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="imp"/>
                </equal></not>
            </and>
          </test>
          <out>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="persona"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="3" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="persona"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="whole"/>
              </get-case-from>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </out>
        </when>
        <otherwise>
          <out>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <lit v="a"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <mlu>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="sl" part="a_verb"/>
                <clip pos="4" side="tl" part="temps"/>
                <clip pos="4" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <clip pos="2" side="tl" part="a_prnenc"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <clip pos="3" side="tl" part="a_prnenc"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </out>  
        </otherwise>
      </choose>     
    </action>
    </rule>
    

<!-- 
regla PERIF09 en + ger -> tras + inf 
en comiendo -> tras comer
-->  
 
<rule>
      <pattern>
        <pattern-item n="en"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>

        <out>
	
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
             <lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
              
            </lu>
        </out>
     </action>
</rule>


<!-- 
regla PERIF09b en + ger +enc -> tras + inf 
En comiendolo -> Tras comerlo
En comiéndolu -> Tras comerle
En debiéndo-yos -> Tras deberles
-->  
 
<rule>
      <pattern>
        <pattern-item n="en"/>
        <pattern-item n="ger"/>
	<pattern-item n="prnenc"/>
      </pattern>
      <action>

       <choose>

            <when>
            <test>
		<and>

		 <equal>
                 <clip pos="3" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
	       <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="nt"/>
                </equal>
              </and>
            </test>
            <out> 

              
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
             <lu>
		  <get-case-from pos="2">
		<lit v="lo"/>
             </get-case-from>
             <lit-tag v="prn.enc"/>
             <clip pos="3" side="tl" part="persona"/>
             <lit-tag v="nt"/>
            <clip pos="3" side="tl" part="nbr"/>
	    </lu>
           </mlu>
         
            </out>
          </when>

          <when>
            <test>

		 <equal>
                 <clip pos="3" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
	     
            </test>
            <out> 

              
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
             <lu>
		<get-case-from pos="1">
		<lit v="le"/>
             </get-case-from>
             <lit-tag v="prn.enc"/>
             <clip pos="3" side="tl" part="persona"/>
             <lit-tag v="mf"/>
            <clip pos="3" side="tl" part="nbr"/>
	   
	     </lu>
           </mlu>
         
            </out>
          </when>

        <otherwise>
        <out>
	
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
             <lu>
		<clip pos="3" side="tl" part="whole"/>
	     </lu>
           </mlu>
        </out>
       </otherwise>
     </choose>
     </action>
</rule>

	
<!-- 
regla PERIF09b en + ger +enc + enc -> tras + inf 
En comiéndoselo -> Tras comérselo
En comiéndotelu -> Tras comértele
En debiéndose-yos -> Tras debérseles

-->  
 
<rule>
      <pattern>
        <pattern-item n="en"/>
        <pattern-item n="ger"/>
	<pattern-item n="prnenc"/>
	<pattern-item n="prnenc"/>
      </pattern>
      <action>

       <choose>

            <when>
            <test>
		<and>

		 <equal>
                 <clip pos="4" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
	       <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <lit-tag v="nt"/>
                </equal>
              </and>
            </test>
            <out> 

              
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
              <lu> 
               <clip pos="3" side="tl" part="whole"/>
              </lu>
             <lu>
		  <get-case-from pos="2">
		<lit v="lo"/>
             </get-case-from>
             <lit-tag v="prn.enc"/>
             <clip pos="4" side="tl" part="persona"/>
             <lit-tag v="nt"/>
            <clip pos="4" side="tl" part="nbr"/>
	    </lu>
           </mlu>
         
            </out>
          </when>

        <when>
            <test>

		 <equal>
                 <clip pos="4" side="sl" part="lem"/>
                <lit v="lu"/>
                </equal>
	     
            </test>
            <out> 

              
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
             <lu>
		<clip pos="3" side="tl" part="whole"/>
	     </lu>
             <lu>
		<get-case-from pos="2">
		<lit v="le"/>
             </get-case-from>
             <lit-tag v="prn.enc"/>
             <clip pos="4" side="tl" part="persona"/>
             <lit-tag v="mf"/>
            <clip pos="4" side="tl" part="nbr"/>
	   
	     </lu>
           </mlu>
         
            </out>
          </when>

        <otherwise>
        <out>
	
            <lu>
            <get-case-from pos="1">
		<lit v="tras"/>
            </get-case-from>
		<lit-tag v="pr"/>
    	    </lu>
               
            <b/>
            <mlu><lu>
              <get-case-from pos="2">
               <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
             </lu>
             <lu>
		<clip pos="3" side="tl" part="whole"/>
	     </lu>
               <lu>
		<clip pos="4" side="tl" part="whole"/>
	     </lu>
           </mlu>
        </out>
       </otherwise>
     </choose>
     </action>
</rule>

  

<!-- 
regla PERIF10 (bon, bonu,mal,malu) + de + inf -> (fácil,difícil) +de+ inf 
Bono d'estudiar -> Fácil de estudiar

-->  
 
 <rule>
      <pattern>
        <pattern-item n="bueno_malo"/>
        <pattern-item n="de"/>		
        <pattern-item n="inf"/>
      </pattern>
      <action>
	<choose>
	   <when>
            <test>
                  <or>
				<equal caseless="yes">
				     <clip pos="1" side="sl" part="lem"/>
					 <lit v="bonu"/>
				</equal>
				<equal caseless="yes">
				     <clip pos="1" side="sl" part="lem"/>
					 <lit v="bono"/>
				</equal>
                   </or>
			</test>	  
			<out>
			  <lu>
				 <get-case-from pos="1">
				<lit v="fácil"/>
				</get-case-from>
				<lit-tag v="adj.mf.sg"/>
				
			  </lu>
			  <b pos="1"/>
			  <lu>
				<clip pos="2" side="tl" part="whole"/>
			  </lu>
			<b pos="1"/>
			  <lu>
				<clip pos="3" side="tl" part="whole"/>
			  </lu>			  
			</out>
		</when>
	   <otherwise> 
			<out>
			  <lu>
				<get-case-from pos="1">
				<lit v="difícil"/>
				</get-case-from>
		
				<lit-tag v="adj.mf.sg"/>
				
			  </lu>
			  <b pos="1"/>
			  <lu>
				<clip pos="2" side="tl" part="whole"/>
			  </lu>
			<b pos="1"/>
			  <lu>
				<clip pos="3" side="tl" part="whole"/>
			  </lu>			  
			</out>
		</otherwise>	
	  </choose>
      </action>
    </rule>



<!-- 
regla EGV51 dir + sustantivo_temporal -> facer + sustantivo_temporal
-->  

<rule>
      <pattern>
        <pattern-item n="verbir"/>
        <pattern-item n="sustantivo_temporal"/>
      </pattern>
      <action>
	  <choose>
	   <when>
        <test>
		  <and>
			  <equal caseless="yes">
				 <clip pos="1" side="sl" part="persona"/>
				  <lit-tag v="p3"/>
			  </equal>
			  <equal caseless="yes">
				 <clip pos="1" side="sl" part="nbr"/>
				  <lit-tag v="sg"/>
			  </equal>		
		  </and>
        </test>
        <out>
            <lu>
		       <get-case-from pos="1">
			    <lit v="hacer"/>
			</get-case-from>
               <clip pos="1" side="tl" part="a_verb"/>
               <clip pos="1" side="tl" part="temps"/>
               <clip pos="1" side="tl" part="persona"/>
               <clip pos="1" side="tl" part="nbr"/>
			</lu>
             <b/>
            <lu>
		      <clip pos="2" side="tl" part="whole"/> 
			</lu> 		    
        </out>
       </when>
      </choose>
     </action>
    </rule>	

<!-- VA dos años -> HACE dos años -->
<!-- 
regla EGV51 hacer + det/num/adj + sustantivo_temporal -> DIR + det/num/adj + sustantivo_temporal
-->  

<rule>
      <pattern>
        <pattern-item n="verbir"/>
	<pattern-item n="adj_det_num_nom"/>
        <pattern-item n="sustantivo_temporal"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>	
	  <choose>
	   <when>
        <test>
		  <and>
			  <equal caseless="yes">
				 <clip pos="1" side="sl" part="persona"/>
				  <lit-tag v="p3"/>
			  </equal>
			  <equal caseless="yes">
				 <clip pos="1" side="sl" part="nbr"/>
				  <lit-tag v="sg"/>
			  </equal>		
		  </and>
        </test>
        <out>
            <lu>
		       <get-case-from pos="1">
			    <lit v="hacer"/>
			</get-case-from>
               <clip pos="1" side="tl" part="a_verb"/>
               <clip pos="1" side="tl" part="temps"/>
               <clip pos="1" side="tl" part="persona"/>
               <clip pos="1" side="tl" part="nbr"/>
			</lu>
            <b/>
            <lu>
		      <clip pos="2" side="tl" part="whole"/> 
			</lu>
             <b/>
            <lu>
		      <clip pos="3" side="tl" part="whole"/> 
			</lu> 		    
        </out>
       </when>
      </choose>
     </action>
    </rule>		
	
    
    
  
    <!-- 
     regla EGV51 tener + de + inf -> deber + inf
    tienen de cantar -> deben cantar

    -->  
    
    <rule>
	    <pattern>
		    <pattern-item n="tener"/>
		    <pattern-item n="de"/>
		    <pattern-item n="inf"/>
	    </pattern>
	    <action>
		   
		 <out>
		 	<lu>
			    <get-case-from pos="1">
			    <lit v="deber"/>
		            </get-case-from>
			    <clip pos="1" side="tl" part="a_verb"/>
			    <clip pos="1" side="tl" part="temps"/>
			    <clip pos="1" side="tl" part="persona"/>
			    <clip pos="1" side="tl" part="nbr"/>
		         </lu>
			 <b/>
			
			 <lu>
			     <clip pos="3" side="tl" part="whole"/> 
			  </lu>
        </out>
	    </action>
    </rule>		

    
    <!-- 
	 regla EGV52 tener + de + inf + enc -> deber + inf + enc
    teníen de comeles -> debían comerlas
    
    -->  
    
    <rule>
	    <pattern>
		    <pattern-item n="tener"/>
		    <pattern-item n="de"/>
		    <pattern-item n="inf"/>
		    <pattern-item n="prnenc"/>
	    </pattern>
	    <action>
		    
		    <out>
			    <lu>
				    <get-case-from pos="1">
					    <lit v="deber"/>
				    </get-case-from>
				    <clip pos="1" side="tl" part="a_verb"/>
				    <clip pos="1" side="tl" part="temps"/>
				    <clip pos="1" side="tl" part="persona"/>
				    <clip pos="1" side="tl" part="nbr"/>
			    </lu>
			    <b/>
			    
			    <mlu>
			     <lu>
				    <clip pos="3" side="tl" part="whole"/> 
			    </lu>
			    <lu>
				    <clip pos="4" side="tl" part="whole"/> 
			    </lu>
		    	   </mlu>
		    </out>
	    </action>
    </rule>	
    
    
    
    <!-- 
	 regla EGV53 tener + de + inf + enc + enc-> deber + inf + enc + enc
    tendríen de coméseles -> deberían comérselas
    
    -->  
    
    <rule>
	    <pattern>
		    <pattern-item n="tener"/>
		    <pattern-item n="de"/>
		    <pattern-item n="inf"/>
		    <pattern-item n="prnenc"/>
		    <pattern-item n="prnenc"/>
	    </pattern>
	    <action>
		    
		    <out>
			    <lu>
				    <get-case-from pos="1">
					    <lit v="deber"/>
				    </get-case-from>
				    <clip pos="1" side="tl" part="a_verb"/>
				    <clip pos="1" side="tl" part="temps"/>
				    <clip pos="1" side="tl" part="persona"/>
				    <clip pos="1" side="tl" part="nbr"/>
			    </lu>
			    <b/>
			    
			    <mlu>
				    <lu>
					    <clip pos="3" side="tl" part="whole"/> 
				    </lu>
				    <lu>
					    <clip pos="4" side="tl" part="whole"/> 
				    </lu>
				    <lu>
					    <clip pos="5" side="tl" part="whole"/> 
				    </lu>
			    </mlu>
		    </out>
	    </action>
    </rule>		
	
	
	
<!-- 
regla EGV42 "LO" + ADJ nt + QUE relativo + verbo + determinante + sustantivo -> ADJ género concuerda con nombre
Lo blanco que taba la nieve -> Lo blanca que estaba la nieve
Lo blanco que taba la nieve -> Lo blanca que estaba la nieve
-->  

    
    <rule>
      <pattern>
        <pattern-item n="detnt"/>
        <pattern-item n="adjnt"/>
        <pattern-item n="que"/>
        <pattern-item n="verb"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>

        <out>
            <lu>
			<clip pos="1" side="tl" part="whole"/> 
			</lu>
			<b pos="1"/>
			<lu>
				<clip pos="2" side="tl" part="lem"/>
				<clip pos="2" side="tl" part="a_adjec"/>
				<clip pos="6" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>
			</lu>
          	<b pos="2"/>
            <lu>
				<clip pos="3" side="tl" part="whole"/> 
			</lu>
          	<b pos="3"/>
			<lu>
				<clip pos="4" side="tl" part="lem"/>
				<clip pos="4" side="tl" part="a_verb"/>
				<clip pos="4" side="tl" part="temps"/>
				<clip pos="4" side="tl" part="persona"/>
				<clip pos="4" side="tl" part="nbr"/>
			</lu>
			<b pos="4"/>
			<lu>
				<clip pos="5" side="tl" part="lem"/>
				<clip pos="5" side="tl" part="a_det"/>
				<clip pos="5" side="tl" part="gen"/>
				<clip pos="5" side="tl" part="nbr"/>
			</lu>
			<b pos="5"/>
			<lu>
					<clip pos="6" side="tl" part="lem"/>
					<clip pos="6" side="tl" part="a_nom"/>
					<clip pos="6" side="tl" part="gen"/>
					<clip pos="6" side="tl" part="nbr"/>
			</lu>
        </out>
  
      </action>

    </rule>	
	
	
    <!--
	REGRA EGN1: contracción(prep+def)+posesivo
		al mio andamiu -> a mi andamio
	-->
	
    <rule>
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="def"/>
        <pattern-item n="pos"/>
      </pattern>
      <action>
            <out>
              <lu>
                <clip pos="1" side="tl" part="whole"/>  
              </lu>
              <b/>
              <lu>
                <clip pos="3" side="tl" part="whole"/>  
              </lu>
            </out>
      </action>
    </rule>


  
  
  <rule> <!-- REGRA: reset variables-->
    <pattern>
      <pattern-item n="sent"/>
    </pattern>
    <action>
      <let>
        <var n="numero"/>
        <lit-tag v="sg"/>
      </let>
      <let>
        <var n="genero"/>
        <lit-tag v="m"/>
      </let>
      <out>
        <lu>
          <clip pos="1" side="tl" part="whole"/>
        </lu>
      </out>
    </action>
    </rule>
    
  </section-rules>
</transfer>
